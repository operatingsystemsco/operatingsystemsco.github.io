*** motif.orig/config/cf/Amoeba.cf	Fri Apr 28 11:03:58 2000
--- motif/config/cf/Amoeba.cf	Sat Jun  3 18:49:34 2000
***************
*** 1,5 ****
  XCOMM platform:  $XConsortium: Amoeba.cf /main/12 1996/09/28 16:04:48 rws $
! XCOMM platform:  $XFree86: xc/config/cf/Amoeba.cf,v 3.6 1995/01/28 15:40:08 dawes Exp $
  
  /*  The presence of this configuration file in the X distribution
   *  does not imply full support for the system it describes.
--- 1,5 ----
  XCOMM platform:  $XConsortium: Amoeba.cf /main/12 1996/09/28 16:04:48 rws $
! XCOMM platform:  $XFree86: xc/config/cf/Amoeba.cf,v 3.9 1996/12/23 05:50:00 dawes Exp $
  
  /*  The presence of this configuration file in the X distribution
   *  does not imply full support for the system it describes.
*** motif.orig/config/cf/bsdi.cf	Fri Apr 28 11:04:00 2000
--- motif/config/cf/bsdi.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,5 ****
  XCOMM platform:  $XConsortium: bsdi.cf /main/22 1996/09/28 16:09:30 rws $
! XCOMM platform:  $XFree86: xc/config/cf/bsdi.cf,v 3.19 1995/10/21 11:26:00 dawes Exp $
  
  #ifndef OSName
  #define OSName            BSD/OS 2.0
--- 1,5 ----
  XCOMM platform:  $XConsortium: bsdi.cf /main/22 1996/09/28 16:09:30 rws $
! XCOMM platform:  $XFree86: xc/config/cf/bsdi.cf,v 3.23.2.5 1998/02/09 14:33:21 robin Exp $
  
  #ifndef OSName
  #define OSName            BSD/OS 2.0
***************
*** 21,27 ****
  XCOMM BSD/OS 2.0 comes with gcc 2.6.3 installed as gcc2 and gcc.
  XCOMM gcc 1.42 is installed as cc.
  XCOMM BSD/386 1.1 comes with gcc 2.5.8 installed as gcc2.
- XCOMM gcc 1.42 is installed as cc and gcc.
  XCOMM BSD/386 1.0 comes with gcc 1.40 as the only compiler.
  XCOMM The default is to use gcc2 on release 2.0 and 1.1 and gcc1 on 1.0
  XCOMM The defaults can be altered by defining "HasGcc2" as YES or NO in
--- 21,26 ----
***************
*** 40,46 ****
  #  define HasGcc2ForCplusplus	YES
  # endif
  # define CcCmd			gcc2
! # define OptimizedCDebugFlags	DefaultGcc2i386Opt -m486
  #else
  # define CcCmd			cc
  # define OptimizedCDebugFlags	-O
--- 39,45 ----
  #  define HasGcc2ForCplusplus	YES
  # endif
  # define CcCmd			gcc2
! # define OptimizedCDebugFlags	DefaultGcc2i386Opt
  #else
  # define CcCmd			cc
  # define OptimizedCDebugFlags	-O
***************
*** 57,63 ****
  #  define GccUsesGas    YES
  # endif
  #if HasGcc
! #if UseInstalled
  #define DefaultCCOptions	/**/
  #else
  #define DefaultCCOptions	-ansi
--- 56,62 ----
  #  define GccUsesGas    YES
  # endif
  #if HasGcc
! #if defined(UseInstalled) && (!defined(XF86LinkKit) || !XF86LinkKit)
  #define DefaultCCOptions	/**/
  #else
  #define DefaultCCOptions	-ansi
***************
*** 70,75 ****
--- 69,75 ----
  # define GccGasOption /**/
  #endif
  
+ #define HasShm	YES
  #define ServerExtraDefines GccGasOption XFree86ServerDefines
  #define ServerOSDefines XFree86ServerOSDefines -DDDXTIME
  #define XFree86ConsoleDefines /**/
***************
*** 79,86 ****
  
  #define InstallCmd /usr/bin/install
  #define	EqnCmd eqn -Tps
            COL = col
!          NEQN = eqn -Tascii
          NROFF = nroff
  
  #define DefaultUserPath		:/bin:/usr/bin:/usr/local/bin:$(BINDIR)
--- 79,87 ----
  
  #define InstallCmd /usr/bin/install
  #define	EqnCmd eqn -Tps
+ #define	NeqnCmd eqn -Tascii
            COL = col
!          NEQN = NeqnCmd
          NROFF = nroff
  
  #define DefaultUserPath		:/bin:/usr/bin:/usr/local/bin:$(BINDIR)
*** motif.orig/config/cf/bsdLib.rules	Fri Apr 28 11:04:00 2000
--- motif/config/cf/bsdLib.rules	Sat Jun  3 18:49:34 2000
***************
*** 1,9 ****
--- 1,20 ----
  XCOMM $XConsortium: bsdLib.rules /main/3 1996/09/28 16:09:18 rws $
  
+ 
+ 
+ 
+ 
+ XCOMM $XFree86: xc/config/cf/bsdLib.rules,v 3.4.2.7 1999/07/17 01:32:44 dawes Exp $
  /*
   * NetBSD/FreeBSD shared library rules
   */
  
+ #ifndef UseElfFormat
+ #define UseElfFormat NO
+ #endif
+ 
+ #if !UseElfFormat
+ /* a.out shared libs */
  #ifndef HasSharedLibraries
  #define HasSharedLibraries YES
  #endif
***************
*** 59,64 ****
--- 70,90 ----
  
  #endif /* SharedLibraryTarget */
  
+ #ifndef SharedDepModuleTarget
+ #define SharedDepModuleTarget(name,deps,solist)				@@\
+ AllTarget(name)								@@\
+ 									@@\
+ name: deps								@@\
+ 	$(RM) $@~							@@\
+ 	$(LD) -o $@~ $(SHLIBLDFLAGS) solist $(REQUIREDLIBS)		@@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) name
+ 
+ #endif /* SharedDepModuleTarget */
+ 
  /*
   * SharedLibraryDataTarget - generate rules to create shlib data file;
   */
***************
*** 91,93 ****
--- 117,340 ----
  Concat(varname,LIB) = LoaderLibPrefix Concat(-l,libname) Concat3(Shared,libname,Reqs)		@@\
  LintLibReferences(varname,libname,libsource)
  #endif
+ 
+ #else /* UseElfFormat */
+ 
+ /*
+  * NetBSD/FreeBSD (ELF) shared library rules
+  * Cloned from Linux ELF rules, with the following major change:
+  *
+  * 	Shared libraries depend on -lc.  Since we don't have to worry
+  *	about libc vs. libg, etc., this is a good idea.  (This is actually
+  *	implied by using $(CC) to build the shared libraries.)
+  */
+ 
+ #ifndef HasSharedLibraries
+ #define HasSharedLibraries YES
+ #endif
+ #ifndef ForceNormalLib
+ #define ForceNormalLib YES
+ #endif
+ 
+ #ifndef BaseShLibReqs
+ #define BaseShLibReqs		/* -lc implied by $(CC) */
+ #endif
+ 
+ #ifndef SharedDataSeparation
+ #define SharedDataSeparation NO
+ #endif
+ #ifndef SharedCodeDef
+ #define SharedCodeDef /**/
+ #endif
+ #ifndef SharedLibraryDef
+ #define SharedLibraryDef /**/
+ #endif
+ #ifndef ShLibIncludeFile
+ #define ShLibIncludeFile <bsdLib.tmpl>
+ #endif
+ #ifndef SharedLibraryLoadFlags
+ #define SharedLibraryLoadFlags -shared -Wl,-rpath,$(USRLIBDIR)
+ #endif
+ #ifndef PositionIndependentCFlags
+ #define PositionIndependentCFlags -fPIC
+ #endif
+ #ifndef PositionIndependentCplusplusFlags
+ #define PositionIndependentCplusplusFlags -fPIC
+ #endif
+ #ifndef ExtraLoadFlags
+ #ifdef UseInstalled
+ #define ExtraLoadFlags -Wl,-rpath,$(USRLIBDIRPATH)
+ #else
+ #define ExtraLoadFlags -Wl,-rpath,$(USRLIBDIRPATH) -Wl,-rpath-link,$(BUILDLIBDIR)
+ #endif
+ #endif
+ 
+ /*
+  * InstallSharedLibrary - generate rules to install the shared library.
+  * NOTE: file must be executable, hence "INSTBINFLAGS"
+  */
+ #ifndef FreeBSDArchitecture
+ #ifndef InstallSharedLibrary
+ #define InstallSharedLibrary(libname,rev,dest)				@@\
+ install:: Concat(lib,libname.so.rev) 					@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) $(INSTALLFLAGS) $(INSTBINFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
+ 	@T=`echo Concat($(DESTDIR)dest/lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`;\	@@\
+ 	  set -x; $(RM) $$T && $(LN) Concat(lib,libname.so.rev) $$T	@@\
+ 	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
+ 	$(LN) Concat(lib,libname.so.rev) Concat($(DESTDIR)dest/lib,libname.so)
+ #endif /* InstallSharedLibrary */
+ #else
+ /* FreeBSD version */
+ #ifndef InstallSharedLibrary
+ #define InstallSharedLibrary(libname,rev,dest)				@@\
+ install:: Concat(lib,libname.so.rev) 					@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	@T=`echo Concat(lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`;\	@@\
+ 	  set -x;\							@@\
+ 	  $(INSTALL) $(INSTALLFLAGS) $(INSTBINFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest/$$T;\	@@\
+ 	  $(RM) Concat($(DESTDIR)dest/lib,libname.so);\			@@\
+ 	  $(LN) $$T Concat($(DESTDIR)dest/lib,libname.so)
+ #endif /* InstallSharedLibrary */
+ #endif /* FreeBSDArchitecture */
+ 
+ /*
+  * InstallSharedLibraryData - generate rules to install the shared library data
+  */
+ #ifndef InstallSharedLibraryData
+ #define InstallSharedLibraryData(libname,rev,dest)
+ #endif /* InstallSharedLibraryData */
+ 
+ 
+ /*
+  * SharedLibraryTarget - generate rules to create a shared library;
+  * build it into a different name so that we do not hose people by having
+  * the library gone for long periods.
+  */
+ #ifndef SharedLibraryTarget
+ #ifdef UseInstalled  
+ #define LinkBuildSonameLibrary(lib) true
+ #else
+ #define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+ 	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
+ #endif
+ 
+ #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
+ AllTarget(Concat(lib,libname.so.rev))					@@\
+ 									@@\
+ Concat(lib,libname.so.rev):  solist					@@\
+ 	$(RM) $@~							@@\
+ 	@SONAME=`echo $@ | sed 's/\.[^\.]*$$//'`; set -x; \		@@\
+ 		(cd down; $(CC) -o up/$@~ $(SHLIBLDFLAGS) -Wl,-soname,$$SONAME solist $(REQUIREDLIBS) BaseShLibReqs); \ @@\
+ 		$(RM) $$SONAME; $(LN) $@ $$SONAME; \			@@\
+ 		LinkBuildSonameLibrary($$SONAME)			@@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 	$(RM) Concat(lib,libname.so)					@@\
+ 	$(LN) $@ Concat(lib,libname.so)					@@\
+ 	LinkBuildLibrary($@)						@@\
+ 	LinkBuildLibrary(Concat(lib,libname.so))			@@\
+ 									@@\
+ clean::									@@\
+ 	@SONAME=`echo Concat(lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`; \ @@\
+ 	set -x; $(RM) $$SONAME						@@\
+ 	$(RM) Concat(lib,libname.so)					@@\
+ 	$(RM) Concat(lib,libname.so.rev)
+ 
+ #endif /* SharedLibraryTarget */
+ 
+ #ifndef SharedDepModuleTarget
+ #define SharedDepModuleTarget(name,deps,solist)				@@\
+ AllTarget(name)								@@\
+ 									@@\
+ name: deps								@@\
+ 	$(RM) $@~							@@\
+ 	$(CC) -o $@~ $(SHLIBLDFLAGS) solist $(REQUIREDLIBS)		@@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) name
+ 
+ #endif /* SharedDepModuleTarget */
+ 
+ /*
+  * SharedLibraryDataTarget - generate rules to create shlib data file;
+  */
+ #ifndef SharedLibraryDataTarget
+ #define SharedLibraryDataTarget(libname,rev,salist)
+ #endif /* SharedLibraryTarget */
+ 
+ #if defined(FreeBSDArchitecture)
+ 
+ /*
+  * Support for building a.out compatibility libraries on a FreeBSD/ELF system.
+  */
+ #ifndef BuildAoutLibraries
+ #define BuildAoutLibraries NO
+ #endif
+ 
+ #if BuildAoutLibraries
+ 
+ #define ExtraLibRules
+ 
+ #ifndef AoutSharedLibraryDef
+ #define AoutSharedLibraryDef -DBSDSHLIB -DAOUT_COMPAT_LIB
+ #endif
+ #ifndef AoutSharedLibraryLoadFlags
+ #define AoutSharedLibraryLoadFlags -aout -Bshareable
+ #endif
+ #ifndef AoutPositionIndependentCFlags
+ #define AoutPositionIndependentCFlags -fpic
+ #endif
+ 
+ /*
+  * InstallAoutSharedLibrary - generate rules to install the shared library.
+  */
+ #ifndef InstallAoutSharedLibrary
+ #define InstallAoutSharedLibrary(libname,rev,dest)			@@\
+ install:: Concat(aout/lib,libname.so.rev)				@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) -c $(INSTLIBFLAGS) Concat(aout/lib,libname.so.rev) $(DESTDIR)dest 
+ @@\
+ 
+ #endif /* InstallAoutSharedLibrary */
+ 
+ /*
+  * AoutSharedLibraryTarget - generate rules to create a shared library;
+  * build it into a different name so that we do not hose people by having
+  * the library gone for long periods.
+  */
+ #ifndef AoutSharedLibraryTarget
+ #define AoutSharedLibraryTarget(libname,rev,solist,down,up)		@@\
+ AllTarget(Concat(down/lib,libname.so.rev))				@@\
+ 									@@\
+ Concat(down/lib,libname.so.rev):  solist $(EXTRALIBRARYDEPS)		@@\
+ 	$(RM) $@~							@@\
+ 	(cd down; $(LD) -o up/$@~ AoutSharedLibraryLoadFlags solist)	@@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) Concat(down/lib,libname.so.rev)
+ 
+ #endif /* AoutSharedLibraryTarget */
+ 
+ #define AoutCDebugFlags -aout DefaultCDebugFlags
+ #define AoutCplusplusDebugFlags -aout DefaultCplusplusDebugFlags
+ 
+ #define AoutLibObjCompile(options) LibObjCompile(aout,AoutCDebugFlags AoutSharedLibraryDef AoutPositionIndependentCFlags options)
+ #define AoutLibObjCplusplusCompile(options) LibObjCompile(aout,AoutCplusplusDebugFlags options)
+ 
+ #define ExtraLibMkdir() _LibMkdir(aout)
+ #define ExtraObjCompile(options) AoutLibObjCompile(options)
+ #define ExtraObjCplusplusCompile(options) AoutLibObjCplusplusCompile(options)
+ #define ExtraCleanDir() LibCleanDir(aout)
+ 
+ #define ExtraLibraryTarget(libname,so,objs) AoutSharedLibraryTarget(libname,so,objs,aout,..)
+ #define ExtraInstallLibrary(libname,so) InstallAoutSharedLibrary(libname,so,$(SHLIBDIR)/aout)
+ 
+ #endif
+ #endif
+ 
+ #endif /* UseElfFormat */
*** motif.orig/config/cf/bsdLib.tmpl	Fri Apr 28 11:04:00 2000
--- motif/config/cf/bsdLib.tmpl	Fri Jun 30 10:07:46 2000
***************
*** 1,9 ****
  XCOMM $XConsortium: bsdLib.tmpl /main/3 1996/09/28 16:09:25 rws $
  
  /*
!  * NetBSD/FreeBSD shared library template
   */
  
  #ifndef SharedXtReqs
  #define SharedXtReqs /**/
  #endif
--- 1,18 ----
  XCOMM $XConsortium: bsdLib.tmpl /main/3 1996/09/28 16:09:25 rws $
+ XCOMM $XFree86: xc/config/cf/bsdLib.tmpl,v 3.3.2.3 1999/12/02 14:27:24 hohndel Exp $
  
  /*
!  * NetBSD/FreeBSD/OpenBSD shared library template
   */
  
+ #if !UseElfFormat
+ 
+ #ifndef FixupLibReferences
+ #define FixupLibReferences()						@@\
+ XMULIBONLY = -lXmu							@@\
+ XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+ #endif
+ 
  #ifndef SharedXtReqs
  #define SharedXtReqs /**/
  #endif
***************
*** 11,15 ****
  #define SharedXawReqs /**/
  #endif
  #ifndef SharedXmuReqs
! #define SharedXmuReqs $(LDPRELIBS) $(XTOOLONLYLIB) $(XONLYLIB)
  #endif
--- 20,80 ----
  #define SharedXawReqs /**/
  #endif
  #ifndef SharedXmuReqs
! # if !defined(Mc68020Architecture) || !defined(OpenBSDArchitecture)
! #  define SharedXmuReqs $(LDPRELIBS) $(XTOOLONLYLIB) $(XONLYLIB)
! # else
!    /* At least the hp300 and the sun3 OpenBSD ports need that */
! #  define SharedXmuReqs $(LDPRELIBS) $(XTOOLLIB) $(EXTENSIONLIB) $(XONLYLIB)
! # endif
! #endif
! 
! #else /* UseElfFormat */
! 
! /*
!  * NetBSD/FreeBSD (ELF) shared library template
!  * Cloned from Linux ELF rules, but with a minor number.
!  */
! 
! #ifndef FixupLibReferences
! #define FixupLibReferences()						@@\
! XMULIBONLY = -lXmu							@@\
! XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
  #endif
+ 
+ #ifndef XawClientLibs
+ #define XawClientLibs $(XAWLIB) $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+ #endif
+ 
+ #define CplusplusLibC
+ #define FrescoSysLibs	CplusplusLibC MathLibrary
+ 
+ #if ThreadedX
+ # ifdef BuildThreadStubLibrary
+ #  define SharedThreadReqs	-L$(BUILDLIBDIR) -lXThrStub 
+ # else
+ #  define SharedThreadReqs	-pthread
+ # endif
+ #else
+ # define SharedThreadReqs /**/
+ #endif
+ 
+ #define SharedX11Reqs	SharedThreadReqs
+ #define SharedOldXReqs	$(LDPRELIB) $(XLIBONLY)
+ #define SharedXtReqs	$(LDPRELIB) $(XLIBONLY) $(SMLIB) $(ICELIB) SharedThreadReqs
+ #define SharedXawReqs	$(LDPRELIB) $(XMULIB) $(XTOOLLIB) $(XLIB)
+ #define SharedXmuReqs	$(LDPRELIB) $(XTOOLLIB) $(XLIB)
+ #define SharedXextReqs	$(LDPRELIB) $(XLIBONLY)
+ #define SharedXiReqs	$(LDPRELIB) $(XLIB)
+ #define SharedPexReqs	$(LDPRELIB) $(XLIBONLY) MathLibrary
+ #define SharedXtstReqs	$(LDPRELIB) $(XLIB)
+ #define SharedXieReqs	$(LDPRELIB) $(XLIBONLY)
+ #define SharedSMReqs	$(LDPRELIB) $(ICELIB)
+ #define SharedFrescoReqs	$(LDPRELIB) $(XLIBONLY) FrescoSysLibs
+ #define SharedXtfReqs	$(LDPRELIB) $(FRESCOLIB) $(XTOOLLIB) $(XLIB) FrescoSysLibs
+ 
+ #define SharedXReqs	$(XTOOLLIB) $(XPLIB) $(XLIB)
+ #define SharedXmReqs	$(LDPRELIBS) SharedXReqs
+ #define SharedMrmReqs	$(LDPRELIBS) $(XMLIB) SharedXReqs
+ #define SharedUilReqs	$(LDPRELIBS) $(MRESOURCELIB) $(XMLIB) SharedXReqs
+ 
+ #endif /* UseElfFormat */
*** motif.orig/config/cf/cde.rules	Tue May  2 11:53:43 2000
--- motif/config/cf/cde.rules	Sat Jun  3 18:49:35 2000
***************
*** 1,36 ****
  /* 
!  *  @OPENGROUP_COPYRIGHT@
   *  COPYRIGHT NOTICE
!  *  Copyright (c) 1990, 1991, 1992, 1993, 1998 The Open Group , Inc.
   *  ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
   *  the full copyright text.
-  *  
-  *  This software is subject to an open license. It may only be
-  *  used on, with or for operating systems which are themselves open
-  *  source systems. You must contact The Open Group for a license
-  *  allowing distribution and sublicensing of this software on, with,
-  *  or for operating systems which are not Open Source programs.
-  *  
-  *  See http://www.opengroup.org/openmotif/license for full
-  *  details of the license agreement. Any use, reproduction, or
-  *  distribution of the program constitutes recipient's acceptance of
-  *  this agreement.
-  *  
-  *  EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
-  *  PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
-  *  KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
-  *  WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
-  *  OR FITNESS FOR A PARTICULAR PURPOSE
-  *  
-  *  EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
-  *  NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
-  *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
-  *  DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
-  *  AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
-  *  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
-  *  ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
-  *  EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
-  *  POSSIBILITY OF SUCH DAMAGES.
   *
   * (c) Copyright 1996 Digital Equipment Corporation.
   * (c) Copyright 1996 Hewlett-Packard Company.
--- 1,9 ----
  /* 
!  *  @OSF_COPYRIGHT@
   *  COPYRIGHT NOTICE
!  *  Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
   *  ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
   *  the full copyright text.
   *
   * (c) Copyright 1996 Digital Equipment Corporation.
   * (c) Copyright 1996 Hewlett-Packard Company.
***************
*** 40,46 ****
   * (c) Copyright 1996 FUJITSU LIMITED.
   * (c) Copyright 1996 Hitachi.
   */ 
! XCOMM $TOG: cde.rules /main/4 1998/02/06 10:53:52 kaleb $
  
  /* Note whether we are the top level project. */
  #ifndef SeenTopLevelProject
--- 13,19 ----
   * (c) Copyright 1996 FUJITSU LIMITED.
   * (c) Copyright 1996 Hitachi.
   */ 
! XCOMM $XConsortium: cde.rules /main/2 1996/12/04 10:13:04 swick $
  
  /* Note whether we are the top level project. */
  #ifndef SeenTopLevelProject
***************
*** 113,119 ****
  #endif
  #define TopIncludes	TopInclude $(TOP_CDE_INCLUDES) $(TOP_MOTIF_INCLUDES) $(TOP_X_INCLUDES)
  
! #if UseInstalledCDE && defined(CDEProjectRoot)
  # define CDEBuildLibPath	$(CDEPROJECTROOT)/lib
  #elif UseInstalledCDE
  # define CDEBuildLibPath	$(USRLIBDIR)
--- 86,92 ----
  #endif
  #define TopIncludes	TopInclude $(TOP_CDE_INCLUDES) $(TOP_MOTIF_INCLUDES) $(TOP_X_INCLUDES)
  
! #if UseInstalledCDE && defined(CdeProjectRoot)
  # define CDEBuildLibPath	$(CDEPROJECTROOT)/lib
  #elif UseInstalledCDE
  # define CDEBuildLibPath	$(USRLIBDIR)
*** motif.orig/config/cf/DGUX.cf	Fri Apr 28 11:03:58 2000
--- motif/config/cf/DGUX.cf	Sat Jun  3 18:49:34 2000
***************
*** 1,22 ****
! XCOMM platform:  $XConsortium: DGUX.cf /main/5 1996/09/28 16:04:56 rws $
  
  #ifndef OSName
! #define OSName            DG/UX 4.32
  #endif
- XCOMM operating system:  OSName
  #ifndef OSMajorVersion
! #define OSMajorVersion    4
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion    32
  #endif
  
! #define BootstrapCFlags   -DDGUX
! #define StandardDefines   -DDGUX -DSYSV
! #define SystemV           YES
! #define HasPutenv         YES
! #define HasGcc            YES
! #define BuildServer       NO
! #define UNCOMPRESSPATH /usr/bin/X11/uncompress
  
! #define ExtraFilesToClean *.lg
--- 1,254 ----
! XCOMM platform:  $XFree86: xc/config/cf/DGUX.cf,v 1.1.1.3.2.13 1999/08/17 07:39:16 hohndel Exp $
! /* Copyright Takis Psarogiannakopoulos <takis@dpmms.cam.ac.uk>
!  * This is the DG/ux configuration file of X11R6.3 
!  * XFree86 Version 3.3.5 ix86 DG/ux Release 4.20 MU04
!  * July 17 1999 (Connections type changes)
!  */
! #ifndef OSName
! #define OSName			DefaultOSName
! #endif
! #ifndef OSMajorVersion
! #define OSMajorVersion		DefaultOSMajorVersion
! #endif
! #ifndef OSMinorVersion
! #define OSMinorVersion		DefaultOSMinorVersion
! #endif
! #ifndef OSTeenyVersion
! #define OSTeenyVersion		DefaultOSTeenyVersion
! #endif
  
+ /* Fallbacks */
  #ifndef OSName
! #define	OSName	DG/ux R4.20MU04
  #endif
  #ifndef OSMajorVersion
! #define	OSMajorVersion	4
  #endif
  #ifndef OSMinorVersion
! #define	OSMinorVersion	20
! #endif
! #ifndef OSTeenyVersion
! #define	OSTeenyVersion	4
! #endif
! 
! #ifndef OSVendor
! #define OSVendor Data General Corporation
! #endif
! 
! XCOMM operating system:	OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
! 
! #define i386Architecture
! #define BootstrapCFlags		-DDGUX
! 
! /* Some stuff that all SVR4s ,so and DG/ux, should have */
! 
! #define SystemV4		YES
! #ifndef HasLdRunPath
! #define HasLdRunPath		YES
! #endif
! #define HasPoll			YES
! #ifndef SVR4Architecture
! #define SVR4Architecture
! #endif
! #ifndef PatheticCpp
! #define PatheticCpp		YES
! #endif
! #define Malloc0ReturnsNull	YES		/* in case -lmalloc used */
! 
! /*
!  * Here are the default paths to use tools for building.
!  * Use links to make these tools visible as below,
!  * or modify below the locations as you like.
!  * Remeber that cpp below is pointing to elink so
!  * if you using gcc-2.8.1 make sure that it is 
!  * installed also as elink gcc.
!  */
! 
! #define ArCmdBase       /usr/bin/ar
! #define AsCmd           /usr/bin/as
! #define CppCmd          /usr/lib/cpp
! #define LdCmd           /usr/bin/ld
! #define LexCmd          /usr/bin/lex
! #define CcCmd           /usr/local/bin/gcc      /* ?  -fpcc-struct-return */
! #define UNCOMPRESSPATH  /usr/bin/uncompress
! #define MakeCmd         /usr/local/bin/make
! #define YaccCmd         /usr/bin/yacc
! #define InstallCmd      /usr/bin/install   /* I use gnu install-sh */
! #define LnCmd           ln -s
! #define RanlibCmd true                         /* Or make a link ranlib->true */ 
! #define CplusplusCmd    /usr/local/bin/g++
! 
! 
! #ifndef MkdirHierCmd
! #define MkdirHierCmd mkdir -p
! #endif
! /* Stuff for SVR4 4.0 */
! #ifndef XawI18nDefines
! #define XawI18nDefines          -DUSE_XWCHAR_STRING
! #endif
! 
! /*
!  * Define here your project root by
!  * changing this. 
!  * Default is /usr/X11R6
!  * My choice is:
!  */
! 
! #if 0 
! #define ProjectRoot /usr/X11R6.3   /* Look also in site.def for the default */
! #endif 
! 
! 
! /* Added for 3.3.5 */
! #define HasMktemp YES
! 
! #define HasPutenv YES
! #define HasVFork YES
! #define HasVoidSignalReturn  YES
! #define HasBsearch YES
! #define HasSockets YES
! #define BuildServer YES
! #define HasSharedLibraries YES   /* to build shared libs */
! #define HasGcc YES
! #define HasGcc2 YES
! #define HasGcc2ForCplusplus YES
! #define HasCplusplus YES
! #define HasGnuMake YES          /* Added for 3.2Xc */
! #define UseGnuMalloc YES
! #define GnuMallocLibrary -L/usr/local/lib -lmalloc
! #define Malloc0ReturnsNull YES  /* Added for 3.2Xh,i... GNU does return 0 */
! #define Malloc0ReturnsNullDefines -DMALLOC_0_RETURNS_NULL   /* define for GNU malloc X3.2i */
! /*******TCL TK DEFINITIONS ***********/
! #define HasTk  YES                 /* Comment out if you dont have this */
! #define TkLibDir    /usr/X11R6.3/lib
! #define TkIncDir    /usr/X11R6.3/include
! #define TkLibName   tk8.0
! #define HasTcl YES
! #define TclLibName  tcl8.0
! #define TclLibDir   /usr/X11R6.3/lib
! #define TclIncDir   /usr/X11R6.3/include
! 
! #define SystemManDirectory /usr/local/man/X
! 
! #define ExtraLibraries -lelf -lgen -lresolv -lsocket -lnsl -lw
! 
! #define StandardDefines -DDGUX -DSVR4 -Di386 -D__ix86 -D_DGUX_SOURCE -D_LITTLE_ENDIAN -DPENTIUM_CHANGE
! 
! #ifndef HasGcc2
! #define HasGcc2 YES     /* We suppose that your DG/ux has gcc-dg.2.8.1.3 */
! #endif                  /* Do NOT use native DG/ux gcc, it is faulty in general */
! #ifndef HasGcc
! #define HasGcc HasGcc2
  #endif
  
! #define PositionIndependentCFlags -fPIC
! #define PositionIndependentCplusplusFlags -fPIC
! 
! /*
!  * To forceably build static libraries in addition to shared libraries,
!  * we put this.
!  */
! #define ForceNormalLib          YES
! 
! #ifndef ToolkitStringsABIOptions
! #define ToolkitStringsABIOptions -intelabi -earlyR6bc
! #endif
! 
! #define DefaultCCOptions     /* -ansi -pedantic */
! #define OptimizedCDebugFlags -O2  /* Add -g -mstandard for full debuging info */
! #define OptimizedCplusplusDebugFlags
! #define DebuggableCDebugFlags -g -mstandard
! #define DebuggableCplusplusDebugFlags
! #define SharedLibraryLoadFlags -G -z text
! 
! /*
!  * The default optimisation flags for GCC 2.x.  -fno-strength-reduce is
!  * here to work around a bug in -O2 for GCC 2.x on i386 platforms.
!  * If you are using a version that doesn't have this bug, you can
!  * uncomment the following line, and remove '-fno-strength-reduce'
!  *
! #define DefaultGcc2i386Opt      -O2 -fno-strength-reduce
!  */
! 
! /* Compress all the Fonts */
! #define CompressAllFonts        YES
! 
! 
! 
! /* Manual pages installed under their full names */ 
! 
! #define ExpandManNames          YES
! #define CompressManPages        YES
! 
! 
! 
! 
! /* Install with stripping before ? */
! #define StripInstalledPrograms  YES
! 
! /* Server to Install */
! #define XserverNeedsSetUID YES
! #define InstallXserverSetUID YES
! 
! 
! #ifndef ServerOSDefines
! #define ServerOSDefines -DDDXTIME XFree86ServerOSDefines
! #endif
! #ifndef BuildDynamicLoading
! #define BuildDynamicLoading NO
! #endif
! #if BuildDynamicLoading
! #define ServerExtraSysLibs -ldl
! #endif
! 
! 
! /*
!  * Streams connections were "broken" for DG/ux.
!  * We activate sockets to be sure. The code for 
!  * STREAMS works in most SVR4s but not in 
!  * DG/ux... 
!  * But I "fix" that in XFree86-3.3.5.
!  * So -DSTREAMSCONN works now OK also. 
!  * Switch the flag -DTCPCONN below to
!  * -DSTREAMSCONN to allow STREAMS ioctls.
!  * Takis, 21/Jul/1999 
!  *
!  * NOTE:
!  *     -DSTREAMSCONN = STREAMS ioctls
!  *     -DTCPCONN = sockets
!  * Do not define both,only one of the above.
!  * PS:
!  * I learned that BSD sockets perform better
!  * in DG/ux than the streams.
!  * Contact DG for a new "/usr/lib/tcpip.so"
!  * if you insist to build with SVR4 streams.
!  *
!  */
! 
! #ifndef ConnectionFlags
! #define ConnectionFlags	-DTCPCONN -DUNIXCONN -DLOCALCONN
! #endif
! 
! #ifndef ManSuffix
! #define ManSuffix               1x
! #define ManDir			$(MANSOURCEPATH)1
! #endif
! #ifndef LibManSuffix
! #define LibManSuffix            3x
! #define LibmanDir		$(MANSOURCEPATH)3
! #endif
! #ifndef FileManSuffix
! #define FileManSuffix           4
! #endif
! 
! #ifndef StaticLibrary
! #if !HasGcc
! #define StaticLibrary(libpath,libname) -B static Concat(-L,libpath) Concat(-l,libname) -B dynamic
! #endif
! #endif
! 
! #ifdef i386Architecture
! #include <xfree86.cf>
! #endif
  
! #include <sv4Lib.rules>
*** motif.orig/config/cf/FreeBSD.cf	Fri Apr 28 11:03:58 2000
--- motif/config/cf/FreeBSD.cf	Sun Jun  4 19:48:50 2000
***************
*** 1,10 ****
! XCOMM platform:  $TOG: FreeBSD.cf /main/21 1997/10/05 20:42:34 kaleb $
  
  #ifndef OSName
! #define OSName			DefaultOSName
  #endif
  #ifndef OSVendor
! #define OSVendor		Walnut Creek CD-ROM
  #endif
  #ifndef OSMajorVersion
  #define OSMajorVersion		DefaultOSMajorVersion
--- 1,21 ----
! XCOMM platform:  $TOG: FreeBSD.cf /main/18 1997/06/12 07:40:35 kaleb $
! XCOMM platform:  $XFree86: xc/config/cf/FreeBSD.cf,v 3.58.2.21 1999/12/02 14:27:24 hohndel Exp $
! 
! #ifndef UseElfFormat
! #define UseElfFormat		DefaultToElfFormat
! #endif
! 
! #if UseElfFormat
! #define OSBinaryFormat		[ELF]
! #else
! #define OSBinaryFormat		/**/
! #endif
  
  #ifndef OSName
! #define OSName			DefaultOSName OSBinaryFormat
  #endif
  #ifndef OSVendor
! #define OSVendor		/**/
  #endif
  #ifndef OSMajorVersion
  #define OSMajorVersion		DefaultOSMajorVersion
***************
*** 17,72 ****
  #endif
  XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
  
! #define HasPutenv		YES
! #define HasBSD44Sockets		YES
! #define HasZlib			YES
! 
! #define CppCmd			/usr/libexec/cpp -traditional
! #define PreProcessCmd		/usr/libexec/cpp -traditional
! #undef  InstallCmd
! #define InstallCmd		/usr/bin/install
! 
  #define UseGas			YES
! #ifndef GccUsesGas
! # define GccUsesGas		YES
  #endif
! 
! #ifndef AsmDefines
! #  define AsmDefines		-DUSE_GAS
! #endif
! 
! #if GccUsesGas
! # define GccGasOption		-DGCCUSESGAS
! #else
! # define GccGasOption		/**/
  #endif
  
! #ifndef HasGcc2
! # define HasGcc2		YES
! #endif
  
  #define MkdirHierCmd		mkdir -p
  
! #define CcCmd gcc
! #ifndef DefaultCCOptions
! #define DefaultCCOptions	-pipe
  #endif
- 
- #if OSMajorVersion > 1
- #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME
- #define XawI18nDefines		-DUSE_XWCHAR_STRING
- #define HasMakefileSafeInclude	YES
- #define IncludeMakefile(file)	@@# dependencies are in .depend
- #define DependFileName		.depend
- #if OSMinorVersion < 2
  #ifndef ExtraLibraries
! #define ExtraLibraries		-lgnumalloc
  #endif
  #else
! #if OSTeenyVersion == 2
  #define HasSetUserContext	YES
  #endif
! #ifndef ExtraLoadFlags
  /* 
   * This doesn't work the way it does on every other system. On FreeBSD it's
   * only a "hint, not a demand", whatever that means. Note that this is not 
--- 28,96 ----
  #endif
  XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
  
! #define HasGcc			YES
! #define HasGcc2			YES
! #define HasCplusplus		YES
! #define HasGcc2ForCplusplus	YES
! #define GccUsesGas		YES
  #define UseGas			YES
! #define GnuCpp			YES
! #define HasNdbm			YES
! #define HasPutenv		YES
! #define HasSnprintf		YES
! #define HasBSD44Sockets 	YES
! #ifndef HasLibCrypt
! # define HasLibCrypt		YES
  #endif
! #ifndef HasShm
! # define HasShm			YES
  #endif
+ #define HasWChar32		YES
  
! #define AvoidNullMakeCommand	YES
! #define StripInstalledPrograms	YES
! #define CompressAllFonts	YES
! #define Malloc0ReturnsNull	YES
! #define NeedConstPrototypes	YES
! #define NeedFunctionPrototypes	YES
! #define NeedNestedPrototypes	YES
! #define NeedVarargsPrototypes	YES
! #define NeedWidePrototypes	NO
  
  #define MkdirHierCmd		mkdir -p
  
! #define CcCmd			cc
! #define CppCmd			/usr/libexec/cpp
! #define PreProcessCmd		CppCmd
! #define StandardCppDefines	-traditional
! #if defined(UseInstalled) && (!defined(XF86LinkKit) || !XF86LinkKit)
! #define DefaultCCOptions	/**/
! #else
! #define DefaultCCOptions	-Dasm=__asm
  #endif
  #ifndef ExtraLibraries
! /* support for multi-byte locales is in libxpg4 rather than libc */
! #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion >= 2)
! #define ExtraLibraries		-lxpg4
! #else
! #define ExtraLibraries		/**/
  #endif
+ #endif
+ #ifndef UseGnuMalloc
+ /* 2.2 doesn't really have GnuMalloc */
+ #if OSMajorVersion < 2 || (OSMajorVersion == 2 && OSMinorVersion < 2)
+ #define UseGnuMalloc		YES
  #else
! #define UseGnuMalloc		NO
! #endif
! #endif
! 
! /* 2.2.2 and later has setusercontext() */
! #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion > 2) || \
!      (OSMajorVersion == 2 && OSMinorVersion == 2 && OSTeenyVersion >= 2)
  #define HasSetUserContext	YES
  #endif
! 
  /* 
   * This doesn't work the way it does on every other system. On FreeBSD it's
   * only a "hint, not a demand", whatever that means. Note that this is not 
***************
*** 100,114 ****
   * and they can remove it from the list of directories they add to ld.so.cache 
   * in their /etc/rc file.
   */
  #define ExtraLoadFlags		-Wl,-R,$(USRLIBDIRPATH)
  #endif
  #endif
  #else
  #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME -DXNO_SYSCONF
  #define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
- #ifndef ExtraLibraries
- #define ExtraLibraries		/* -lmalloc */
- #endif
  #endif
  
  /* The GCC strength-reduce bug is fixed for FreeBSD 2.1.5 and later */
--- 124,333 ----
   * and they can remove it from the list of directories they add to ld.so.cache 
   * in their /etc/rc file.
   */
+ #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion >= 2)
+ #ifndef ExtraLoadFlags
+ #if UseElfFormat
+ #define ExtraLoadFlags		-Wl,-rpath,$(USRLIBDIRPATH)
+ #else
  #define ExtraLoadFlags		-Wl,-R,$(USRLIBDIRPATH)
  #endif
  #endif
+ #endif
+ 
+ #ifndef SharedLibraryLoadFlags
+ #if UseElfFormat
+ #define SharedLibraryLoadFlags	-shared -rpath $(USRLIBDIRPATH)
+ #else
+ #define SharedLibraryLoadFlags	-Bshareable -R $(USRLIBDIRPATH)
+ #endif
+ #endif
+ 
+ #ifndef GnuMallocLibrary
+ #define GnuMallocLibrary	-lgnumalloc
+ #endif
+ 
+ #if (OSMajorVersion > 2) || (OSMajorVersion == 2 && OSMinorVersion >= 2) \
+ 	|| (OSMajorVersion == 2 && OSMinorVersion == 1 && OSTeenyVersion >= 6)
+ /* 2.1.6 and 2.2 have libz */
+ #ifndef HasZlib
+ #define HasZlib		YES
+ #endif
+ #endif
+ 
+ /*
+  * For FreeBSD 2.2.5 and later don't make any assumptions about the version
+  * of Tcl in the base OS.
+  *
+  * Note the static libs in some versions of the FreeBSD packages are
+  * broken.  The symptom of this is unresolved symbols when linking
+  * XF86Setup.  If you run into this problem, either build your own
+  * static libs from the standard Tcl and Tk source, or change the
+  * definitions of XF86SetupUsesStatic{Tcl,Tk}.  The latter is not
+  * recommended for binaries that are going to be redistributed.
+  */
+ 
+ #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion > 2) || \
+     (OSMajorVersion == 2 && OSMinorVersion == 2 && OSTeenyVersion > 5)
+ /*
+  * For 2.2.6, 3.0 and later the defaults assume that the tcl-8.0 and tk-8.0
+  * packages have been installed.  XF86Setup is much faster with 8.x than
+  * with earlier versions.
+  *
+  */
+ 
+ #ifndef TkLibName
+ #define TkLibName		tk80
+ #endif
+ #ifndef TkIncDir
+ #define TkIncDir		/usr/local/include/tk8.0
+ #endif
+ #ifndef TclLibName
+ #define TclLibName		tcl80
+ #endif
+ #ifndef TclIncDir
+ #define TclIncDir		/usr/local/include/tcl8.0
+ #endif
+ 
+ #ifndef JpTkLibName
+ #define JpTkLibName		tk80jp
+ #endif
+ #ifndef JpTkIncDir
+ #define JpTkIncDir		/usr/local/include/tk8.0jp
+ #endif
+ #ifndef JpTclLibName
+ #define JpTclLibName		tcl80jp
+ #endif
+ #ifndef JpTclIncDir
+ #define JpTclIncDir		/usr/local/include/tcl8.0jp
+ #endif
+ 
+ #elif OSMajorVersion == 2 && OSMinorVersion == 2 && OSTeenyVersion > 2
+ /*
+  * For 2.2.5, the defaults assume that the tcl-7.6 and tk-4.2
+  * packages have been installed.
+  */
+ 
+ #ifndef TkLibName
+ #define TkLibName		tk42
+ #endif
+ #ifndef TkIncDir
+ #define TkIncDir		/usr/local/include/tk4.2
+ #endif
+ #ifndef TclLibName
+ #define TclLibName		tcl76
+ #endif
+ #ifndef TclIncDir
+ #define TclIncDir		/usr/local/include/tcl7.6
+ #endif
+ 
+ #ifndef JpTkLibName
+ #define JpTkLibName		tk42jp
+ #endif
+ #ifndef JpTkIncDir
+ #define JpTkIncDir		/usr/local/include/tk4.2jp
+ #endif
+ #ifndef JpTclLibName
+ #define JpTclLibName		tcl76jp
+ #endif
+ #ifndef JpTclIncDir
+ #define JpTclIncDir		/usr/local/include/tcl7.6jp
+ #endif
+ 
+ #elif OSMajorVersion == 2 && OSMinorVersion == 2
+ /*
+  * FreeBSD 2.2 prior to 2.2.5
+  *
+  * tcl is part of the base OS.
+  *
+  * Note: the tk-4.1 package for FreeBSD doesn't have the static lib, so
+  * you'll have to build it yourself, or change the definition of
+  * XF86SetupUsesStaticTk.
+  */
+ #ifndef TkLibName
+ #define TkLibName		tk41
+ #endif
+ #ifndef TclLibName
+ #define TclLibName		tcl
+ #endif
+ #ifndef TclLibDir
+ #define TclLibDir		/usr/lib
+ #endif
+ #ifndef TclIncDir
+ #define TclIncDir		/usr/include
+ #endif
+ /* FreeBSD 2.2 has libtcl in the base system */
+ #ifndef XF86SetupUsesStaticTcl
+ #define XF86SetupUsesStaticTcl	NO
+ #endif
+ 
+ #else /* ! 2.2 or later */
+ 
+ #if OSMajorVersion == 2 && OSMinorVersion == 1 && OSTeenyVersion >= 6
+ 
+ /*
+  * 2.1.x with x >=6 has tk 4.1 and tcl 7.5 in the packages collection.
+  * Neither packages include the static libs, so you either need to build
+  * them yourself or set XF86SetupUsesStaticTcl and XF86SetupUsesStaticTk
+  * to NO.  This isn't the default because we don't want the XFree86
+  * binaries to have these packages as a dependency.
+  */
+ 
+ #ifndef TkLibName
+ #define TkLibName		tk41
+ #endif
+ #ifndef TclLibName
+ #define TclLibName		tcl75
+ #endif
+ 
+ #else /* ! 2.1.6 or later */
+ 
+ #ifndef TkLibName
+ #define TkLibName		tk40
+ #endif
+ #ifndef TclLibName
+ #define TclLibName		tcl74
+ #endif
+ 
+ #endif
+ #endif
+ 
+ #undef  InstallCmd
+ #define InstallCmd		/usr/bin/install
+ 
+ #if UseElfFormat
+ # define AsmElfDefines		-D__ELF__
+ #else
+ # define AsmElfDefines /**/
+ #endif
+ 
+ #if GccUsesGas
+ # define GccGasOption		-DGCCUSESGAS
+ # define AsmDefines		-DUSE_GAS AsmElfDefines
+ #else
+ # define GccGasOption /**/
+ # define AsmDefines		AsmElfDefines
+ #endif
+ 
+ #define ServerExtraDefines GccGasOption XFree86ServerDefines
+ 
+ #define StandardDefines	-DCSRG_BASED
+ 
+ #if OSMajorVersion > 1
+ #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME
+ #define XawI18nDefines		-DUSE_XWCHAR_STRING
+ #define HasMakefileSafeInclude	YES
+ #define IncludeMakefile(file) @@# dependencies are in .depend
+ #define DependFileName		.depend
+ #ifndef BuildDynamicLoading
+ #define BuildDynamicLoading	YES
+ #endif
+ #ifndef ForceNormalLib
+ #define ForceNormalLib		YES
+ #endif
+ #define HasMkstemp		YES
  #else
  #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME -DXNO_SYSCONF
  #define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
  #endif
  
  /* The GCC strength-reduce bug is fixed for FreeBSD 2.1.5 and later */
***************
*** 124,145 ****
  # define OptimizedCDebugFlags -O2
  #endif
  
! #define ServerExtraDefines	GccGasOption XFree86ServerDefines
  
! #define StandardDefines		-DCSRG_BASED
  
! #define TroffCmd		groff -Tps
! #define SetTtyGroup		YES
! #define HasNdbm			YES
! #define HasShm			YES
! #define HasWChar32		YES
  
! #define HasLibCrypt		YES
  
! #define AvoidNullMakeCommand	YES
  
! #define HasPlugin		YES
! #define VendorHasX11R6_3libXext	YES	/* XC or XFree86 3.3.1 */
  
  #include <bsdLib.rules>
  
--- 343,459 ----
  # define OptimizedCDebugFlags -O2
  #endif
  
! #ifndef PreIncDir
! # define PreIncDir	/usr/include
! #endif
  
! #define TroffCmd	groff -Tps
! #define NroffCmd	groff -Tascii
! #define SetTtyGroup	YES
  
! #ifndef ExtraFilesToClean
! # define ExtraFilesToClean *.core
! #endif
  
! #define DefaultUserPath		/bin:/usr/bin:/sbin:/usr/sbin:$(BINDIR):/usr/gnu/bin:/usr/local/bin
! #define DefaultSystemPath	/bin:/usr/bin:/sbin:/usr/sbin:$(BINDIR)
! #ifndef SystemManDirectory
! #define SystemManDirectory	/usr/share/man
! #endif
  
! #define InstKmemFlags	-g kmem -m 2755
  
! /*
!  * Compress manual pages
!  */
! #ifndef CompressManPages
! # define CompressManPages	YES
! #endif
! 
! #if CompressManPages
! 
! #ifndef CompressManCmd
! # define CompressManCmd		gzip -n
! #endif
!    COMPRESSMANCMD = CompressManCmd
! 
! #ifndef InstallManPageLong
! #define InstallManPageLong(file,destdir,dest)				@@\
! install.man:: file.man							@@\
! 	MakeDir($(DESTDIR)destdir)					@@\
! 	$(RM) $(DESTDIR)destdir/dest.$(MANSUFFIX)*			@@\
! 	$(INSTALL) -c $(INSTMANFLAGS) file.man \			@@\
! 	  $(DESTDIR)destdir/dest.$(MANSUFFIX)				@@\
! 	-$(COMPRESSMANCMD) $(DESTDIR)destdir/dest.$(MANSUFFIX)
! #endif
! 
! #ifndef InstallGenManPageLong
! #define InstallGenManPageLong(file,destdir,dest,suffix)			@@\
! install.man:: file.man							@@\
! 	MakeDir($(DESTDIR)destdir)					@@\
! 	$(RM) $(DESTDIR)destdir/dest.suffix*				@@\
! 	$(INSTALL) -c $(INSTMANFLAGS) file.man \			@@\
! 	  $(DESTDIR)destdir/dest.suffix					@@\
! 	-$(COMPRESSMANCMD) $(DESTDIR)destdir/dest.suffix
! #endif
! 
! #ifndef InstallMultipleMan
! #define InstallMultipleMan(list,dest)					@@\
! install.man:: list							@@\
! 	MakeDir($(DESTDIR)dest)						@@\
! 	@case '${MFLAGS}' in *[i]*) set +e;; esac; \			@@\
! 	for i in list; do \						@@\
! 		(set -x; \						@@\
! 		MNAME=`echo $$i | cut -f1 -d.`; \			@@\
! 		$(RM) $(DESTDIR)dest/$${MNAME}*; \			@@\
! 		$(INSTALL) -c $(INSTMANFLAGS) $$i \			@@\
! 		  $(DESTDIR)dest/$${MNAME}.$(MANSUFFIX); \		@@\
! 		$(COMPRESSMANCMD) $(DESTDIR)dest/$${MNAME}.$(MANSUFFIX)); \ @@\
! 	done
! #endif
! 
! /*
!  * InstallManPageAliases - install soft links for aliases.
!  */
! #ifndef InstallManPageAliases
! #define InstallManPageAliases(file,destdir,aliases)			@@\
! install.man::								@@\
! 	@(SUFFIX=`echo $(DESTDIR)destdir/file.* | sed -e 's,.*/[^\.]*.,,'`; \ @@\
! 	for i in aliases; do (set -x; \					@@\
! 	$(RM) $(DESTDIR)destdir/$$i.*; \				@@\
! 	(cd $(DESTDIR)destdir; $(LN) file.$${SUFFIX} \			@@\
! 	$$i.$${SUFFIX})); \						@@\
! 	done)
! #endif
! 
! /*
!  * InstallGenManPageAliases - install soft links for aliases.
!  */
! #ifndef InstallGenManPageAliases
! #define InstallGenManPageAliases(file,destdir,suffix,aliases)		@@\
! 	InstallManPageAliases(file,destdir,aliases)
! #endif
! #endif
! 
! #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion >= 1)
! #define HasBsdMake	YES
! #endif
! 
! #ifndef StaticLibrary
! #define StaticLibrary(libpath,libname) -Wl,-Bstatic Concat(-L,libpath) Concat(-l,libname) -Wl,-Bdynamic
! #endif
! 
! #if UseElfFormat
! #define DlLibrary		-rdynamic
! #else
! #define DlLibrary		/**/
! #endif
! 
! #if BuildDynamicLoading
! #define ServerExtraSysLibs	DlLibrary
! #else
! #define ServerExtraSysLibs	/**/
! #endif
  
  #include <bsdLib.rules>
  
*** motif.orig/config/cf/gnu.cf	Fri Jul  7 15:22:07 2000
--- motif/config/cf/gnu.cf	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,113 ----
+ XCOMM platform:  $XFree86: xc/config/cf/gnu.cf,v 1.2.2.2 1998/12/22 12:27:31 hohndel Exp $
+ 
+ #ifndef OSName
+ #define OSName			GNU 0.2
+ #endif
+ #ifndef OSVendor
+ #define OSVendor		/**/
+ #endif
+ #ifndef OSMajorVersion
+ #define OSMajorVersion		DefaultOSMajorVersion
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion		DefaultOSMinorVersion
+ #endif
+ #ifndef OSTeenyVersion
+ #define OSTeenyVersion		DefaultOSTeenyVersion
+ #endif
+ XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
+ 
+ #define HasGcc 			YES
+ #define HasGcc2			YES
+ #define GccUsesGas		YES
+ #define UseGas			YES
+ #define GnuCpp			YES
+ #define UseGccMakeDepend	YES
+ #define HasGnuMake		YES
+ #ifndef HasGcc2ForCplusplus
+ #define HasGcc2ForCplusplus	YES
+ #endif
+ 
+ #define XserverNeedsSetUID	YES
+ 
+ #define ProjectRoot 		/usr/X11R6
+ #define YaccCmd                 bison -y
+ #define LexCmd			flex
+ #ifndef LexLib
+ #define LexLib			-lfl
+ #endif
+ #define ArCmd			/bin/ar clq
+ #define AsCmd			/bin/as
+ #define CcCmd			/bin/gcc
+ #define CppCmd			/lib/gcc-lib/i586--gnu/egcs-2.91.60/cpp
+ #define PreProcessCmd		CcCmd -EP -x c
+ #define RanlibCmd		/bin/ranlib
+ #define LdCmd			/bin/ld
+ #define DefaultCCOptions	-pedantic
+ #define GccGasOption 		-DGCCUSESGAS
+ #define DefaultGcc2i386Opt 	-O2
+ #if HasGcc2 && defined(i386Architecture)
+ #define OptimizedCDebugFlags	DefaultGcc2i386Opt
+ #else
+ #define OptimizedCDebugFlags	
+ #endif
+ 
+ 
+ #define AsmDefines		-DUSE_GAS
+ #define BootstrapCFlags		
+ #define ExtensionOSDefines	
+ 
+ #ifdef i386Architecture
+ #define ServerExtraDefines	GccGasOption XFree86ServerDefines -DNO_ALLOCA
+ #else
+ #define ServerExtraDefines	GccGasOption
+ #endif
+ #define StandardCppDefines	-traditional StandardDefines 
+ #define StandardDefines		-D_XOPEN_SOURCE -D_POSIX_SOURCE -D_BSD_SOURCE  -D__ELF__
+ #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME
+ #define ConnectionFlags		-DTCPCONN
+ #define HasBSD44Sockets		YES
+ #define HasSockets		YES
+ 
+ #define UseElfFormat		YES
+ #define	HasSharedLibraries	YES
+ #include <gnuLib.rules>
+ 
+ #define BuildXCSecurity		YES
+ #define AvoidNullMakeCommand	YES
+ #define CompressAllFonts	YES
+ #define DirFailPrefix -
+ #define HasNdbm         	YES
+ #define HasPutenv       	YES
+ #define Malloc0ReturnsNull	NO
+ #define NeedConstPrototypes	YES
+ #define NeedFunctionPrototypes	YES
+ #define NeedNestedPrototypes	YES
+ #define NeedVarargsPrototypes	YES
+ #define NeedWidePrototypes	NO
+ #define StripInstalledPrograms	YES
+ #ifndef HasLibCrypt
+ # define HasLibCrypt		YES
+ #endif
+ #define HasPoll			YES
+ #define TermcapLibrary		-lncurses
+ #ifndef GnuMallocLibrary
+ #define GnuMallocLibrary	/* -lgnumalloc */
+ #endif
+ 
+ #ifdef InstallCmd
+ #undef  InstallCmd
+ #endif
+ #define InstallCmd		/bin/install
+ 
+ #define TroffCmd        groff -Tps
+ 
+ #ifndef ExtraFilesToClean
+ # define ExtraFilesToClean *.core
+ #endif
+ 
+ #ifdef i386Architecture
+ # include <xfree86.cf>
+ #endif
+ 
+ 
*** motif.orig/config/cf/gnuLib.rules	Fri Jul  7 15:22:07 2000
--- motif/config/cf/gnuLib.rules	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,121 ----
+ /*
+  * GNU/Hurd shared library rules
+  *
+  * $XFree86: xc/config/cf/gnuLib.rules,v 1.1.2.2 1998/12/22 12:27:32 hohndel Exp $
+  */
+ 
+ #ifndef UseElfFormat
+ #define UseElfFormat YES
+ #endif
+ 
+ /*
+  * GNU/Hurd shared library rules
+  * Cloned from NetBSD/FreeBSD (ELF) shared library rules
+  *
+  */
+ 
+ #ifndef HasSharedLibraries
+ #define HasSharedLibraries YES
+ #endif
+ #ifndef ForceNormalLib
+ #define ForceNormalLib YES
+ #endif
+ 
+ #ifndef BaseShLibReqs
+ #define BaseShLibReqs		/* -lc implied by $(CC) */
+ #endif
+ 
+ #ifndef SharedDataSeparation
+ #define SharedDataSeparation NO
+ #endif
+ #ifndef SharedCodeDef
+ #define SharedCodeDef /**/
+ #endif
+ #ifndef SharedLibraryDef
+ #define SharedLibraryDef /**/
+ #endif
+ #ifndef ShLibIncludeFile
+ #define ShLibIncludeFile <gnuLib.tmpl>
+ #endif
+ #ifndef SharedLibraryLoadFlags
+ #define SharedLibraryLoadFlags -shared -Wl,-rpath=$(USRLIBDIR)
+ #endif
+ #ifndef PositionIndependentCFlags
+ #define PositionIndependentCFlags -fPIC
+ #endif
+ #ifndef PositionIndependentCplusplusFlags
+ #define PositionIndependentCplusplusFlags -fPIC
+ #endif
+ #ifndef ExtraLoadFlags
+ #ifdef UseInstalled
+ #define ExtraLoadFlags -Wl,-rpath=$(USRLIBDIRPATH)
+ #else
+ #define ExtraLoadFlags -Wl,-dynamic-linker=/lib/ld.so.1 -Wl,-rpath=/lib:$(USRLIBDIRPATH) -Wl,-rpath-link=$(BUILDLIBDIR)
+ #endif
+ #endif
+ 
+ /*
+  * InstallSharedLibrary - generate rules to install the shared library.
+  * NOTE: file must be executable, hence "INSTBINFLAGS"
+  */
+ #ifndef InstallSharedLibrary
+ #define InstallSharedLibrary(libname,rev,dest)				@@\
+ install:: Concat(lib,libname.so.rev) 					@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) $(INSTALLFLAGS) $(INSTBINFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
+ 	(T=`echo Concat($(DESTDIR)dest/lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`;\
+ 		$(RM) $$T && $(LN) Concat(lib,libname.so.rev) $$T)	@@\
+ 	(T=`echo Concat($(DESTDIR)dest/lib,libname.so.rev) | sed 's/\.so.*$$/.so/'`;\
+ 		$(RM) $$T && $(LN) Concat(lib,libname.so.rev) $$T)	@@\
+ 	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
+ 	$(LN) Concat(lib,libname.so.rev) Concat($(DESTDIR)dest/lib,libname.so)
+ #endif /* InstallSharedLibrary */
+ 
+ /*
+  * InstallSharedLibraryData - generate rules to install the shared library data
+  */
+ #ifndef InstallSharedLibraryData
+ #define InstallSharedLibraryData(libname,rev,dest)
+ #endif /* InstallSharedLibraryData */
+ 
+ 
+ /*
+  * SharedLibraryTarget - generate rules to create a shared library;
+  * build it into a different name so that we do not hose people by having
+  * the library gone for long periods.
+  */
+ #ifndef SharedLibraryTarget
+ #ifdef UseInstalled  
+ #define LinkBuildSonameLibrary(lib) true
+ #else
+ #define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+ 	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
+ #endif
+ 
+ #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
+ AllTarget(Concat(lib,libname.so.rev))					@@\
+ 									@@\
+ Concat(lib,libname.so.rev):  solist					@@\
+ 	$(RM) $@~							@@\
+ 	SONAME=`echo $@ | sed 's/\.[^\.]*$$//'`; \			@@\
+ 		(cd down; $(CC) -o up/$@~ $(SHLIBLDFLAGS) -Wl,-soname,$$SONAME solist $(REQUIREDLIBS) BaseShLibReqs); \ @@\
+ 		$(RM) $$SONAME; $(LN) $@ $$SONAME; \			@@\
+ 		LinkBuildSonameLibrary($$SONAME)			@@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 	$(RM) Concat(lib,libname.so)					@@\
+ 	$(LN) $@ Concat(lib,libname.so)					@@\
+ 	LinkBuildLibrary($@)						@@\
+ 	LinkBuildLibrary(Concat(lib,libname.so))			@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) Concat(lib,libname.so.rev)
+ 
+ #endif /* SharedLibraryTarget */
+ 
+ /*
+  * SharedLibraryDataTarget - generate rules to create shlib data file;
+  */
+ #ifndef SharedLibraryDataTarget
+ #define SharedLibraryDataTarget(libname,rev,salist)
+ #endif /* SharedLibraryTarget */
*** motif.orig/config/cf/gnuLib.tmpl	Fri Jul  7 15:22:07 2000
--- motif/config/cf/gnuLib.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,33 ----
+ /*
+  * GNU Hurd shared library template
+  *
+  * $XFree86: xc/config/cf/gnuLib.tmpl,v 1.1.2.2 1998/12/22 12:27:32 hohndel Exp $
+  */
+ 
+ #ifndef FixupLibReferences
+ #define FixupLibReferences()						@@\
+ XMULIBONLY = -lXmu							@@\
+ XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+ #endif
+ 
+ #ifndef XawClientLibs
+ #define XawClientLibs $(XAWLIB) $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+ #endif
+ 
+ #define CplusplusLibC
+ #define FrescoSysLibs	CplusplusLibC MathLibrary
+ 
+ #define SharedX11Reqs
+ #define SharedOldXReqs	$(LDPRELIB) $(XLIBONLY)
+ #define SharedXtReqs	$(LDPRELIB) $(XLIBONLY) $(SMLIB) $(ICELIB)
+ #define SharedXawReqs	$(LDPRELIB) $(XMULIB) $(XTOOLLIB) $(XLIB)
+ #define SharedXmuReqs	$(LDPRELIB) $(XTOOLLIB) $(XLIB)
+ #define SharedXextReqs	$(LDPRELIB) $(XLIBONLY)
+ #define SharedXiReqs	$(LDPRELIB) $(XLIB)
+ #define SharedPexReqs	$(LDPRELIB) $(XLIBONLY) MathLibrary
+ #define SharedXtstReqs	$(LDPRELIB) $(XLIB)
+ #define SharedXieReqs	$(LDPRELIB) $(XLIBONLY)
+ #define SharedSMReqs	$(LDPRELIB) $(ICELIB)
+ #define SharedFrescoReqs	$(LDPRELIB) $(XLIBONLY) FrescoSysLibs
+ #define SharedXtfReqs	$(LDPRELIB) $(FRESCOLIB) $(XTOOLLIB) $(XLIB) FrescoSysLibs
+ 
*** motif.orig/config/cf/host.def	Fri Jul  7 14:12:55 2000
--- motif/config/cf/host.def	Fri Jul  7 15:28:24 2000
***************
*** 1,12 ****
  #define TopLevelProject         Motif
  #define ProjectRoot             /usr/X11R6
  #define X11ProjectRoot          /usr/X11R6
! #define VirtualBindingsPath     /usr/X11R6/lib/X11/bindings
  #define ImportX11               YES
  #define USE_BYACC               YES
  #define NoMessageCatalog        YES
  #define ForceNormalLib          YES
  #define DebugLibXm              YES
  #define DebugLibMrm             YES
  #define DebugLibUil             YES
  #define LexLib                  -lfl
--- 1,17 ----
+ #ifdef BeforeVendorCF
+ 
  #define TopLevelProject         Motif
  #define ProjectRoot             /usr/X11R6
  #define X11ProjectRoot          /usr/X11R6
! #define VirtualBindingsPath     $(LIBDIR)/bindings
  #define ImportX11               YES
  #define USE_BYACC               YES
  #define NoMessageCatalog        YES
  #define ForceNormalLib          YES
+ #define HasVarDirectory         NO
  #define DebugLibXm              YES
  #define DebugLibMrm             YES
  #define DebugLibUil             YES
  #define LexLib                  -lfl
+ 
+ #endif /* BeforeVendorCF */
*** motif.orig/config/cf/hp.cf	Fri Apr 28 11:04:00 2000
--- motif/config/cf/hp.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: hp.cf /main/88 1997/11/12 07:16:22 kaleb $
  
  #ifndef OSName
  # define OSName		DefaultOSName
--- 1,4 ----
! XCOMM platform:  $TOG: hp.cf /main/85 1997/04/17 14:11:34 barstow $
  
  #ifndef OSName
  # define OSName		DefaultOSName
***************
*** 77,87 ****
  
  #define SystemV				YES
  #define Malloc0ReturnsNull		YES
- #if OSMajorVersion > 9
- # define AllocateLocalDefines		-DINCLUDE_ALLOCA_H
- #else
- # define AllocateLocalDefines		-DNO_ALLOCA
- #endif
  
  #ifdef __hp9000s800
  # ifndef OptimizedCDebugFlags
--- 77,82 ----
***************
*** 94,100 ****
  #  define SharedLibraryCCOptions	-Ae
  # endif
  # define StandardDefines		-Dhpux -DSYSV
! # define ServerExtraDefines		-DXOS -DBSTORE -DSOFTWARE_CURSOR -DSCREEN_PIXMAPS -DMERGE_SAVE_UNDERS -DHAS_IFREQ -DFORCE_SEPARATE_PRIVATE AllocateLocalDefines
  
  # if OSMajorVersion > 9
  #  include <hpLib.rules>
--- 89,95 ----
  #  define SharedLibraryCCOptions	-Ae
  # endif
  # define StandardDefines		-Dhpux -DSYSV
! # define ServerExtraDefines		-DXOS -DBSTORE -DSOFTWARE_CURSOR -DNO_ALLOCA -DSCREEN_PIXMAPS -DMERGE_SAVE_UNDERS -DHAS_IFREQ -DFORCE_SEPARATE_PRIVATE
  
  # if OSMajorVersion > 9
  #  include <hpLib.rules>
***************
*** 133,141 ****
  #ifndef BuildServer
  # define BuildServer		__hp9000s700
  #endif
- #if OSMajorVersion < 10
  #define NeedBerklib		(BuildServer|BuildFontServer)
- #endif
  #define XawI18nDefines		-DHAS_WCHAR_H -DHAS_ISW_FUNCS
  
  #if OSMajorVersion < 6 || (OSMajorVersion == 6 && OSMinorVersion < 2)
--- 128,134 ----
*** motif.orig/config/cf/ibm.cf	Fri Apr 28 11:04:00 2000
--- motif/config/cf/ibm.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: ibm.cf /main/82 1998/02/26 17:03:51 kaleb $
  
  #ifndef OSName
  # define OSName		DefaultOSName
--- 1,4 ----
! XCOMM platform:  $XConsortium: ibm.cf /main/80 1996/12/26 08:52:31 kaleb $
  
  #ifndef OSName
  # define OSName		DefaultOSName
***************
*** 23,29 ****
  #if OSMajorVersion > 3 || (OSMajorVersion == 3 && OSMinorVersion >= 2)
  #define HasBSD44Sockets		YES
  #define HasPutenv		YES
- #define HasPlugin		YES
  /*
   * If you do not have threads support installed, put
   * #define HasPosixThreads	NO
--- 23,28 ----
***************
*** 102,107 ****
--- 101,108 ----
  #define CppCmd			/usr/ccs/lib/cpp
  #define ExpandManNames		YES
  #define ExtensionOSDefines	-DXTESTEXT1
+ #define XibmServer		YES
+ #define ibmIncludeSKYWAY	YES
  
  /* IBM cpp has slightly non-standard line directives, but supports -P */
  #define CppNoLineInfoOption	-P
*** motif.orig/config/cf/Imake.cf	Fri Apr 28 11:03:58 2000
--- motif/config/cf/Imake.cf	Sat Jun  3 18:49:34 2000
***************
*** 1,4 ****
! XCOMM $TOG: Imake.cf /main/30 1998/04/28 13:55:25 barstow $
  /*
   * To add support for another platform:
   * 
--- 1,5 ----
! XCOMM $TOG: Imake.cf /main/28 1997/06/25 08:31:36 barstow $
! XCOMM $XFree86: xc/config/cf/Imake.cf,v 3.34.2.14 1999/07/29 09:22:23 hohndel Exp $
  /*
   * To add support for another platform:
   * 
***************
*** 18,23 ****
--- 19,31 ----
   *     4.  Create a .cf file with the name given by MacroFile.
   */
  
+ #if defined(clipper) || defined(__clipper__)
+ # undef clipper
+ # define MacroIncludeFile <ingr.cf>
+ # define MacroFile ingr.cf
+ # define IngrArchitecture
+ #endif /* clipper */
+ 
  #ifdef ultrix
  # define MacroIncludeFile <ultrix.cf>
  # define MacroFile ultrix.cf
***************
*** 33,39 ****
  # define UltrixArchitecture
  #endif /* ultrix */
  
! #if defined(vax) && !defined(UltrixArchitecture)
  # define MacroIncludeFile <bsd.cf>
  # define MacroFile bsd.cf
  # undef vax
--- 41,47 ----
  # define UltrixArchitecture
  #endif /* ultrix */
  
! #if defined(vax) && !defined(UltrixArchitecture) && !defined(__NetBSD__)
  # define MacroIncludeFile <bsd.cf>
  # define MacroFile bsd.cf
  # undef vax
***************
*** 51,56 ****
--- 59,121 ----
  # undef i386
  #endif /* bsdi */
  
+ #ifdef __OpenBSD__
+ # undef __OpenBSD__
+ # undef __NetBSD__
+ # define OpenBSDArchitecture
+ # define MacroIncludeFile <OpenBSD.cf>
+ # define MacroFile OpenBSD.cf
+ # ifdef __i386__
+ #  define i386BsdArchitecture
+ #  define i386Architecture
+ #  undef i386
+ # endif
+ # if defined(__sparc__) || defined(sparc)
+ #  define SparcArchitecture
+ #  undef sparc
+ # endif
+ # ifdef mips
+ #   define MipsArchitecture
+ #   ifdef arc
+ #     define ArcArchitecture
+ #     undef arc
+ #   endif
+ #   ifdef pmax
+ #     define PmaxArchitecture
+ #     undef pmax
+ #   endif
+ #   undef mips
+ # endif
+ # ifdef __alpha__
+ #   define AlphaArchitecture
+ #   undef __alpha__
+ # endif
+ # ifdef mc68020
+ #  define Mc68020Architecture
+ #  if defined(amiga)
+ #   define AmigaArchitecture
+ #   undef amiga
+ #  endif
+ #  if defined(hp300)
+ #   define Hp300Architecture
+ #   undef hp300
+ #  endif
+ #  if defined(mac68k)
+ #    define Mac68kArchitecture
+ #    undef mac68k
+ #  endif
+ #  if defined(mvme68k)
+ #   define Mvme68kArchitecture
+ #   undef mvme68k
+ #  endif
+ #  if defined(sun3) 
+ #   define Sun3Architecture
+ #   undef sun3
+ #  endif
+ #  undef mc68000
+ # endif
+ #endif /* OpenBSD */
+ 
  #ifdef __NetBSD__
  # define MacroIncludeFile <NetBSD.cf>
  # define MacroFile NetBSD.cf
***************
*** 65,70 ****
--- 130,153 ----
  #  define SparcArchitecture
  #  undef sparc
  # endif
+ # ifdef mips
+ #   define MipsArchitecture
+ #   define ArcArchitecture
+ #   undef mips
+ # endif
+ # ifdef __alpha__
+ #   define AlphaArchitecture
+ #   undef __alpha__
+ # endif
+ # ifdef mc68000
+ #   define Mc68020Architecture
+ #   undef mc68000
+ # endif
+ # if defined(arm32) || defined(__arm32__)
+ #   define Arm32Architecture
+ #   undef arm32
+ #   undef __arm32__
+ # endif
  #endif /* NetBSD */
  
  #ifdef __FreeBSD__
***************
*** 133,147 ****
  #endif /* hpux */
  
  #ifdef sco
! # define MacroIncludeFile <sco.cf>
! # define MacroFile sco.cf
  # undef sco
  # undef USL
  # undef SYSV
  # undef i386
! /* # define i386Architecture */
  # define SCOArchitecture
! #endif /* sco */
  
  #ifdef USL
  # define MacroIncludeFile <usl.cf>
--- 216,236 ----
  #endif /* hpux */
  
  #ifdef sco
! # define MacroIncludeFile <sco5.cf>
! # define MacroFile sco5.cf
  # undef sco
  # undef USL
  # undef SYSV
  # undef i386
! # undef SCO
! # undef SVR4
! # define i386Architecture
  # define SCOArchitecture
! # define i386SVR3Architecture
! # define SVR3Architecture
! # define i386ScoArchitecture
! # define i386Sco325Architecture
! #endif /* sco - SCO Open Server 5 */
  
  #ifdef USL
  # define MacroIncludeFile <usl.cf>
***************
*** 317,327 ****
  # endif
  #endif /* MOTOROLA */
  
! #ifdef SVR4
  # ifdef i386
  #  define i386Architecture
  #  undef i386
  # endif
  # define SVR4Architecture
  # define MacroIncludeFile <svr4.cf>
  # define MacroFile svr4.cf
--- 406,420 ----
  # endif
  #endif /* MOTOROLA */
  
! #if defined(SVR4) && !defined(DGUX)
  # ifdef i386
  #  define i386Architecture
  #  undef i386
  # endif
+ # ifdef PC98
+ #  define PANIX98Architecture
+ #  undef PC98
+ # endif
  # define SVR4Architecture
  # define MacroIncludeFile <svr4.cf>
  # define MacroFile svr4.cf
***************
*** 330,342 ****
  
  #ifdef SYSV
  # ifdef i386
! #  define MacroIncludeFile <x386.cf>
! #  define MacroFile x386.cf
! #  define i386SVR3Architecture
! #  undef i386
! # endif
  #endif /* SYSV */
  
  #ifdef SYSV386
  # undef i386
  # ifdef SVR4
--- 423,462 ----
  
  #ifdef SYSV
  # ifdef i386
! # undef i386
! #  ifdef ISC
! #   define i386Architecture	
! #   define i386SVR3Architecture	
! #   define MacroIncludeFile <isc.cf>
! #   define MacroFile isc.cf
! #   define i386IscArchitecture
! #   undef ISC
! #   ifdef ISC202
! #    define IscVersion 202
! #    undef ISC202
! #   else
! #    ifdef ISC30
! #     define IscVersion 300
! #     undef ISC30
! #    else
! #     ifdef ISC40
! #      define IscVersion 400
! #      undef ISC40
! #     else
! #      define IscVersion 221
! #     endif /* ISC40 */
! #    endif /* ISC30 */
! #   endif /* ISC202 */
! #  endif /* ISC */
! #  ifndef MacroFile
! #   define i386SVR3Architecture
! #   define MacroIncludeFile <x386.cf>
! #   define MacroFile x386.cf
! #  endif /* MacroFile */
! # endif /* i386 */
  #endif /* SYSV */
  
+ /* SYSV386 is here for backward compatibility only */
  #ifdef SYSV386
  # undef i386
  # ifdef SVR4
***************
*** 346,359 ****
  #  define MacroIncludeFile <svr4.cf>
  #  define MacroFile svr4.cf
  #  undef SVR4
! # else
! #  define MacroIncludeFile <x386.cf>
! #  define MacroFile x386.cf
! #  define i386SVR3Architecture
! # endif
  #endif /* SYSV386 */
  
  #ifdef DGUX
  # define MacroIncludeFile <DGUX.cf>
  # define MacroFile DGUX.cf
  # undef DGUX
--- 466,507 ----
  #  define MacroIncludeFile <svr4.cf>
  #  define MacroFile svr4.cf
  #  undef SVR4
! # else /* ! SVR4 */
! #  ifdef ISC
! #   define i386Architecture	
! #   define i386SVR3Architecture	
! #   define MacroIncludeFile <isc.cf>
! #   define MacroFile isc.cf
! #   define i386IscArchitecture
! #   undef ISC
! #   ifdef ISC202
! #    define IscVersion 202
! #    undef ISC202
! #   else
! #    ifdef ISC30
! #     define IscVersion 300
! #     undef ISC30
! #    else
! #     ifdef ISC40
! #      define IscVersion 400
! #      undef ISC40
! #     else
! #      define IscVersion 221
! #     endif /* ISC40 */
! #    endif /* ISC30 */
! #   endif /* ISC202 */
! #  endif /* ISC */
! #  ifndef MacroFile
! #   define i386SVR3Architecture
! #   define MacroIncludeFile <x386.cf>
! #   define MacroFile x386.cf
! #  endif /* MacroFile */
! # endif /* ! SVR4 */
  #endif /* SYSV386 */
  
  #ifdef DGUX
+ # define i386Architecture
+ # define SVR4Architecture
  # define MacroIncludeFile <DGUX.cf>
  # define MacroFile DGUX.cf
  # undef DGUX
***************
*** 407,425 ****
  # ifdef i386
  #  define i386Architecture
  #  undef i386
  # ifdef __i386__
  #  ifndef i386Architecture
  #   define i386Architecture
  #  endif
  #  undef __i386__
! # endif /* i386 */
  # ifdef __alpha
  #  define AlphaArchitecture
  #  undef __alpha
  # endif /* __alpha */
! #endif
  #endif /* linux */
  
  #ifdef __uxp__
  # define MacroIncludeFile <fujitsu.cf>
  # define MacroFile fujitsu.cf
--- 555,623 ----
  # ifdef i386
  #  define i386Architecture
  #  undef i386
+ # endif /* i386 */
  # ifdef __i386__
  #  ifndef i386Architecture
  #   define i386Architecture
  #  endif
  #  undef __i386__
! # endif /* __i386__ */
  # ifdef __alpha
  #  define AlphaArchitecture
  #  undef __alpha
  # endif /* __alpha */
! # ifdef __alpha__
! #  define AlphaArchitecture
! #  undef __alpha__
! # endif /* __alpha__ */
! # ifdef mc68000
! #  define Mc68020Architecture
! #  undef mc68000
! # endif /* mc68000 */
! # ifdef powerpc
! #  define PowerPCArchitecture
! #  undef powerpc
! # endif
! # if defined(arm) || defined(__arm__)
! #   define ArmArchitecture
! #   undef arm
! #   undef __arm__
! #   if defined(__ARM_ARCH_4__)
! #     define Arm4Architecture
! #     define Arm32Architecture
! #     undef __ARM_ARCH_4__
! #   endif
! #   if defined(__ARM_ARCH_3__)
! #     define Arm3Architecture
! #     undef __ARM_ARCH_3__
! #   endif
! # endif
  #endif /* linux */
  
+ #if (defined(__Lynx__) || defined(Lynx)) && (defined(i386) || defined(__i386__) || defined(__x86__) || defined(__powerpc__) || defined(__sparc__) || defined(sparc))
+ # define MacroIncludeFile <lynx.cf>
+ # define MacroFile lynx.cf
+ # define LynxOSArchitecture
+ # undef __Lynx__
+ # undef Lynx
+ # undef lynx
+ # if defined(i386) || defined(__i386__) || defined(__x86__)
+ #  define i386Architecture
+ #  undef i386
+ #  undef __i386__
+ #  undef __x86__
+ # endif
+ # ifdef __powerpc__
+ #  define ppcArchitecture
+ #  undef __powerpc__
+ # endif
+ # if defined(sparc) || defined(__sparc__)
+ #  define SparcArchitecture
+ #  undef sparc
+ #  undef __sparc__
+ # endif
+ #endif /* LynxOS AT/PPC/microSPARC */
+ 
  #ifdef __uxp__
  # define MacroIncludeFile <fujitsu.cf>
  # define MacroFile fujitsu.cf
***************
*** 463,468 ****
--- 661,725 ----
  # define MacroFile nec.cf
  # define NecArchitecture
  #endif
+ 
+ #ifdef minix 
+ #define MacroIncludeFile <minix.cf>
+ #define MacroFile minix.cf
+ #undef minix
+ #define MinixArchitecture
+ #define i386Architecture
+ #endif /* minix */
+ 
+ #ifdef MACH
+ #ifdef __GNU__
+ #define MacroIncludeFile <gnu.cf>
+ #define MacroFile gnu.cf
+ #define GNUMachArchitecture
+ #else
+ #define MacroIncludeFile <mach.cf>
+ #define MacroFile mach.cf
+ #endif
+ #undef MACH
+ #ifdef	i386
+ #define i386MachArchitecture
+ #define i386Architecture
+ #endif	/* i386 */
+ #undef i386
+ #endif /* MACH */
+ 
+ #ifdef emxos2
+ #define MacroIncludeFile <os2.cf>
+ #define MacroFile os2.cf
+ #define OS2Architecture
+ #define i386Architecture
+ #endif /* emxos2 */
+ 
+ #if defined(__QNX__) && !defined(__QNXNTO__)
+ #define MacroIncludeFile <QNX.cf>
+ #define MacroFile QNX.cf
+ #define QNXArchitecture
+ #define i386Architecture
+ #endif /* QNX4 */
+ 
+ #ifdef __QNXNTO__
+ #define MacroIncludeFile <nto.cf>
+ #define MacroFile nto.cf
+ #define NTOArchitecture
+ #ifdef PPC
+ # define PPCArchitecture
+ # undef PPC
+ #else
+ #ifdef MIPS
+ # define mipsArchitecture
+ # undef MIPS
+ #else
+ #ifdef i386
+ # define i386Architecture
+ # undef i386
+ #endif
+ #endif
+ #endif
+ #endif /* QNX/Neutrino */
  
  #ifndef MacroIncludeFile
  XCOMM WARNING:  Imake.cf not configured; guessing at definitions!!!
*** motif.orig/config/cf/Imakefile	Fri Jul  7 14:12:53 2000
--- motif/config/cf/Imakefile	Fri Jun 30 16:13:34 2000
***************
*** 1,4 ****
--- 1,5 ----
  XCOMM $XConsortium: Imakefile /main/38 1996/11/07 14:43:46 kaleb $
+ XCOMM $XFree86: xc/config/cf/Imakefile,v 3.13.2.5 1999/07/29 09:22:24 hohndel Exp $
  
  XCOMM Some compilers generate fatal errors if an -L directory does
  XCOMM not exist.  Since BUILDLIBDIR may not exist yet suppress its use.
***************
*** 9,15 ****
--- 10,23 ----
  LOCALFILES = LocalConfigFiles
  #endif
  
+ #ifndef InstallEmptyHostDef
+ HOSTDEFFILES = \
+ host.def
+ #endif
+ 
  DEFFILES = \
+ xf86site.def \
+ $(HOSTDEFFILES) \
  site.def
  
  RULEFILES = \
***************
*** 19,30 ****
--- 27,43 ----
  X11.rules \
  bsdLib.rules \
  cde.rules \
+ gnuLib.rules \
  hpLib.rules \
  ibmLib.rules \
  lnxLib.rules \
+ lnxdoc.rules \
  necLib.rules \
  noop.rules \
+ nto.rules \
  oldlib.rules \
+ os2.rules \
+ os2Lib.rules \
  os2Lib.rules \
  osfLib.rules \
  scoLib.rules \
***************
*** 32,37 ****
--- 45,51 ----
  sunLib.rules \
  sv3Lib.rules \
  sv4Lib.rules \
+ QNX.rules \
  xf86.rules
  
  TMPLFILES = \
***************
*** 39,52 ****
--- 53,69 ----
  Library.tmpl \
  Motif.tmpl \
  Server.tmpl \
+ ServerLib.tmpl \
  Threads.tmpl \
  WinLib.tmpl \
  X11.tmpl \
  bsdLib.tmpl \
  cde.tmpl \
  hpLib.tmpl \
+ gnuLib.tmpl \
  ibmLib.tmpl \
  lnxLib.tmpl \
+ lnxdoc.tmpl \
  necLib.tmpl \
  os2Lib.tmpl \
  osfLib.tmpl \
***************
*** 63,68 ****
--- 80,86 ----
  FreeBSD.cf \
  Mips.cf \
  NetBSD.cf \
+ OpenBSD.cf \
  Oki.cf \
  Win32.cf \
  apollo.cf \
***************
*** 72,77 ****
--- 90,96 ----
  cray.cf \
  fujitsu.cf \
  generic.cf \
+ gnu.cf \
  hp.cf \
  ibm.cf \
  isc.cf \
***************
*** 83,92 ****
--- 102,113 ----
  moto.cf \
  ncr.cf \
  nec.cf \
+ nto.cf \
  os2.cf \
  osf1.cf \
  pegasus.cf \
  sco.cf \
+ sco5.cf \
  sequent.cf \
  sgi.cf \
  sony.cf \
***************
*** 95,105 ****
  svr4.cf \
  ultrix.cf \
  usl.cf \
  x386.cf \
  xfree86.cf
  
  INSTFILES = $(RULEFILES) $(TMPLFILES) $(DEFFILES) $(CFFILES) $(LOCALFILES)
  
  all::
  
! InstallMultipleDestFlags(install,/**/,/**/,/**/)
--- 116,152 ----
  svr4.cf \
  ultrix.cf \
  usl.cf \
+ lynx.cf \
  x386.cf \
+ QNX.cf \
  xfree86.cf
  
  INSTFILES = $(RULEFILES) $(TMPLFILES) $(DEFFILES) $(CFFILES) $(LOCALFILES)
  
  all::
  
! InstallMultipleDestFlags(install,$(INSTFILES),$(CONFIGDIR),$(INSTDATFLAGS))
! InstallLinkKitMultipleDestFlags($(INSTFILES),$(LINKKITDIR)/config/cf,$(INSTDATFLAGS))
! 
! InstallNamedNonExec(Motif.rules,Motif.rules.openmotif,$(CONFIGDIR))
! InstallNamedNonExec(Motif.tmpl,Motif.tmpl.openmotif,$(CONFIGDIR))
! 
! #ifdef InstallEmptyHostDef
! install::
! 	@(TMP=/tmp/tmp.$$$$; \
! 	RemoveFile($${TMP}); \
! 	echo "" > $${TMP}; \
! 	$(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) $${TMP} \
! 		$(DESTDIR)$(CONFIGDIR)/host.def; \
! 	RemoveFile($${TMP}))
! 
! #ifdef XFree86Version
! install.linkkit::
! 	@(TMP=/tmp/tmp.$$$$; \
! 	RemoveFile($${TMP}); \
! 	echo "" > $${TMP}; \
! 	$(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) $${TMP} \
! 		$(DESTDIR)$(LINKKITDIR)/config/cf/host.def; \
! 	RemoveFile($${TMP}))
! #endif
! #endif
*** motif.orig/config/cf/Imake.rules	Fri Apr 28 11:03:58 2000
--- motif/config/cf/Imake.rules	Sat Jun  3 18:49:34 2000
***************
*** 1,6 ****
  XCOMM ---------------------------------------------------------------------
  XCOMM Imake rules for building libraries, programs, scripts, and data files
! XCOMM rules:  $TOG: Imake.rules /main/227 1998/02/02 12:07:57 kaleb $
  
  /*
   *		   MACHINE-INDEPENDENT RULES; DO NOT MODIFY
--- 1,7 ----
  XCOMM ---------------------------------------------------------------------
  XCOMM Imake rules for building libraries, programs, scripts, and data files
! XCOMM rules:  $TOG: Imake.rules /main/222 1997/07/17 20:04:40 kaleb $
! XCOMM rules:  $XFree86: xc/config/cf/Imake.rules,v 3.33.2.10 1998/11/04 10:53:01 dawes Exp $
  
  /*
   *		   MACHINE-INDEPENDENT RULES; DO NOT MODIFY
***************
*** 77,82 ****
--- 78,84 ----
   * InstallNamedProg		(srcname,dstname,dest)
   * InstallNamedProgNoClobber	(srcname,dstname,dest)
   * MakeFlagsToShellFlags	(makeflags,shellcmd)
+  * MakeNamedTargetSubdir	(dir,flags,subname)
   * LinkFileList			(step,list,dir,sub)
   * LinkVarDirectory		(mdir,cdir,rdir,ldir)
   * InstallMultipleDestFlags	(step,list,dest,flags)
***************
*** 162,167 ****
--- 164,171 ----
   * CppSourceFile		(dst,src,defs,deplist)
   * MakeDirectories		(step,dirs)
   * AllTarget			(depends)
+  * StaticLibrary		(libpath,libname)
+  * MakeMutex			(targets)
   *
   *
   * The following are in specific <os>Lib.rules:
***************
*** 492,498 ****
  #define BuildIncludesTop(srclist)					@@\
  includes:: srclist							@@\
  	MakeDir($(BUILDINCDIR))						@@\
! 	@(set -x; cd $(BUILDINCDIR); for i in srclist; do \		@@\
  		RemoveFile($$i); \					@@\
  		$(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/$$i .; \		@@\
  	done)
--- 496,502 ----
  #define BuildIncludesTop(srclist)					@@\
  includes:: srclist							@@\
  	MakeDir($(BUILDINCDIR))						@@\
! 	@(set -x; cd $(BUILDINCDIR) && for i in srclist; do \		@@\
  		RemoveFile($$i); \					@@\
  		$(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/$$i .; \		@@\
  	done)
***************
*** 502,508 ****
  #define BuildIncludes(srclist,dstsubdir,dstupdir)			@@\
  includes:: srclist							@@\
  	MakeDir($(BUILDINCDIR)/dstsubdir)				@@\
! 	@(set -x; cd $(BUILDINCDIR)/dstsubdir; for i in srclist; do \	@@\
  		RemoveFile($$i); \					@@\
  		$(LN) $(BUILDINCTOP)/dstupdir/$(CURRENT_DIR)/$$i .; \	@@\
  	done)
--- 506,512 ----
  #define BuildIncludes(srclist,dstsubdir,dstupdir)			@@\
  includes:: srclist							@@\
  	MakeDir($(BUILDINCDIR)/dstsubdir)				@@\
! 	@(set -x; cd $(BUILDINCDIR)/dstsubdir && for i in srclist; do \	@@\
  		RemoveFile($$i); \					@@\
  		$(LN) $(BUILDINCTOP)/dstupdir/$(CURRENT_DIR)/$$i .; \	@@\
  	done)
***************
*** 524,530 ****
  #define BuildInterfaces(srclist,dstsubdir,dstupdir)			@@\
  interfaces::								@@\
  	MakeDir($(BUILDINCDIR)/dstsubdir)				@@\
! 	@(set -x; cd $(BUILDINCDIR)/dstsubdir; for i in srclist; do \	@@\
  		RemoveFile($$i); \					@@\
  		$(LN) $(BUILDINCTOP)/dstupdir/$(CURRENT_DIR)/$$i .; \	@@\
  	done)
--- 528,534 ----
  #define BuildInterfaces(srclist,dstsubdir,dstupdir)			@@\
  interfaces::								@@\
  	MakeDir($(BUILDINCDIR)/dstsubdir)				@@\
! 	@(set -x; cd $(BUILDINCDIR)/dstsubdir && for i in srclist; do \	@@\
  		RemoveFile($$i); \					@@\
  		$(LN) $(BUILDINCTOP)/dstupdir/$(CURRENT_DIR)/$$i .; \	@@\
  	done)
***************
*** 640,645 ****
--- 644,663 ----
  InstallManPage(program,$(MANDIR))
  #endif /* ProgramTargetHelper */
  
+ #ifndef ProgramTargetHelperNoMan
+ #define ProgramTargetHelperNoMan(program,srcs,objs,deplib,locallib,syslib) @@\
+ ProgramTargetName(program): $(objs) $(deplib)				@@\
+ 	RemoveTargetProgram($@)						@@\
+ 	LinkRule($@,$(LDOPTIONS),$(objs),locallib $(LDLIBS) syslib)	@@\
+ 									@@\
+ CenterProgramTarget(program,$(srcs),$(objs),locallib,syslib)		@@\
+ SentinelProgramTarget(program,$(objs) $(deplib),$(objs) locallib $(LDLIBS) syslib) @@\
+ PurifyProgramTarget(program,$(objs) $(deplib),$(objs) locallib $(LDLIBS) syslib) @@\
+ ProofProgramTarget(program,$(objs) $(deplib),$(objs) locallib $(LDLIBS) syslib) @@\
+ 									@@\
+ InstallProgram(program,$(BINDIR))
+ #endif /* ProgramTargetHelperNoMan */
+ 
  #ifndef CplusplusProgramTargetHelper
  #define	CplusplusProgramTargetHelper(program,srcs,objs,deplib,locallib,syslib) @@\
  ProgramTargetName(program): $(objs) $(deplib)				@@\
***************
*** 692,701 ****
  #endif /* ComplexCplusplusProgramTarget */
  
  /*
   * ComplexProgramTarget_1 - generate rules for compiling and linking the
   * program specified by $(OBJS1) and $(SRCS1), installing the program and its
   * man page, and generating dependencies for it and any programs described
!  * by $(SRCS2) throgh $(SRCS10).  It should be used to build the primary 
   * program in Imakefiles that describe multiple programs.
   */
  #ifndef ComplexProgramTarget_1
--- 710,740 ----
  #endif /* ComplexCplusplusProgramTarget */
  
  /*
+  * ComplexProgramTargetNoMan - generate rules for compiling and linking
+  * the program specified by $(OBJS) and $(SRCS), installing the program 
+  * and generating dependencies.  It should only be used in Imakefiles
+  * that describe a single program.
+  */
+ #ifndef ComplexProgramTargetNoMan
+ #define ComplexProgramTargetNoMan(program)				@@\
+         PROGRAM = program						@@\
+ 									@@\
+ AllTarget(program)							@@\
+ 									@@\
+ ProgramTargetHelperNoMan(program,SRCS,OBJS,DEPLIBS,$(LOCAL_LIBRARIES),NullParameter) @@\
+ 									@@\
+ DependTarget()								@@\
+ LintTarget()								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(ProgramTargetName(program))
+ #endif /* ComplexProgramTargetNoMan */
+ 
+ /*
   * ComplexProgramTarget_1 - generate rules for compiling and linking the
   * program specified by $(OBJS1) and $(SRCS1), installing the program and its
   * man page, and generating dependencies for it and any programs described
!  * by $(SRCS2) through $(SRCS10).  It should be used to build the primary 
   * program in Imakefiles that describe multiple programs.
   */
  #ifndef ComplexProgramTarget_1
***************
*** 894,900 ****
   */
  #ifndef ServerTargetWithFlags
  #define	ServerTargetWithFlags(server,subdirs,objects,libs,syslibs,flags) @@\
! AllTarget(server)							@@\
  ProgramTargetName(server): subdirs objects libs				@@\
  	MoveToBakFile($@)						@@\
  	LinkRule($@,$(LDOPTIONS),objects,libs $(LDLIBS) syslibs) @@\
--- 933,939 ----
   */
  #ifndef ServerTargetWithFlags
  #define	ServerTargetWithFlags(server,subdirs,objects,libs,syslibs,flags) @@\
! AllTarget(ProgramTargetName(server))					@@\
  ProgramTargetName(server): subdirs objects libs				@@\
  	MoveToBakFile($@)						@@\
  	LinkRule($@,$(LDOPTIONS),objects,libs $(LDLIBS) syslibs) @@\
***************
*** 1018,1026 ****
  #ifndef InstallLibraryAlias
  #define	InstallLibraryAlias(libname,alias,dest)				@@\
  install::								@@\
! 	-(cd $(DESTDIR)dest; \						@@\
  		RemoveFile(LibraryTargetName(alias)); \			@@\
! 		$(LN) LibraryTargetName(libname) LibraryTargetName(alias))
  #endif /* InstallLibraryAlias */
  
  
--- 1057,1065 ----
  #ifndef InstallLibraryAlias
  #define	InstallLibraryAlias(libname,alias,dest)				@@\
  install::								@@\
! 	-(cd $(DESTDIR)dest && ( \					@@\
  		RemoveFile(LibraryTargetName(alias)); \			@@\
! 		$(LN) LibraryTargetName(libname) LibraryTargetName(alias)))
  #endif /* InstallLibraryAlias */
  
  
***************
*** 1070,1075 ****
--- 1109,1151 ----
  	RemoveFile($${TMP}))
  #endif /* InstallManPageAliases */
  
+ 
+ /*
+  * InstallGenManPageLong - More general rules for installing manual pages --
+  * doesn't assume MANSUFFIX.
+  */
+ #ifndef InstallGenManPageLong
+ #define	InstallGenManPageLong(file,destdir,dest,suffix)			@@\
+ install.man:: file.man							@@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	$(INSTALL) -c $(INSTMANFLAGS) file.man $(DESTDIR)destdir/dest.suffix
+ #endif /* InstallGenManPageLong */
+ 
+ 
+ /*
+  * InstallGenManPage - general equivalent of InstallManPage
+  */
+ #ifndef InstallGenManPage
+ #define	InstallGenManPage(file,destdir,suffix)				@@\
+ InstallGenManPageLong(file,destdir,file,suffix)
+ #endif /* InstallGenManPage */
+ 
+ 
+ /*
+  * InstallGenManPageAliases - general equivalent of InstallManPageAliases
+  */
+ #ifndef InstallGenManPageAliases
+ #define	InstallGenManPageAliases(file,destdir,suffix,aliases)		@@\
+ install.man::								@@\
+ 	@(TMP=/tmp/tmp.$$$$; \						@@\
+ 	RemoveFile($${TMP}); \						@@\
+ 	echo .so `basename destdir`/file.suffix > $${TMP}; \		@@\
+ 	for i in aliases; do (set -x; \					@@\
+ 	$(INSTALL) $(INSTALLFLAGS) $(INSTMANFLAGS) $${TMP} $(DESTDIR)destdir/$$i.suffix); \ @@\
+ 	done; \								@@\
+ 	RemoveFile($${TMP}))
+ #endif /* InstallGenManPageAliases */
+ 
  /*
   * ManKeywordsTarget - generate the database used by "man -k".
   * This rule updates the index in the directory "manpath", which
***************
*** 1093,1098 ****
--- 1169,1185 ----
  
  
  /*
+  * InstallLinkKitNamedNonExec - rule for installing server Link Kit files.
+  *                         (only used for XFree86). This is a no-op
+  *                         rule so that Imakefiles on non-XFree86 systems
+  *                         continue to build Makefiles correctly.
+  */
+ #ifndef InstallLinkKitNamedNonExec
+ #define InstallLinkKitNamedNonExec(srcname,dstname,dest)
+ #endif
+ 
+ 
+ /*
   * InstallNonExecFile - generate rules to install a data file
   */
  #ifndef InstallNonExecFile
***************
*** 1170,1175 ****
--- 1257,1263 ----
  InstallNamedTarget(install,srcname,$(INSTBINFLAGS),dest,dstname)
  #endif /* InstallNamedProg */
  
+ 
  /*
   * InstallNamedProgNoClobber - Like InstallNamedProg, but doesn't
   * do the install if an installed version already exists.
***************
*** 1179,1184 ****
--- 1267,1284 ----
  InstallNamedTargetNoClobber(install,srcname,$(INSTBINFLAGS),dest,dstname)
  #endif /* InstallNamedProgNoClobber */
  
+ 
+ /*
+  * InstallLinkKitNamedProg - rule for installing server Link Kit files.
+  *                         (only used for XFree86). This is a no-op
+  *                         rule so that Imakefiles on non-XFree86 systems
+  *                         continue to build Makefiles correctly.
+  */
+ #ifndef InstallLinkKitNamedProg
+ #define InstallLinkKitNamedProg(srcname,dstname,dest)
+ #endif
+ 
+ 
  /*
   * MakeFlagsToShellFlags - set variables before starting a loop.
   * makeflags is the set of "make" flags to check.
***************
*** 1198,1203 ****
--- 1298,1312 ----
  #endif
  
  /*
+  * MakeNamedTargetSubdir - do make in a subdir.
+  */
+ #ifndef MakeNamedTargetSubdir
+ #define MakeNamedTargetSubdir(dir,flags,subname)\
+ 		(cd dir && $(MAKE) $(MFLAGS) $(PARALLELMFLAGS) \	@@\
+ 			flags subname)
+ #endif
+ 
+ /*
   * LinkFileList - link a list of files from one place to another
   */
  #ifndef LinkFileList
***************
*** 1208,1237 ****
  	for i in list; do (set -x; RemoveFile($$i); $(LN) sub/$$i .); done
  #endif
  
  /*
   * LinkVarDirectory
   *
   * Make links from $LIBDIR (<ProjectRoot>/lib/X11) to /var/X11/
!  * For example /usr/X11R6/lib/X11/xdm ==> /var/X11/xdm so that X 
!  * binaries can be mounted from a read-only volume like a CD-ROM;
!  * but files that may need to be edited can be stored locally on 
!  * read-write media. If someone has an existing installation, be
!  * careful and move existing files to the new location in /var.
   */
  #ifndef LinkVarDirectory
! #if HasVarDirectory
  #define LinkVarDirectory(mdir,cdir,rdir,ldir)				@@\
  install::								@@\
  	MakeDir(Concat($(DESTDIR)$(LIBDIR)/,cdir))			@@\
! 	MakeDir(Concat($(VARDIR)/,mdir))				@@\
  	@MakeFlagsToShellFlags(i,set +e); \				@@\
  	if [ -d Concat($(DESTDIR)$(LIBDIR)/,cdir) ]; then \		@@\
  	  cd Concat($(DESTDIR)$(LIBDIR)/,cdir); \			@@\
! 	  if [ -d rdir -a ! -h rdir ]; then \ 				@@\
! 	    (cd rdir; tar cf - . | (cd Concat($(VARDIR)/,mdir); tar xf -; exit 0); exit 0); \ @@\
  	  fi; \								@@\
  	  $(RM) -r rdir; \						@@\
! 	  $(LN) Concat($(VARDIR)/,mdir) ldir; \				@@\
  	fi
  #else
  #define LinkVarDirectory(mdir,cdir,rdir,ldir)
--- 1317,1351 ----
  	for i in list; do (set -x; RemoveFile($$i); $(LN) sub/$$i .); done
  #endif
  
+ 
  /*
   * LinkVarDirectory
   *
   * Make links from $LIBDIR (<ProjectRoot>/lib/X11) to /var/X11/
!  * For example /usr/X11R6/lib/X11/xdm ==> /var/X11/xdm so that X can be
!  * run from a read-only volume like a CD-ROM.
!  *
!  * Since the link is used in the installation process, we need to
!  * make the link relative in order to honor $(DESTDIR) if it is set
   */
  #ifndef LinkVarDirectory
! #if HasVarDirectory && HasSymLinks
  #define LinkVarDirectory(mdir,cdir,rdir,ldir)				@@\
  install::								@@\
  	MakeDir(Concat($(DESTDIR)$(LIBDIR)/,cdir))			@@\
! 	MakeDir(Concat($(DESTDIR)$(VARDIR)/,mdir))			@@\
  	@MakeFlagsToShellFlags(i,set +e); \				@@\
  	if [ -d Concat($(DESTDIR)$(LIBDIR)/,cdir) ]; then \		@@\
+ 	  RELPATH=`echo Concat($(LIBDIR)/,cdir) | \			@@\
+ 		sed -e 's:^.::' -e 's:[^/.][^/]*:..:'g`; \		@@\
  	  cd Concat($(DESTDIR)$(LIBDIR)/,cdir); \			@@\
! 	  if [ -d rdir -a ! -h rdir ]; then \				@@\
! 	    (cd rdir; tar cf - . | \					@@\
! 		(cd Concat($(DESTDIR)$(VARDIR)/,mdir);\			@@\
! 		 tar xf -; exit 0); exit 0); \ 				@@\
  	  fi; \								@@\
  	  $(RM) -r rdir; \						@@\
! 	  $(LN) Concat($${RELPATH}$(VARDIR)/,mdir) ldir; \		@@\
  	fi
  #else
  #define LinkVarDirectory(mdir,cdir,rdir,ldir)
***************
*** 1256,1261 ****
--- 1370,1386 ----
  
  
  /*
+  * InstallLinkKitMultipleDestFlags - rule for installing server Link Kit files.
+  *                         (only used for XFree86). This is a no-op
+  *                         rule so that Imakefiles on non-XFree86 systems
+  *                         continue to build Makefiles correctly.
+  */
+ #ifndef InstallLinkKitMultipleDestFlags
+ #define InstallLinkKitMultipleDestFlags(list,dest,flags)
+ #endif
+ 
+ 
+ /*
   * InstallMultipleDest - generate rules to install multiple files at once
   * during a particular step in the build using any install flags set in 
   * $(INSTDATFLAGS).
***************
*** 1307,1315 ****
--- 1432,1444 ----
  #if HasClearmake
  #define IncludeMakefile(file) @@sinclude file
  #else
+ #if HasBsdMake
+ #define IncludeMakefile(file) @@# dependencies are in .depend
+ #else
  #define IncludeMakefile(file) /**/
  #endif
  #endif
+ #endif
  
  /*
   * DependDependencyStatement - Used by DependDependency to set up the
***************
*** 1360,1365 ****
--- 1489,1495 ----
  depend:: DependFileName							@@\
  									@@\
  DependFileName::							@@\
+ 	RemoveFile($@)							@@\
  	RunProgram(DEPEND,-f- $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- $(SRCS)) > $@
  #else /* HasMakefileSafeInclude */
  #define	DependTarget()							@@\
***************
*** 1381,1386 ****
--- 1511,1517 ----
  depend:: DependFileName							@@\
  									@@\
  DependFileName::							@@\
+ 	RemoveFile($@)							@@\
  	RunProgram(DEPEND,-f- $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- srcs1) > $@	@@\
  	RunProgram(DEPEND,-f- $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- srcs2) >> $@	@@\
  	RunProgram(DEPEND,-f- $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- srcs3) >> $@
***************
*** 1433,1439 ****
  NoCmpScript(ProgramTargetName($(IMAKE)) $(IMAKE).Osuf)			@@\
  									@@\
  ProgramTargetName($(IMAKE)) $(IMAKE).Osuf:				@@\
! 	-@(cd $(IMAKESRC); if [ -f Makefile ]; then \			@@\
  	echo "checking $@ in $(IMAKESRC) first..."; $(MAKE) all; else \	@@\
  	echo "bootstrapping $@ from Makefile.ini in $(IMAKESRC) first..."; \	@@\
  	$(MAKE) -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"; fi; \	@@\
--- 1564,1570 ----
  NoCmpScript(ProgramTargetName($(IMAKE)) $(IMAKE).Osuf)			@@\
  									@@\
  ProgramTargetName($(IMAKE)) $(IMAKE).Osuf:				@@\
! 	-@(cd $(IMAKESRC) && if [ -f Makefile ]; then \			@@\
  	echo "checking $@ in $(IMAKESRC) first..."; $(MAKE) all; else \	@@\
  	echo "bootstrapping $@ from Makefile.ini in $(IMAKESRC) first..."; \	@@\
  	$(MAKE) -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"; fi; \	@@\
***************
*** 1520,1526 ****
   */
  #ifndef ProjectUnsharedLibReferences
  #define ProjectUnsharedLibReferences(varname,libname,libsource,buildlibdir)	@@\
! Concat3(DEP,varname,LIB) = _UseCat($(USRLIBDIR)/lib,buildlibdir/lib,libname.a)	@@\
  Concat(varname,LIB) = LoaderLibPrefix Concat(-l,libname)		@@\
  LintLibReferences(varname,libname,libsource)
  #endif
--- 1651,1657 ----
   */
  #ifndef ProjectUnsharedLibReferences
  #define ProjectUnsharedLibReferences(varname,libname,libsource,buildlibdir)	@@\
! Concat3(DEP,varname,LIB) = _UseCat($(USRLIBDIR)/,buildlibdir/,LibraryTargetName(libname))	@@\
  Concat(varname,LIB) = LoaderLibPrefix Concat(-l,libname)		@@\
  LintLibReferences(varname,libname,libsource)
  #endif
***************
*** 1611,1628 ****
--- 1742,1771 ----
   * LibObjCompile - compile fragment for unshared/profiled/debugged objects
   */
  #ifndef LibObjCompile
+ #if HasGcc || HasGcc2
+ #define LibObjCompile(dir,options) RemoveFiles($@ dir/$@)		@@\
+ 	ClearmakeOSName \
+ 	$(CC) -c $(CCOPTIONS) $(ALLDEFINES) options $*.c -o dir/$@
+ #else
  #define LibObjCompile(dir,options) RemoveFiles($@ dir/$@)		@@\
  	ClearmakeOSName \
  	$(CC) -c $(CCOPTIONS) $(ALLDEFINES) options $*.c		@@\
  	$(MV) $@ dir/$@
  #endif
+ #endif
  
  #ifndef LibObjCplusplusCompile
+ #if HasGcc || HasGcc2
+ #define LibObjCplusplusCompile(dir,options) RemoveFiles($@ dir/$@)	@@\
+ 	ClearmakeOSName \
+ 	$(CXX) -c $(CXXOPTIONS) $(CXXDEFINES) options $*.CCsuf -o dir/$@
+ #else
  #define LibObjCplusplusCompile(dir,options) RemoveFiles($@ dir/$@)	@@\
  	ClearmakeOSName \
  	$(CXX) -c $(CXXOPTIONS) $(CXXDEFINES) options $*.CCsuf		@@\
  	$(MV) $@ dir/$@
  #endif
+ #endif
  
  /*
   * DebuggedLibObjCompile - compile fragment for debugged objects
***************
*** 1727,1732 ****
--- 1870,1877 ----
  									@@\
  SpecialCObjectRule(dst,NullParameter,flags)				@@\
  									@@\
+ includes:: dst.c							@@\
+ 									@@\
  depend::  dst.c								@@\
  									@@\
  clean::									@@\
***************
*** 1756,1761 ****
--- 1901,1922 ----
  #endif /* LexFile */
  
  #ifndef YaccFile
+ #if HasGnuMake
+ #define YaccFile(file,flags)						@@\
+ depend:: file.c								@@\
+ 									@@\
+ file.h: file.c								@@\
+ 									@@\
+ file.c: file.y								@@\
+ 	ClearmakeOSName \
+ 	$(YACC) flags file.y						@@\
+ 	$(MV) y.tab.c file.c						@@\
+ 	@if [ -f y.tab.h ]; then set -x; $(MV) y.tab.h file.h; \	@@\
+ 	else exit 0; fi							@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(y.tab.c y.tab.h file.h file.c)
+ #else
  #define YaccFile(file,flags)						@@\
  depend:: file.c								@@\
  									@@\
***************
*** 1768,1773 ****
--- 1929,1935 ----
  									@@\
  clean::									@@\
  	RemoveFiles(y.tab.c y.tab.h file.h file.c)
+ #endif
  #endif /* YaccFile */
  
  #ifndef YaccFileNoFlags
***************
*** 2085,2093 ****
  #define MakeSubincludesForBuild(step,dir,srclist)			@@\
  step::  dir srclist							@@\
  	@-(list=`echo srclist | sed -e 's/[^ ]*\///g'`; \		@@\
! 		set -x; cd dir; RemoveFiles($$list))			@@\
  	@for i in srclist; do \						@@\
! 		(set -x; cd dir; $(LN) ../$$i .); \			@@\
  	done								@@\
  									@@\
  dir::									@@\
--- 2247,2255 ----
  #define MakeSubincludesForBuild(step,dir,srclist)			@@\
  step::  dir srclist							@@\
  	@-(list=`echo srclist | sed -e 's/[^ ]*\///g'`; \		@@\
! 		set -x; cd dir && RemoveFiles($$list))			@@\
  	@for i in srclist; do \						@@\
! 		(set -x; cd dir && $(LN) ../$$i .); \			@@\
  	done								@@\
  									@@\
  dir::									@@\
***************
*** 2096,2102 ****
  clean::									@@\
  	@-(if [ -d dir ]; then \					@@\
  		list=`echo srclist | sed -e 's/[^ ]*\///g'`; \		@@\
! 		set -x; cd dir; RemoveFile($$list); else exit 0; fi)
  #endif
  
  
--- 2258,2264 ----
  clean::									@@\
  	@-(if [ -d dir ]; then \					@@\
  		list=`echo srclist | sed -e 's/[^ ]*\///g'`; \		@@\
! 		set -x; cd dir && RemoveFile($$list); else exit 0; fi)
  #endif
  
  
***************
*** 2144,2150 ****
  	for i in dirs ;\						@@\
  	do \								@@\
  		echo verb "in $(CURRENT_DIR)/$$i..."; \			@@\
! 		(cd $$i &&  $(MAKE) $(MFLAGS) flags subname); \		@@\
  	done
  #endif
  
--- 2306,2312 ----
  	for i in dirs ;\						@@\
  	do \								@@\
  		echo verb "in $(CURRENT_DIR)/$$i..."; \			@@\
! 		MakeNamedTargetSubdir($$i,flags,subname); \		@@\
  	done
  #endif
  
***************
*** 2181,2192 ****
   * ForceSubdirs - force make to build subdirectories
   */
  #ifndef ForceSubdirs
  #define ForceSubdirs(dirs)						@@\
  dirs: FRC								@@\
  	@cd $@ ; echo "making all in $(CURRENT_DIR)/$@..."; \		@@\
  	$(MAKE) $(MFLAGS) PassCDebugFlags all				@@\
  									@@\
! FRC:
  #endif /* ForceSubdirs */
  
  /*
--- 2343,2364 ----
   * ForceSubdirs - force make to build subdirectories
   */
  #ifndef ForceSubdirs
+ #if !HasBsdMake
  #define ForceSubdirs(dirs)						@@\
  dirs: FRC								@@\
+ 	@echo "making all in $(CURRENT_DIR)/$@..."			@@\
+ 	@MakeNamedTargetSubdir($@,PassCDebugFlags,all)			@@\
+ 									@@\
+ FRC:
+ #else
+ /* For BSD 4.4 make */
+ #define ForceSubdirs(dirs)						@@\
+ dirs: .EXEC								@@\
  	@cd $@ ; echo "making all in $(CURRENT_DIR)/$@..."; \		@@\
  	$(MAKE) $(MFLAGS) PassCDebugFlags all				@@\
  									@@\
! .EXEC:
! #endif
  #endif /* ForceSubdirs */
  
  /*
***************
*** 2296,2302 ****
  #define MakeMakeSubdirs(dirs,target)					@@\
  $(ONESUBDIR)/Makefile:							@@\
  	@MakeFlagsToShellFlags(n,executeit="no"); \			@@\
! 	cd $(ONESUBDIR); \						@@\
  	if [ "$$executeit" != "no" ]; then \				@@\
  		ImakeSubCmdHelper -DTOPDIR=$(IMAKETOP) -DCURDIR=$(ONECURDIR)$(ONESUBDIR); \ @@\
  	fi;								@@\
--- 2468,2474 ----
  #define MakeMakeSubdirs(dirs,target)					@@\
  $(ONESUBDIR)/Makefile:							@@\
  	@MakeFlagsToShellFlags(n,executeit="no"); \			@@\
! 	cd $(ONESUBDIR) && \						@@\
  	if [ "$$executeit" != "no" ]; then \				@@\
  		ImakeSubCmdHelper -DTOPDIR=$(IMAKETOP) -DCURDIR=$(ONECURDIR)$(ONESUBDIR); \ @@\
  	fi;								@@\
***************
*** 2348,2356 ****
  			fi; \						@@\
  		fi; \							@@\
  		$(MAKE) $(MFLAGS) $(MAKE_OPTS) ONESUBDIR=$$i ONECURDIR=$$curdir IMAKETOP=$$imaketop IMAKEPREFIX=$$imakeprefix $$i/Makefile; \	@@\
! 		cd $$i;	\						@@\
! 		$(MAKE) $(MFLAGS) Makefiles; \				@@\
! 		cd $$newtop; \						@@\
  	done
  
  #ifdef UseInstalled
--- 2520,2532 ----
  			fi; \						@@\
  		fi; \							@@\
  		$(MAKE) $(MFLAGS) $(MAKE_OPTS) ONESUBDIR=$$i ONECURDIR=$$curdir IMAKETOP=$$imaketop IMAKEPREFIX=$$imakeprefix $$i/Makefile; \	@@\
! 		if [ -d $$i ] ; then \					@@\
! 			cd $$i; \					@@\
! 			$(MAKE) $(MFLAGS) Makefiles; \			@@\
! 			cd $$newtop; \					@@\
! 		else \							@@\
! 			exit 1; \					@@\
! 		fi; \							@@\
  	done
  
  #ifdef UseInstalled
***************
*** 2447,2453 ****
  step::									@@\
  	DirFailPrefix@MakeFlagsToShellFlags(i,set +e); \		@@\
  	for i in dirs; do if [ -d $(DESTDIR)$$i ]; then \		@@\
! 		set +x; else (set -x; $(MKDIRHIER) $(DESTDIR)$$i); fi \	@@\
  	done
  #endif /* MakeDirectories */
  
--- 2623,2629 ----
  step::									@@\
  	DirFailPrefix@MakeFlagsToShellFlags(i,set +e); \		@@\
  	for i in dirs; do if [ -d $(DESTDIR)$$i ]; then \		@@\
! 		set +x; else (set -x; $(MKDIRHIER) $(DESTDIR)$$i); fi; \ @@\
  	done
  #endif /* MakeDirectories */
  
***************
*** 2463,2465 ****
--- 2639,2655 ----
  #ifdef DefineOldLibraryRules
  #include <oldlib.rules>
  #endif
+ 
+ #ifndef StaticLibrary
+ #define StaticLibrary(libpath,libname) Concat3(libpath,/,LibraryTargetName(libname))
+ #endif
+ 
+ /*
+  * MakeMutex - generate mutex rules for parallel make
+  */
+ #ifndef MakeMutex
+ #ifdef MutexDirective
+ #define MakeMutex(targets)						@@\
+ MutexDirective:	targets
+ #endif /* MutexDirective */
+ #endif /* MakeMutex */
*** motif.orig/config/cf/Imake.tmpl	Fri Apr 28 11:03:58 2000
--- motif/config/cf/Imake.tmpl	Sat Jun  3 18:41:42 2000
***************
*** 1,7 ****
  XCOMM ----------------------------------------------------------------------
  XCOMM Makefile generated from IMAKE_TEMPLATE and INCLUDE_IMAKEFILE
! XCOMM $TOG: Imake.tmpl /main/249 1997/10/13 15:28:56 kaleb $
  XCOMM
  
  /*
   * generic imake template
--- 1,12 ----
  XCOMM ----------------------------------------------------------------------
  XCOMM Makefile generated from IMAKE_TEMPLATE and INCLUDE_IMAKEFILE
! XCOMM $TOG: Imake.tmpl /main/245 1997/05/20 10:05:47 kaleb $
  XCOMM
+ XCOMM
+ XCOMM
+ XCOMM
+ XCOMM $XFree86: xc/config/cf/Imake.tmpl,v 3.32.2.12 1999/01/09 14:18:57 dawes Exp $
+ XCOMM ----------------------------------------------------------------------
  
  /*
   * generic imake template
***************
*** 97,102 ****
--- 102,113 ----
  
  /* the following are needed before we can include Imake.rules */
  
+ #ifndef HasVarDirectory
+ #define HasVarDirectory		NO
+ #endif
+ #ifndef HasSymLinks
+ #define HasSymLinks		YES
+ #endif
  #ifndef SystemV
  #define SystemV			NO	/* SYSV (R3) */
  #endif
***************
*** 115,120 ****
--- 126,140 ----
  #ifndef HasTestCenter
  #define HasTestCenter		NO
  #endif
+ #ifndef HasBsdMake
+ #define HasBsdMake		NO
+ #endif
+ #ifndef HasGnuMake
+ #define HasGnuMake		NO
+ #endif
+ #ifndef HasParallelMake
+ #define HasParallelMake		NO
+ #endif
  #ifndef RemoveTargetProgramByMoving
  #define RemoveTargetProgramByMoving NO
  #endif
***************
*** 134,148 ****
  #endif
  
  #ifndef HasMakefileSafeInclude	    /* -include or sinclude in a Makefile */
! #if HasClearmake
! #define HasMakefileSafeInclude	YES
  #else
! #define HasMakefileSafeInclude	NO   /* see also vendor-specific .cf files */
! #endif
  #endif
- 
- #ifndef HasVarDirectory
- #define HasVarDirectory		YES
  #endif
  
  #include <Imake.rules>
--- 154,164 ----
  #endif
  
  #ifndef HasMakefileSafeInclude	    /* -include or sinclude in a Makefile */
! #if HasClearmake || HasBsdMake
! #define HasMakefileSafeInclude YES
  #else
! #define HasMakefileSafeInclude NO   /* see also vendor-specific .cf files */
  #endif
  #endif
  
  #include <Imake.rules>
***************
*** 156,166 ****
--- 172,189 ----
  #ifndef OSMinorVersion
  #define OSMinorVersion          0
  #endif
+ #ifndef OSTeenyVersion
+ #define OSTeenyVersion          0
+ #endif
  #ifndef UnalignedReferencesAllowed
  #define UnalignedReferencesAllowed NO	/* if arbitrary deref is okay */
  #endif
  #ifndef AvoidNullMakeCommand
+ #if !HasBsdMake
  #define AvoidNullMakeCommand NO
+ #else
+ #define AvoidNullMakeCommand YES
+ #endif
  #endif
  #if AvoidNullMakeCommand
  #ifndef NullMakeCommand
***************
*** 237,242 ****
--- 260,271 ----
  #ifndef HasBsearch
  #define HasBsearch		YES	/* assume yes */
  #endif
+ #ifndef HasSnprintf
+ #define HasSnprintf		NO	/* assume not */
+ #endif
+ #ifndef HasMkstemp
+ #define HasMkstemp		NO	/* assume not */
+ #endif
  #ifndef HasFortran
  #define HasFortran		NO
  #endif
***************
*** 275,280 ****
--- 304,315 ----
  #ifndef HasZlib
  #define HasZlib			NO
  #endif
+ #if !HasZlib		/* if OS doesn't have it, we'll build it */
+ #undef GzipLibrary	/* GzipLibrary was valid only if HasZlib */
+ #endif
+ #ifndef GzipLibrary	/* if OS config didn't define it, assume it's -lz */
+ #define GzipLibrary -lz
+ #endif
  #if HasKrb5
  #ifndef Krb5Includes
  #define Krb5Includes -I/krb5/include
***************
*** 288,293 ****
--- 323,474 ----
  #undef Krb5Libraries
  #define Krb5Libraries /**/
  #endif
+ #ifndef UseGnuMalloc
+ #define UseGnuMalloc		NO
+ #endif
+ #ifndef GnuMallocLibrary
+ #define GnuMallocLibrary -lgmalloc
+ #endif
+ #ifndef MallocLibraries
+ #if UseGnuMalloc
+ #define MallocLibraries	GnuMallocLibrary
+ #else
+ #define MallocLibraries	/**/
+ #endif
+ #endif
+ #ifndef HasTk
+ #define HasTk NO
+ #endif
+ #ifndef TkLibName
+ #if HasTk
+ #define TkLibName tk
+ #else
+ #define TkLibName
+ #endif
+ #endif
+ TKLIBNAME = TkLibName
+ #ifndef TkLibDir
+ #if HasTk
+ #define TkLibDir /usr/local/lib
+ #else
+ #define TkLibDir
+ #endif
+ #endif
+ TKLIBDIR = TkLibDir
+ #ifndef TkIncDir
+ #if HasTk
+ #define TkIncDir /usr/local/include
+ #else
+ #define TkIncDir
+ #endif
+ #endif
+ #ifndef TkLibrary
+ #ifdef HasTk
+ #define TkLibrary Concat(-L,$(TKLIBDIR)) Concat(-l,$(TKLIBNAME))
+ #else
+ #define TkLibrary
+ #endif
+ #endif
+ #ifndef HasTcl
+ #define HasTcl NO
+ #endif
+ #ifndef TclLibName
+ #if HasTcl
+ #define TclLibName tcl
+ #else
+ #define TclLibName
+ #endif
+ #endif
+ TCLLIBNAME = TclLibName
+ #ifndef TclLibDir
+ #if HasTcl
+ #define TclLibDir /usr/local/lib
+ #else
+ #define TclLibDir
+ #endif
+ #endif
+ TCLIBDIR = TclLibDir
+ #ifndef TclIncDir
+ #if HasTcl
+ #define TclIncDir /usr/local/include
+ #else
+ #define TclIncDir
+ #endif
+ #endif
+ #ifndef TclLibrary
+ #ifdef HasTcl
+ #define TclLibrary Concat(-L,$(TCLLIBDIR)) Concat(-l,$(TCLLIBNAME))
+ #else
+ #define TclLibrary
+ #endif
+ #endif
+ /* Japanese version of Tk anc Tcl */
+ #ifndef HasJpTk
+ #define HasJpTk NO
+ #endif
+ #ifndef JpTkLibName
+ #if HasJpTk
+ #define JpTkLibName tkjp
+ #else
+ #define JpTkLibName
+ #endif
+ #endif
+ JPTKLIBNAME = JpTkLibName
+ #ifndef JpTkLibDir
+ #if HasJpTk
+ #define JpTkLibDir /usr/local/lib
+ #else
+ #define JpTkLibDir
+ #endif
+ #endif
+ JPTKLIBDIR = JpTkLibDir
+ #ifndef JpTkIncDir
+ #if HasJpTk
+ #define JpTkIncDir /usr/local/include/jp
+ #else
+ #define JpTkIncDir
+ #endif
+ #endif
+ #ifndef JpTkLibrary
+ #ifdef HasJpTk
+ #define JpTkLibrary Concat(-L,$(JPTKLIBDIR)) Concat(-l,$(JPTKLIBNAME))
+ #else
+ #define JpTkLibrary
+ #endif
+ #endif
+ #ifndef HasJpTcl
+ #define HasJpTcl NO
+ #endif
+ #ifndef JpTclLibName
+ #if HasJpTcl
+ #define JpTclLibName tcljp
+ #else
+ #define JpTclLibName
+ #endif
+ #endif
+ JPTCLLIBNAME = JpTclLibName
+ #ifndef JpTclLibDir
+ #if HasJpTcl
+ #define JpTclLibDir /usr/local/lib
+ #else
+ #define JpTclLibDir
+ #endif
+ #endif
+ JPTCLIBDIR = JpTclLibDir
+ #ifndef JpTclIncDir
+ #if HasJpTcl
+ #define JpTclIncDir /usr/local/include/jp
+ #else
+ #define JpTclIncDir
+ #endif
+ #endif
+ #ifndef JpTclLibrary
+ #ifdef HasJpTcl
+ #define JpTclLibrary Concat(-L,$(JPTCLLIBDIR)) Concat(-l,$(JPTCLLIBNAME))
+ #else
+ #define JpTclLibrary
+ #endif
+ #endif
  #ifndef NeedConstPrototypes
  #define NeedConstPrototypes	NO
  #endif
***************
*** 310,315 ****
--- 491,499 ----
  #ifndef UseCCMakeDepend			/* use slow cc -E script */
  #define UseCCMakeDepend NO
  #endif
+ #ifndef UseGccMakeDepend		/* use slowish but correct gcc -M */
+ #define UseGccMakeDepend NO
+ #endif
  
  /* DefaultUsrBin is independent of ProjectRoot.
     This is a directory where programs will be found even if PATH
***************
*** 335,340 ****
--- 519,532 ----
  #define AlternateUsrLibDir YES
  #endif
  #endif
+ #ifndef VarLibDir
+ #ifdef ProjectVar
+ #define VarLibDir Concat(ProjectVar,/lib)
+ #else
+ #define VarLibDir /var/lib
+ #endif
+ #endif
+ 
  #ifndef ShLibDir
  #define ShLibDir UsrLibDir
  #endif
***************
*** 394,400 ****
  #define ConfigSrc $(TOP)/config
  #endif
  #ifndef DependDir
! #if UseCCMakeDepend
  #define DependDir $(CONFIGSRC)/util
  #else
  #define DependDir $(CONFIGSRC)/makedepend
--- 586,592 ----
  #define ConfigSrc $(TOP)/config
  #endif
  #ifndef DependDir
! #if UseCCMakeDepend || UseGccMakeDepend
  #define DependDir $(CONFIGSRC)/util
  #else
  #define DependDir $(CONFIGSRC)/makedepend
***************
*** 463,468 ****
--- 655,666 ----
  #ifndef InstKmemFlags     /* put -g kmem -m 2711 in site.def... */
  #define InstKmemFlags InstUidFlags
  #endif
+ #ifndef HasStickyDirBit
+ #define HasStickyDirBit	YES
+ #endif
+ #ifndef ParallelMakeFlags
+ #define ParallelMakeFlags /**/
+ #endif
  #ifndef ArCmdBase
  #define ArCmdBase ar
  #endif
***************
*** 629,637 ****
  #ifndef CpCmd
  #define CpCmd cp
  #endif
- #ifndef HasSymLinks
- #define HasSymLinks YES
- #endif
  #ifndef LnCmd /* can use cp instead of ln if necessary */
  #if HasSymLinks
  #define LnCmd ln -s
--- 827,832 ----
***************
*** 643,649 ****
  #define MakeCmd make
  #endif
  #ifndef MvCmd
! #define MvCmd mv
  #endif
  #ifndef RanlibCmd
  #define RanlibCmd ranlib
--- 838,844 ----
  #define MakeCmd make
  #endif
  #ifndef MvCmd
! #define MvCmd mv -f
  #endif
  #ifndef RanlibCmd
  #define RanlibCmd ranlib
***************
*** 672,679 ****
--- 867,878 ----
  #define StandardCppDefines StandardDefines
  #endif
  #ifndef Malloc0ReturnsNull
+ #if UseGnuMalloc
+ #define Malloc0ReturnsNull YES
+ #else
  #define Malloc0ReturnsNull NO
  #endif
+ #endif
  #if Malloc0ReturnsNull
  #ifndef Malloc0ReturnsNullDefines
  #define Malloc0ReturnsNullDefines -DMALLOC_0_RETURNS_NULL
***************
*** 757,773 ****
--- 956,984 ----
  #endif
  #endif
  #ifndef DependCmd
+ #if UseGccMakeDepend
+ #ifdef UseInstalled		/* assume BINDIR in path */
+ #define DependCmd gccmakedep
+ #else
+ #define DependCmd $(DEPENDSRC)/gccmakedep
+ #endif
+ #else
  #ifdef UseInstalled		/* assume BINDIR in path */
  #define DependCmd makedepend
  #else
  #define DependCmd $(DEPENDSRC)/makedepend
  #endif
  #endif
+ #endif
  #ifndef DependFlags
  #define DependFlags /**/
  #endif
  #ifndef DependFileName
+ #if !HasBsdMake
  #define DependFileName Makefile.dep
+ #else
+ #define DependFileName .depend
+ #endif
  #endif
  #ifndef ExportListCmd
  # ifndef ExportListGenSource
***************
*** 786,792 ****
  #endif
  #endif
  #ifndef TroffCmd
! #define TroffCmd psroff
  #endif
  #ifndef NroffCmd
  #define NroffCmd nroff
--- 997,1003 ----
  #endif
  #endif
  #ifndef TroffCmd
! #define TroffCmd groff -Tps
  #endif
  #ifndef NroffCmd
  #define NroffCmd nroff
***************
*** 809,814 ****
--- 1020,1028 ----
  #ifndef ColCmd
  #define ColCmd col
  #endif
+ #ifndef ColFlags
+ #define ColFlags -b
+ #endif
  #ifndef DvipsCmd
  #define DvipsCmd dvips
  #endif
***************
*** 848,853 ****
--- 1062,1070 ----
  #ifndef CCsuf
  #define CCsuf cc
  #endif
+ #ifndef SHsuf
+ #define SHsuf sh
+ #endif
  #ifndef ManSuffix
  #define ManSuffix	n		/* use just one tab or cpp will die */
  #endif
***************
*** 884,889 ****
--- 1101,1109 ----
  #ifndef SiteIConfigFiles
  #define SiteIConfigFiles /**/
  #endif
+ #ifndef OtherIConfigFiles
+ #define OtherIConfigFiles /**/
+ #endif
  #ifndef ExtraFilesToClean
  #define ExtraFilesToClean /**/
  #endif
***************
*** 907,912 ****
--- 1127,1133 ----
  
            INCROOT = IncRoot		/* base of where to put header files */
          USRLIBDIR = UsrLibDir		/* nonshared libraries */
+         VARLIBDIR = VarLibDir		/* xdm runtime files */
           SHLIBDIR = ShLibDir            /* shared libraries */
         LINTLIBDIR = LintlibDir		/* lint libraries */
            MANPATH = ManPath		/* top of manual page tree */
***************
*** 978,983 ****
--- 1199,1205 ----
                EQN = EqnCmd
               NEQN = NeqnCmd
                COL = ColCmd
+          COLFLAGS = ColFlags
  #if HasLatex
              DVIPS = DvipsCmd
              LATEX = LatexCmd
***************
*** 999,1005 ****
        STD_DEFINES = StandardDefines $(PROJECT_DEFINES)
   EXTRA_LOAD_FLAGS = ExtraLoadFlags
    EXTRA_LDOPTIONS = ExtraLoadOptions
!   EXTRA_LIBRARIES = ExtraLibraries Krb5Libraries
               TAGS = TagsCmd
  #if ConstructMFLAGS
             MFLAGS = -$(MAKEFLAGS)
--- 1221,1227 ----
        STD_DEFINES = StandardDefines $(PROJECT_DEFINES)
   EXTRA_LOAD_FLAGS = ExtraLoadFlags
    EXTRA_LDOPTIONS = ExtraLoadOptions
!   EXTRA_LIBRARIES = MallocLibraries ExtraLibraries Krb5Libraries
               TAGS = TagsCmd
  #if ConstructMFLAGS
             MFLAGS = -$(MAKEFLAGS)
***************
*** 1007,1012 ****
--- 1229,1235 ----
  #if ConstructMAKEFLAGS
          MAKEFLAGS = $(MFLAGS)
  #endif
+    PARALLELMFLAGS = ParallelMakeFlags
  #if HasSharedLibraries
      SHAREDCODEDEF = SharedCodeDef
           SHLIBDEF = SharedLibraryDef
***************
*** 1139,1144 ****
--- 1362,1385 ----
     LDCOMBINEFLAGS = LdCombineFlags
        DEPENDFLAGS = DependFlags
  
+ XCOMM Not sure this belongs here
+          TKLIBDIR = TkLibDir
+          TKINCDIR = TkIncDir
+         TKLIBNAME = TkLibName
+         TKLIBRARY = TkLibrary
+         TCLLIBDIR = TclLibDir
+         TCLINCDIR = TclIncDir
+        TCLLIBNAME = TclLibName
+        TCLLIBRARY = TclLibrary
+        JPTKLIBDIR = JpTkLibDir
+        JPTKINCDIR = JpTkIncDir
+       JPTKLIBNAME = JpTkLibName
+       JPTKLIBRARY = JpTkLibrary
+       JPTCLLIBDIR = JpTclLibDir
+       JPTCLINCDIR = JpTclIncDir
+      JPTCLLIBNAME = JpTclLibName
+      JPTCLLIBRARY = JpTclLibrary
+ 
          MACROFILE = MacroFile
             RM_CMD = $(RM)
  
***************
*** 1157,1163 ****
  	even one config file, say site.def or host.def, changes. */
       ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/X11.tmpl \
  			$(IRULESRC)/site.def $(IRULESRC)/$(MACROFILE) \
! 			SiteIConfigFiles $(EXTRA_ICONFIGFILES)
  #endif
  
  #ifndef TopLevelProject
--- 1398,1404 ----
  	even one config file, say site.def or host.def, changes. */
       ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/X11.tmpl \
  			$(IRULESRC)/site.def $(IRULESRC)/$(MACROFILE) \
! 			OtherIConfigFiles SiteIConfigFiles $(EXTRA_ICONFIGFILES)
  #endif
  
  #ifndef TopLevelProject
*** motif.orig/config/cf/isc.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/isc.cf	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/isc.cf,v 3.9 1996/09/01 04:12:51 dawes Exp $
  
  #ifndef HasGcc2
  #define HasGcc2			YES
--- 2,8 ----
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/isc.cf,v 3.11.2.1 1998/02/15 16:08:33 hohndel Exp $
  
  #ifndef HasGcc2
  #define HasGcc2			YES
***************
*** 10,16 ****
  
  /* INTERACTIVE UNIX SYSTEM (IUS) Version 3.x 4.x */
  
! #if IscVersion == 400
  # define ISCVerDef -DISC40 -DISC30
  # define OSVendor		(IUS Version 4.x)
  #else
--- 10,16 ----
  
  /* INTERACTIVE UNIX SYSTEM (IUS) Version 3.x 4.x */
  
! #if IscVersion > 300
  # define ISCVerDef -DISC40 -DISC30
  # define OSVendor		(IUS Version 4.x)
  #else
***************
*** 28,44 ****
  # endif
  #endif
  
  #ifdef UsePosix
  # define PosixDefines		-posix -D_SYSV3 -D_POSIX_SOURCE 
  #else
  # define PosixDefines
  #endif
  
! #define OSDefines		-DISC ISCVerDef
  
  #define OSName			Unix System V/386 Release 3.2
  #define OSMajorVersion		3
  #define OSMinorVersion		2
  
  /* Note, cpp already does -Di386 */
  #define BootstrapCFlags		OSDefines -DSYSV
--- 28,105 ----
  # endif
  #endif
  
+ /* gcc 2.7.2 tested Optimization Flags                               */
+ #ifndef DefaultGcc2i386Opt
+ # define DefaultGcc2i386Opt	-m486 -O2 -fno-strength-reduce -malign-loops=2 -malign-jumps=2 -malign-functions=2
+ /* -fomit-frame-pointer */ 
+ #endif
+ 
+ /* For a POSIXized build on Interactive maybe needed to use gcc2.7.2 */
+ #ifndef UsePosix
+ # define UsePosix		YES
+ #endif
+ 
+ /* ISC 4.1Mu 
+ #define IscCompileVersion	410
+ */
+ 
+ #if !defined(IscCompileVersion) && IscVersion < 410
+ /* ISC 4.0 compatible */
+ #define IscCompileVersion	400
+ #endif
+ 
+ #if IscCompileVersion == 400
+ 
+ /* binaries which should run on ISC 4.0 or for the build on a real 4.0 System */
+ # define UseChmod		YES
+ 
+ /* for compatibility with ISC 4.0 - reported by Ami Fischmann            */
+ /* troubles when linking with libX11.a build on ISC4.1 and used with 4.0 */
+ # define HasSnprintf		NO
+ # define UseXwctomb		YES
+ 
+ #endif
+ 
+ #if defined(UseXwctomb)
+ # define XwctombDefine	-DUSE_XMBTOWC 
+ #else
+ # define XwctombDefine	
+ #endif 
+ 
+ #if defined(UseChmod)
+ # define IscCompatDefines	XwctombDefine -DUSE_CHMOD
+ #else
+ # define IscCompatDefines	XwctombDefine
+ #endif 
+ 
  #ifdef UsePosix
  # define PosixDefines		-posix -D_SYSV3 -D_POSIX_SOURCE 
  #else
  # define PosixDefines
  #endif
  
! #define OSDefines		-DISC ISCVerDef IscCompatDefines
  
+ /*
  #define OSName			Unix System V/386 Release 3.2
  #define OSMajorVersion		3
  #define OSMinorVersion		2
+ */
+ #ifndef OSMajorVersion
+ #define OSMajorVersion		DefaultOSMajorVersion
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion		DefaultOSMinorVersion
+ #endif
+ #ifndef OSTeenyVersion
+ #define OSTeenyVersion		DefaultOSTeenyVersion
+ #endif
+ 
+ #ifndef OSName
+ #define OSName			INTERACTIVE UNIX System V/386 Release 3.2
+ #endif
+ 
+ XCOMM operating system: OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
  
  /* Note, cpp already does -Di386 */
  #define BootstrapCFlags		OSDefines -DSYSV
***************
*** 54,60 ****
--- 115,125 ----
  #define SocketLibraries		-linet
  
  #ifndef GnuMallocLibrary
+ #ifndef UseIscLd
  # define GnuMallocLibrary	-L/usr/local/lib -lgmalloc
+ #else
+ # define GnuMallocLibrary       /usr/local/lib/libgmalloc.a
+ #endif
  #endif
  
  #ifndef MallocLibrary
***************
*** 76,84 ****
--- 141,166 ----
  /* Don't know if this is necessary, but it avoids breaking the current setup */
  #define MallocLibraries		/**/
  
+ #if UseXwctomb
+ #define XawI18nDefines		-DUSE_XWCHAR_STRING
+ #else
  #define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
+ #endif
  
+ #if HasCbrt
+ #define MathLibrary -loptm
+ #endif
+ 
+ #ifdef UseInlineMath
+ #define InlineMathDefines	-DUseInlineMath
+ #if !HasCbrt
+ #define ServerExtraSysLibs	$(CBRT) MathLibrary
+ #endif
+ #endif
+ 
+ #ifndef ServerExtraSysLibs
  #define ServerExtraSysLibs	$(CBRT)
+ #endif
  
  #define ServerExtraDefines	SVR3mmapFlags XFree86ServerDefines
  
***************
*** 89,95 ****
--- 171,180 ----
  #endif
  
  #define HasShm			YES
+ 
+ #ifndef HasSnprintf
  #define HasSnprintf		YES
+ #endif
  
  #ifndef HasLibCrypt
  #define HasLibCrypt		YES
***************
*** 98,106 ****
  
  #ifndef DefaultCDebugFlags
  # if HasGcc2
! #  define DefaultCDebugFlags DefaultGcc2i386Opt PosixDefines
  # else
! #  define DefaultCDebugFlags -O PosixDefines
  # endif
  #endif
  
--- 183,191 ----
  
  #ifndef DefaultCDebugFlags
  # if HasGcc2
! #  define DefaultCDebugFlags DefaultGcc2i386Opt PosixDefines InlineMathDefines
  # else
! #  define DefaultCDebugFlags -O PosixDefines InlineMathDefines
  # endif
  #endif
  
*** motif.orig/config/cf/Library.tmpl	Fri Apr 28 11:03:58 2000
--- motif/config/cf/Library.tmpl	Sat Jun  3 18:49:34 2000
***************
*** 16,21 ****
--- 16,26 ----
  
  XCOMM $TOG: Library.tmpl /main/44 1997/04/28 11:47:53 kaleb $
  
+ 
+ 
+ 
+ XCOMM $XFree86: xc/config/cf/Library.tmpl,v 3.5.2.3 1998/11/06 23:14:02 dawes Exp $
+ 
  #ifndef LibraryCplusplusOptions
  # if DoSharedLib && defined(SharedLibraryCplusplusOptions)
  #  define LibraryCplusplusOptions SharedLibraryCplusplusOptions
***************
*** 152,157 ****
--- 157,178 ----
  #endif
  #endif
  
+ #ifndef DoExtraLib
+ #define DoExtraLib NO
+ #endif
+ 
+ #if DoExtraLib && defined(ExtraLibRules)
+ # define _ExtraLibMkdir() ExtraLibMkdir()
+ # define _ExtraObjCompile(options) ExtraObjCompile(options)
+ # define _ExtraObjCplusplusCompile(options) ExtraObjCplusplusCompile(options)
+ # define _ExtraCleanDir() ExtraCleanDir()
+ #else
+ # define _ExtraLibMkdir() $(_NULLCMD_)
+ # define _ExtraObjCompile(options) $(_NULLCMD_)
+ # define _ExtraObjCplusplusCompile(options) $(_NULLCMD_)
+ # define _ExtraCleanDir() $(_NULLCMD_)
+ #endif
+ 
  #ifndef CplusplusSource
  # define SRCsuf c
  #else
***************
*** 166,171 ****
--- 187,193 ----
  	_DebuggedObjCompile(options)					@@\
  	_ProfiledObjCompile(options)					@@\
  	_NormalObjCompile(options)					@@\
+ 	_ExtraObjCompile(options)					@@\
  	_SharedObjCompile(options)
  
  #ifdef CplusplusSource
***************
*** 174,179 ****
--- 196,202 ----
  	_DebuggedObjCplusplusCompile(options)				@@\
  	_ProfiledObjCplusplusCompile(options)				@@\
  	_NormalObjCplusplusCompile(options)				@@\
+ 	_ExtraObjCplusplusCompile(options)				@@\
  	_SharedObjCplusplusCompile(options)
  #else
  # define _CompileObjCplusplus(target, options)
***************
*** 185,195 ****
--- 208,220 ----
  	_DebuggedLibMkdir()						@@\
  	_ProfiledLibMkdir()						@@\
  	_NormalLibMkdir()						@@\
+ 	_ExtraLibMkdir()						@@\
  									@@\
  includes::								@@\
  	_DebuggedLibMkdir()						@@\
  	_ProfiledLibMkdir()						@@\
  	_NormalLibMkdir()						@@\
+ 	_ExtraLibMkdir()						@@\
  									@@\
  _CompileObj(.c.Osuf:,$(_NOOP_))						@@\
  _CompileObjCplusplus(.SRCsuf.Osuf:,$(_NOOP_))				@@\
***************
*** 198,203 ****
--- 223,229 ----
  	_DebuggedCleanDir()						@@\
  	_ProfiledCleanDir()						@@\
  	_NormalCleanDir()						@@\
+ 	_ExtraCleanDir()						@@\
  
  #endif /* LibraryObjectRule */
  
***************
*** 370,375 ****
--- 396,407 ----
  DebuggedLibraryTarget($(LIBNAME),$(OBJS))
  #   if !defined(LibInstall) || LibInstall
  InstallLibrary($(LIBNAME)_d,$(USRLIBDIR))
+ #   endif
+ #  endif
+ #  if DoExtraLib && defined(ExtraLibRules)
+ ExtraLibraryTarget($(LIBNAME),$(SoRev),$(OBJS))
+ #   if !defined(LibInstall) || LibInstall
+ ExtraInstallLibrary($(LIBNAME),$(SoRev))
  #   endif
  #  endif
  
*** motif.orig/config/cf/linux.cf	Fri Apr 28 11:04:01 2000
--- motif/config/cf/linux.cf	Sat Jun  3 18:43:07 2000
***************
*** 1,7 ****
! XCOMM platform:  $TOG: linux.cf /main/47 1998/04/17 11:32:51 mgreess $
  
  #ifndef OSName
! #define OSName			DefaultOSName
  #endif
  #ifndef OSMajorVersion
  #define OSMajorVersion		DefaultOSMajorVersion
--- 1,32 ----
! XCOMM platform:  $TOG: linux.cf /main/36 1997/06/16 22:21:03 kaleb $
! XCOMM platform:  $XFree86: xc/config/cf/linux.cf,v 3.57.2.19 1999/09/04 09:12:27 dawes Exp $
! 
! #ifndef LinuxElfDefault
! #define LinuxElfDefault		YES
! #endif
! 
! #ifndef UseElfFormat
! #define UseElfFormat		LinuxElfDefault
! #endif
! 
! #ifndef OSBinaryType
! #if UseElfFormat
! #define OSBinaryType		[ELF]
! #else
! #ifdef AlphaArchitecture
! #define OSBinaryType		[ECOFF]
! #else
! #define OSBinaryType		[a.out]
! #endif
! #endif
! #endif
  
  #ifndef OSName
! #define OSName			DefaultOSName OSBinaryType
! #endif
! 
! #ifndef OSVendor
! #define OSVendor		/**/
  #endif
  #ifndef OSMajorVersion
  #define OSMajorVersion		DefaultOSMajorVersion
***************
*** 13,76 ****
  #define OSTeenyVersion		DefaultOSTeenyVersion
  #endif
  
! #ifndef LinuxDistribution 
! #define LinuxDistribution	DefaultLinuxDistribution
! /*
!   Add "#define LinuxDistribution Linux<mumble>" to your site.def or host.def.
!   Currently only LinuxSuSE will be figured out automatically.
!   Valid values are (from the list at www.linux.org in Oct. '97):
!     LinuxUnknown    (0)
!     LinuxSuSE       (1)
!     LinuxCaldera    (2)
!     LinuxCraftworks (3)
!     LinuxDebian     (4)
!     LinuxInfoMagic  (5)
!     LinuxKheops     (6)
!     LinuxPro        (7)
!     LinuxRedHat     (8)
!     LinuxSlackware  (9)
!     LinuxTurbo      (10)
!     LinuxWare       (11)
!     LinuxYggdrasil  (12)
! */
  #endif
  #ifndef LinuxCLibMajorVersion
! #define LinuxCLibMajorVersion   DefaultLinuxCLibMajorVersion
  #endif
  #ifndef LinuxCLibMinorVersion
! #define LinuxCLibMinorVersion   DefaultLinuxCLibMinorVersion
  #endif
  #ifndef LinuxCLibTeenyVersion
! #define LinuxCLibTeenyVersion   DefaultLinuxCLibTeenyVersion
  #endif
  #ifndef LinuxBinUtilsMajorVersion
  #define LinuxBinUtilsMajorVersion	DefaultLinuxBinUtilsMajorVersion
  #endif
  
  XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
! XCOMM libc:  (LinuxCLibMajorVersion./**/LinuxCLibMinorVersion./**/LinuxCLibTeenyVersion)
! XCOMM binutils:  (LinuxBinUtilsMajorVersion)
  
! #ifndef UseElfFormat
! #if OSMajorVersion > 1 || (OSMajorVersion == 1 && OSMinorVersion > 1)
! #define UseElfFormat		YES
  #else
! #define UseElfFormat		NO
  #endif
  #endif
! #define BuildLibPathVar   	LD_LIBRARY_PATH
  #define HasGcc			YES
  #define HasGcc2			YES
! #define HasGcc2ForCplusplus	YES
  #define GccUsesGas		YES
  #define UseGas			YES
  #define GnuCpp			YES
! #define HasShadowPasswd		NO
  #define HasPutenv		YES
  #define HasShm			YES
  #define HasSockets		YES
! #if (LinuxDistribution == LinuxRedHat)
! #define HasZlib			YES
  #endif
  
  #define AvoidNullMakeCommand	YES
--- 38,145 ----
  #define OSTeenyVersion		DefaultOSTeenyVersion
  #endif
  
! /* Set some defaults for the Default* values in case imake doesn't find them */
! #ifndef DefaultLinuxCLibMajorVersion
! #if defined(AlphaArchitecture) || defined(PowerPCArchitecture) || \
!     defined(SparcArchitecture) || defined(ArmArchitecure) || \
!     defined(i386Architecture)
! #define DefaultLinuxCLibMajorVersion	6
! #else
! #define DefaultLinuxCLibMajorVersion	5
  #endif
+ #endif
+ #ifndef DefaultLinuxCLibMinorVersion
+ #if DefaultLinuxCLibMajorVersion > 5
+ #define DefaultLinuxCLibMinorVersion	0
+ #else
+ #define DefaultLinuxCLibMinorVersion	4
+ #endif
+ #endif
+ #ifndef DefaultLinuxCLibTeenyVersion
+ #define DefaultLinuxCLibTeenyVersion	0
+ #endif
+ 
  #ifndef LinuxCLibMajorVersion
! #define LinuxCLibMajorVersion	DefaultLinuxCLibMajorVersion
  #endif
  #ifndef LinuxCLibMinorVersion
! #define LinuxCLibMinorVersion	DefaultLinuxCLibMinorVersion
  #endif
  #ifndef LinuxCLibTeenyVersion
! #define LinuxCLibTeenyVersion	DefaultLinuxCLibTeenyVersion
  #endif
+ 
  #ifndef LinuxBinUtilsMajorVersion
  #define LinuxBinUtilsMajorVersion	DefaultLinuxBinUtilsMajorVersion
  #endif
  
  XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
! XCOMM libc:	(LinuxCLibMajorVersion./**/LinuxCLibMinorVersion./**/LinuxCLibTeenyVersion)
! XCOMM binutils:	(LinuxBinUtilsMajorVersion)
  
! /*
!  * The Linux BinUtils major version.  25 => 2.5.x, which is what is included
!  * with Slackware 3.0
!  *
!  * This remains for compatibility only.
!  *
!  */
! #ifndef BinUtilsMajorVersion
! #define BinUtilsMajorVersion	LinuxBinUtilsMajorVersion
! #endif
! 
! #if LinuxCLibMajorVersion >= 6 || \
! 	(LinuxCLibMajorVersion == 5 && LinuxCLibMinorVersion == 99)
! #define LinuxSourceDefines	-D_POSIX_C_SOURCE=199309L \
! 				-D_POSIX_SOURCE -D_XOPEN_SOURCE=500L \
! 				-D_BSD_SOURCE -D_SVID_SOURCE
! #define XawI18nDefines		-DHAS_WCHAR_H -DHAS_WCTYPE_H -DNO_WIDEC_H
! #if !defined(ArmArchitecture)
! #define HasPosixThreads		YES
! #define ThreadedX		YES
! #define HasThreadSafeAPI	YES
! #define ThreadsLibraries	-lpthread
! #define SystemMTDefines		-D_REENTRANT
! #endif
! #ifndef HasLibCrypt
! #define HasLibCrypt		YES
! #endif
  #else
! #define LinuxSourceDefines	-D_POSIX_SOURCE \
! 				-D_BSD_SOURCE -D_SVID_SOURCE -DX_LOCALE
! #define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
! #ifndef HasLibCrypt
! #define HasLibCrypt		NO
  #endif
  #endif
! 
! /* For compatibility */
! #define SourceDefines		LinuxSourceDefines
! 
  #define HasGcc			YES
  #define HasGcc2			YES
! #ifndef HasGcc2ForCplusplus
! # define HasGcc2ForCplusplus	YES
! #endif
  #define GccUsesGas		YES
  #define UseGas			YES
  #define GnuCpp			YES
! #ifndef HasShadowPasswd
! # if UseElfFormat
! #  define HasShadowPasswd	YES
! # else
! #  define HasShadowPasswd	NO
! # endif
! #endif
  #define HasPutenv		YES
  #define HasShm			YES
  #define HasSockets		YES
! #if UseElfFormat || defined(AlphaArchitecture)
! #define HasSnprintf		YES
! #define HasMkstemp		YES
! #endif
! #ifndef HasPam
! #define HasPam			NO
  #endif
  
  #define AvoidNullMakeCommand	YES
***************
*** 81,165 ****
  #define NeedFunctionPrototypes	YES
  #define NeedNestedPrototypes	YES
  #define NeedVarargsPrototypes	YES
  #define NeedWidePrototypes	NO
  #define SetTtyGroup		YES
  
  #if UseElfFormat
- #if OSMajorVersion == 1 && OSMinorVersion < 2
- #define CcCmd			gcc -b i486-linuxelf
- #define CplusplusCmd		g++ -b i486-linuxelf
- #define AsCmd			/usr/i486-linuxelf/bin/as
- #define LdCmd			ld -m elf_i386
- #else
  #define CcCmd			gcc
- #define CplusplusCmd		g++
  #define AsCmd			as
  #define LdCmd			ld
- #endif
  #define AsmDefines		-D__ELF__
  #else
! #define CcCmd			gcc
! #if OSMajorVersion == 1 && OSMinorVersion > 1
  #define AsCmd			/usr/i486-linuxaout/bin/as
! #define LdCmd			ld -m i386linux
  #else
  #define AsCmd			as
  #define LdCmd			ld
  #endif
- #define AsmDefines		-DUSE_GAS -U__ELF__
  #endif
- #define MkdirHierCmd		mkdir -p
  #define CppCmd			/lib/cpp
! #if OSMajorVersion >= 2
! #define YaccCmd                 yacc
  #else
! #define YaccCmd                 bison -y
  #endif
  #define LexCmd			flex -l
  #define LexLib			-lfl
  #define PreProcessCmd		CcCmd -E
  #define PostIncDir		DefaultGccIncludeDir
  #define LdCombineFlags		-r
! #define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
  #define HasWChar32		YES
  #define StandardCppDefines	-traditional StandardDefines
- #define ExtensionOSDefines	-DXTESTEXT1
- 
- #if (LinuxDistribution == LinuxSuSE)
- #define LinuxLocaleDefines	/**/
- #else
- #define LinuxLocaleDefines	-DX_LOCALE
- #endif
- 
- #if LinuxCLibMajorVersion < 6
- #define LinuxSourceDefines	-D_POSIX_SOURCE \
- 				-D_BSD_SOURCE -D_SVID_SOURCE LinuxLocaleDefines
- #ifndef HasLibCrypt
- # define HasLibCrypt		NO
- #endif
- #else
- #define LinuxSourceDefines	-D_POSIX_C_SOURCE=199309L \
- 				-D_POSIX_SOURCE \
- 				-D_BSD_SOURCE -D_SVID_SOURCE
- #define HasPosixThreads		YES
- #define ThreadedX		YES
- #define HasThreadSafeAPI	YES
- #define ThreadsLibraries	-lpthread
- #define SystemMTDefines		-D_REENTRANT
- #ifndef HasLibCrypt
- # define HasLibCrypt		YES
- #endif
- #endif
  
  #ifdef i386Architecture
  #define OptimizedCDebugFlags	DefaultGcc2i386Opt
  #define LinuxMachineDefines	-D__i386__
! #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME
  #define ServerExtraDefines	-DGCCUSESGAS XFree86ServerDefines
- #if UseElfFormat
- #define HasPlugin		YES
- #define VendorHasX11R6_3libXext	YES	/* XC or XFree86 3.3.1 */
- #endif
  #endif /* i386Architecture */
  
  #ifdef AlphaArchitecture
--- 150,257 ----
  #define NeedFunctionPrototypes	YES
  #define NeedNestedPrototypes	YES
  #define NeedVarargsPrototypes	YES
+ #ifndef NeedWidePrototypes
  #define NeedWidePrototypes	NO
+ #endif
  #define SetTtyGroup		YES
  
+ #ifndef UseStaticTermcapLib
+ #define UseStaticTermcapLib	NO
+ #endif
+ 
+ #define MkdirHierCmd		mkdir -p
+ #if LinuxElfDefault
  #if UseElfFormat
  #define CcCmd			gcc
  #define AsCmd			as
  #define LdCmd			ld
  #define AsmDefines		-D__ELF__
+ #define CplusplusCmd		c++
+ #if UseStaticTermcapLib
+ #if LinuxCLibMajorVersion >= 6
+ #define TermcapLibrary		StaticLibrary(/usr/lib,ncurses)
  #else
! #define TermcapLibrary		StaticLibrary(/usr/lib/termcap,termcap)
! #endif
! #endif
! #else
! #ifdef AlphaArchitecture
! #define CcCmd			gcc -b alpha-linuxecoff
! #define CplusplusCmd		g++ -b alpha-linuxecoff
! #define AsCmd			/usr/alpha-linuxecoff/bin/as
! #define LdCmd			/usr/alpha-linuxecoff/bin/ld -m alpha
! #define AsmDefines		-DUSE_GAS -U__ELF__
! #endif /* AlphaArchitecture */
! #ifdef i386Architecture
! #define CcCmd			gcc -b i486-linuxaout
! #define CplusplusCmd		g++ -b i486-linuxaout
  #define AsCmd			/usr/i486-linuxaout/bin/as
! #define LdCmd			/usr/i486-linuxaout/bin/ld -m i386linux
! #define AsmDefines		-DUSE_GAS -U__ELF__
! #endif /* i386Architecture */
! #ifdef Mc68020Architecture
! #define CcCmd			gcc -b m68k-linuxaout
! #define CplusplusCmd		g++ -b m68k-linuxaout
! #define AsCmd			/usr/m68k-linuxaout/bin/as
! #define LdCmd			/usr/m68k-linuxaout/bin/ld -m m68klinux
! #define AsmDefines		-DUSE_GAS -U__ELF__
! #endif /* Mc68020Architecture */
! #endif
  #else
+ #if UseElfFormat
+ #ifdef AlphaArchitecture
+ #define CcCmd			gcc -b alpha-linux
+ #define AsCmd			/usr/alpha-linux/bin/as
+ #define LdCmd			ld -m elf64alpha
+ #define AsmDefines		-D__ELF__
+ #define CplusplusCmd		c++ -b alpha-linux
+ #endif /* AlphaArchitecture */
+ #ifdef i386Architecture
+ #define CcCmd			gcc -b i486-linux
+ #define AsCmd			/usr/i486-linux/bin/as
+ #define LdCmd			ld -m elf_i386
+ #define AsmDefines		-D__ELF__
+ #define CplusplusCmd		c++ -b i486-linux
+ #endif /* i386Architecture */
+ #ifdef Mc68020Architecture
+ #define CcCmd			gcc -b m68k-linux
+ #define AsCmd			/usr/m68k-linux/bin/as
+ #define LdCmd			ld -m m68kelf
+ #define AsmDefines		-D__ELF__
+ #define CplusplusCmd		c++ -b m68k-linux
+ #endif /* Mc68020Architecture */
+ #else
+ #define CcCmd			gcc
  #define AsCmd			as
  #define LdCmd			ld
+ #define AsmDefines		-DUSE_GAS
+ #endif
+ #endif
+ #if UseElfFormat
+ #ifndef BuildDynamicLoading
+ #define BuildDynamicLoading	YES
  #endif
  #endif
  #define CppCmd			/lib/cpp
! #ifdef USE_BYACC
! #define YaccCmd			byacc
  #else
! #define YaccCmd			bison -y
  #endif
  #define LexCmd			flex -l
  #define LexLib			-lfl
  #define PreProcessCmd		CcCmd -E
  #define PostIncDir		DefaultGccIncludeDir
  #define LdCombineFlags		-r
! #define LdPostLib		/* Never needed */
  #define HasWChar32		YES
  #define StandardCppDefines	-traditional StandardDefines
  
  #ifdef i386Architecture
  #define OptimizedCDebugFlags	DefaultGcc2i386Opt
  #define LinuxMachineDefines	-D__i386__
! #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME -DPART_NET
  #define ServerExtraDefines	-DGCCUSESGAS XFree86ServerDefines
  #endif /* i386Architecture */
  
  #ifdef AlphaArchitecture
***************
*** 171,185 ****
  
  #ifdef Mc68020Architecture
  #define OptimizedCDebugFlags	-O2
! #define LinuxMachineDefines	-D__mc68000__
! #define StandardCppDefines      -traditional StandardDefines
! #define ServerOSDefines         XFree86ServerOSDefines -DDDXTIME -DPART_NET
! #define ServerExtraDefines      -DGCCUSESGAS XFree86ServerDefines
  #endif /* Mc68020Architecture */
  
  #define StandardDefines		-Dlinux LinuxMachineDefines LinuxSourceDefines
  
  #define ConnectionFlags		-DUNIXCONN -DTCPCONN
  
  /* Some of these man page defaults are overriden in the above OS sections */
  #ifndef ManSuffix
--- 263,317 ----
  
  #ifdef Mc68020Architecture
  #define OptimizedCDebugFlags	-O2
! #define LinuxMachineDefines 	-D__mc68000__
! #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME -DPART_NET
! #define ServerExtraDefines	-DGCCUSESGAS XFree86ServerDefines
  #endif /* Mc68020Architecture */
  
+ #ifdef PowerPCArchitecture
+ #define DefaultCCOptions        -fsigned-char
+ #define OptimizedCDebugFlags	-O2
+ #define LinuxMachineDefines 	-D__powerpc__
+ #define ServerOSDefines		XFree86ServerOSDefines -DDDXTIME -DPART_NET
+ #define ServerExtraDefines	-DGCCUSESGAS XFree86ServerDefines
+ #endif /* PowerPCArchitecture */
+ 
+ #ifdef ArmArchitecture
+ #define DefaultCCOptions        -fsigned-char
+ #define OptimizedCDebugFlags   -O2
+ #define LinuxMachineDefines    -D__arm__
+ #define ServerOSDefines                XFree86ServerOSDefines -DDDXTIME -DPART_NET
+ #define ServerExtraDefines     -DGCCUSESGAS XFree86ServerDefines
+ #endif /* Arm */
+ 
  #define StandardDefines		-Dlinux LinuxMachineDefines LinuxSourceDefines
  
+ #ifndef TermcapLibrary
+ #if LinuxCLibMajorVersion >= 6
+ #define TermcapLibrary		-lncurses
+ #else
+ #define TermcapLibrary		-ltermcap
+ #endif
+ #endif
+ 
+ #if UseElfFormat
+ #define DlLibrary		-rdynamic -ldl
+ #else
+ #define DlLibrary		/**/
+ #endif
+ 
+ #if BuildDynamicLoading
+ #define ServerExtraSysLibs	DlLibrary
+ #else
+ #define ServerExtraSysLibs	/**/
+ #endif
+ 
+ #if HasDECnet
+ #define ConnectionFlags		-DUNIXCONN -DTCPCONN -DDNETCONN
+ #define ExtraLibraries		-ldnet
+ #else
  #define ConnectionFlags		-DUNIXCONN -DTCPCONN
+ #endif
  
  /* Some of these man page defaults are overriden in the above OS sections */
  #ifndef ManSuffix
***************
*** 200,210 ****
  #ifndef FileManDir
  # define FileManDir	$(MANSOURCEPATH)5
  #endif
  
! #define ArchitectureDefines	-DLINUX_ARCHITECTURE
  
! #define TtClientLibs $(TTLIB) $(XTOOLLIB) $(XLIB)
! #define TtClientDepLibs $(DEPTTLIB) $(DEPXTOOLLIB) $(DEPXLIB)
  
  #include <lnxLib.rules>
  #include <xfree86.cf>
--- 332,352 ----
  #ifndef FileManDir
  # define FileManDir	$(MANSOURCEPATH)5
  #endif
+ #ifndef MiscManSuffix
+ # define MiscManSuffix	7x
+ #endif
+ #ifndef MiscManDir
+ # define MiscManDir	$(MANSOURCEPATH)7
+ #endif
+ 
+ #ifndef StaticLibrary
+ #define StaticLibrary(libpath,libname) -Wl,-Bstatic Concat(-L,libpath) Concat(-l,libname) -Wl,-Bdynamic
+ #endif
  
! #define HasGnuMake	YES
  
! #define MakeNamedTargetSubdir(dir,flags,subname)\
! 	$(MAKE) -C dir $(MFLAGS) $(PARALLELMFLAGS) flags subname
  
  #include <lnxLib.rules>
  #include <xfree86.cf>
*** motif.orig/config/cf/lnxdoc.rules	Fri Jul  7 15:22:07 2000
--- motif/config/cf/lnxdoc.rules	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,168 ----
+ XCOMM $XFree86: xc/config/cf/lnxdoc.rules,v 3.9.2.3 1999/05/25 06:55:07 hohndel Exp $
+ XCOMM
+ XCOMM Rules for formatting Linuxdoc-SGML documentation
+ XCOMM
+ 
+ #include <lnxdoc.tmpl>
+ 
+ #ifdef DontInstallLinuxDoc
+ #define LinuxDocInstall(file,dest)	/* do nothing */
+ #define LinuxDocInstallMultiple(files,dest)	/* do nothing */
+ #else
+ #define LinuxDocInstall(file,dest)	InstallNonExecFile(file,dest)
+ #define LinuxDocInstallMultiple(files,dest)				@@\
+ InstallMultipleDest(install,files,dest)
+ #endif
+ 
+ #if !HasSgmlFmt
+ /* Version for Linuxdoc-SGML */
+ #if BuildLinuxDocPS
+ #define LinuxDocSgmlToPs(sgmlfile,base) 				@@\
+ AllTarget(base.ps)							@@\
+ 									@@\
+ base.ps: sgmlfile							@@\
+ 	RemoveFile(base.dvi)						@@\
+ 	$(LINUXDOCFORMAT) -T latex sgmlfile | \				@@\
+ 	    $(LINUXDOCLATEX) -d > base.dvi				@@\
+ 	RemoveFile(base.ps)						@@\
+ 	$(DVIPS) $(DVIPSOPTIONS) -o base._ps base.dvi && \		@@\
+ 	    $(MV) base._ps $@						@@\
+ 	RemoveFile(base.dvi)						@@\
+ 									@@\
+ LinuxDocInstall(base.ps,$(XFREE86PSDOCDIR))				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(base.dvi base._ps base.ps)
+ #else
+ #define LinuxDocSgmlToPs(sgmlfile,base) /**/
+ #endif
+ 
+ #if BuildLinuxDocText
+ #define LinuxDocSgmlToText(sgmlfile,textfile)				@@\
+ AllTarget(textfile)							@@\
+ 									@@\
+ textfile: sgmlfile							@@\
+ 	RemoveFile(textfile)						@@\
+ 	$(LINUXDOCFORMAT) -T nroff sgmlfile | \				@@\
+ 	    $(LINUXDOCROFF) | $(XFREE86IDENTFIX) > _$@ && \		@@\
+ 	    $(MV) _$@ $@						@@\
+ 									@@\
+ LinuxDocInstall(textfile,$(XFREE86DOCDIR))				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(Concat(_,textfile) textfile)
+ #else
+ #define LinuxDocSgmlToText(sgmlfile,textfile) /**/
+ #endif
+ 
+ /*
+  * The 'echo' stuff here is a bit of a hack, but 'set -x' doesn't show
+  * what is going on.
+  */
+ #if BuildLinuxDocHtml
+ #define LinuxDocSgmlToHtml(sgmlfile,base)				@@\
+ AllTarget(base.html)							@@\
+ 									@@\
+ base.html: sgmlfile							@@\
+ 	@(TMP=/tmp/tmp.$$$$; \						@@\
+ 	  RemoveFile($${TMP}); \					@@\
+ 	  echo RemoveFiles(base*.html); \				@@\
+ 	  RemoveFiles(base*.html); \					@@\
+ 	  echo "$(LINUXDOCFORMAT) -T html sgmlfile |" \			@@\
+ 	    "$(LINUXDOCPREHTML) | $(LINUXDOCFIXREF) > $${TMP}"; \	@@\
+ 	  $(LINUXDOCFORMAT) -T html sgmlfile | \			@@\
+ 	    $(LINUXDOCPREHTML) | $(LINUXDOCFIXREF) > $${TMP};	 \	@@\
+ 	  echo "$(LINUXDOCFORMAT) -T html sgmlfile |" \			@@\
+ 	    "$(LINUXDOCPREHTML) >> $${TMP}"; \				@@\
+ 	  $(LINUXDOCFORMAT) -T html sgmlfile | \			@@\
+ 	    $(LINUXDOCPREHTML) >> $${TMP}; \				@@\
+ 	  echo "$(LINUXDOCHTML) base < $${TMP} > base.html &&" \	@@\
+ 	    "$(MV) base._html $@"; \					@@\
+ 	  $(LINUXDOCHTML) base < $${TMP} > base._html && \		@@\
+ 	    $(MV) base._html $@; \					@@\
+ 	  RemoveFile($${TMP}))						@@\
+ 									@@\
+ LinuxDocInstallMultiple(base*.html,$(XFREE86HTMLDOCDIR))		@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(base*.html base._html)
+ #else
+ #define LinuxDocSgmlToHtml(sgmlfile,base) /**/
+ #endif
+ 
+ #else /* HasSgmlFmt */
+ 
+ /* Version for FreeBSD's sgmlfmt */
+ #if BuildLinuxDocPS
+ #define LinuxDocSgmlToPs(sgmlfile,base) 				@@\
+ AllTarget(base.ps)							@@\
+ 									@@\
+ base.ps: sgmlfile							@@\
+ 	RemoveFile(base.ps)						@@\
+ 	@(BASE=`basename sgmlfile .sgml`;\				@@\
+ 	  set -x;\							@@\
+ 	  RemoveFile($$BASE.ps);\					@@\
+ 	  $(SGMLFMTCMD) -f ps sgmlfile && \				@@\
+ 		$(MV) $$BASE.ps _$@ && $(MV) _$@ $@)			@@\
+ 									@@\
+ LinuxDocInstall(base.ps,$(XFREE86PSDOCDIR))				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(Concat(_,base.ps) base.ps)
+ #else
+ #define LinuxDocSgmlToPs(sgmlfile,base) /**/
+ #endif
+ 
+ #if BuildLinuxDocText
+ #define LinuxDocSgmlToText(sgmlfile,textfile)				@@\
+ AllTarget(textfile)							@@\
+ 									@@\
+ textfile: sgmlfile							@@\
+ 	RemoveFile(textfile)						@@\
+ 	@(BASE=`basename sgmlfile .sgml`;\				@@\
+ 	  set -x;\							@@\
+ 	  RemoveFile($$BASE.latin1);\					@@\
+ 	  $(SGMLFMTCMD) -f latin1 -b -n sgmlfile && \			@@\
+ 	  $(XFREE86IDENTFIX) < $$BASE.latin1 > _$@ && $(MV) _$@ $@ && \	@@\
+ 	  RemoveFile($$BASE.latin1))					@@\
+ 									@@\
+ LinuxDocInstall(textfile,$(XFREE86DOCDIR))				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(Concat(_,textfile) textfile)
+ #else
+ #define LinuxDocSgmlToText(sgmlfile,textfile) /**/
+ #endif
+ 
+ #if BuildLinuxDocHtml
+ #define LinuxDocSgmlToHtml(sgmlfile,base)				@@\
+ AllTarget(base.html)							@@\
+ 									@@\
+ base.html: sgmlfile							@@\
+ 	@if [ sgmlfile != base.sgml ]; then $(LN) sgmlfile base.sgml; fi @@\
+ 	RemoveFiles(base*.html)						@@\
+ 	$(SGMLFMTCMD) -f html base.sgml || RemoveFile($@)		@@\
+ 	@if [ sgmlfile != base.sgml ]; then RemoveFile(base.sgml); fi	@@\
+ 									@@\
+ LinuxDocInstallMultiple(base*.html,$(XFREE86HTMLDOCDIR))		@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(base*.html)
+ #else
+ #define LinuxDocSgmlToHtml(sgmlfile,base) /**/
+ #endif
+ 
+ #endif /* HasSgmlFmt */
+ 
+ 
+ #define LinuxDocTargetLong(sgmlfile,textfile,base)			@@\
+ LinuxDocSgmlToText(sgmlfile,textfile)					@@\
+ LinuxDocSgmlToHtml(sgmlfile,base)					@@\
+ LinuxDocSgmlToPs(sgmlfile,base)
+ 
+ #define LinuxDocReadmeTarget(base)					@@\
+ LinuxDocTargetLong(base.sgml,README.base,base)
+ 
+ #define LinuxDocTarget(base)						@@\
+ LinuxDocTargetLong(base.sgml,base,base)
+ 
*** motif.orig/config/cf/lnxdoc.tmpl	Fri Jul  7 15:22:07 2000
--- motif/config/cf/lnxdoc.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,105 ----
+ XCOMM $XFree86: xc/config/cf/lnxdoc.tmpl,v 3.5.2.2 1998/11/07 12:00:45 dawes Exp $
+ XCOMM
+ 
+ #ifndef HasLinuxDoc
+ #define HasLinuxDoc		NO
+ #endif
+ 
+ #ifndef HasSgmlFmt
+ #define HasSgmlFmt		NO
+ #endif
+ 
+ #ifndef DoSgmlDocs
+ #define DoSgmlDocs		(HasLinuxDoc || HasSgmlFmt)
+ #endif
+ 
+ #ifndef LinuxDocDir
+ #define LinuxDocDir		/usr/local/linuxdoc-sgml
+ #endif
+ 
+ #ifndef LinuxDocBinDir
+ #define LinuxDocBinDir		$(LINUXDOCPATH)/bin
+ #endif
+ 
+ #ifndef LinuxDocFormatCmd
+ #define LinuxDocFormatCmd	$(LINUXDOCBIN)/ldformat
+ #endif
+ 
+ #ifndef LinuxDocRoffCmd
+ #define LinuxDocRoffCmd		$(LINUXDOCBIN)/qroff
+ #endif
+ 
+ #ifndef XFree86IdentFix
+ #define XFree86IdentFix		sed '/\$$\XFree86:/s/\$$/Generated from /'
+ #endif
+ 
+ #ifndef LinuxDocFixrefCmd
+ #define LinuxDocFixrefCmd	$(LINUXDOCBIN)/fixref
+ #endif
+ 
+ #ifndef LinuxDocPreHtmlCmd
+ #define LinuxDocPreHtmlCmd	$(LINUXDOCBIN)/prehtml
+ #endif
+ 
+ #ifndef LinuxDocHtmlCmd
+ #define LinuxDocHtmlCmd		$(LINUXDOCBIN)/html2html
+ #endif
+ 
+ #ifndef HasLatex
+ #define HasLatex		NO
+ #endif
+ 
+ #ifndef LinuxDocLatexCmd
+ #define LinuxDocLatexCmd	$(LINUXDOCBIN)/qtex
+ #endif
+ 
+ #ifndef SgmlFmtCmd
+ #define SgmlFmtCmd		sgmlfmt
+ #endif
+ 
+ #ifndef HasDvips
+ #define HasDvips		NO
+ #endif
+ 
+ #ifndef DvipsOptions
+ #define DvipsOptions		/**/
+ #endif
+ 
+ #ifndef DvipsCmd
+ #define DvipsCmd		dvips
+ #endif
+ 
+ #ifndef BuildLinuxDocText
+ #define BuildLinuxDocText	(HasLinuxDoc || HasSgmlFmt)
+ #endif
+ 
+ #ifndef BuildLinuxDocHtml
+ #define BuildLinuxDocHtml	HasSgmlFmt
+ #endif
+ 
+ #ifndef BuildLinuxDocPS
+ #define BuildLinuxDocPS		((HasLatex && HasDvips) || HasSgmlFmt)
+ #endif
+ 
+ 
+      LINUXDOCPATH = LinuxDocDir
+       LINUXDOCENV = LINUXDOC=$(LINUXDOCPATH)
+       LINUXDOCBIN = LinuxDocBinDir
+    LINUXDOCFORMAT = $(LINUXDOCENV) LinuxDocFormatCmd
+      LINUXDOCROFF = $(LINUXDOCENV) LinuxDocRoffCmd
+     LINUXDOCLATEX = $(LINUXDOCENV) LinuxDocLatexCmd
+    LINUXDOCFIXREF = $(LINUXDOCENV) LinuxDocFixrefCmd
+   LINUXDOCPREHTML = $(LINUXDOCENV) LinuxDocPreHtmlCmd
+      LINUXDOCHTML = $(LINUXDOCENV) LinuxDocHtmlCmd
+   XFREE86IDENTFIX = XFree86IdentFix
+             DVIPS = DvipsCmd
+      DVIPSOPTIONS = DvipsOptions
+        SGMLFMTCMD = SgmlFmtCmd
+ 
+ XCOMM Some extra things to clean
+ 
+ #ifdef ExtraFilesToClean
+ #undef ExtraFilesToClean
+ #endif
+ #define ExtraFilesToClean *.aux *.dvi *.log *.tex *.toc *.html *.ps *.latin1
+ 
*** motif.orig/config/cf/lnxLib.rules	Fri Apr 28 11:04:01 2000
--- motif/config/cf/lnxLib.rules	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM $TOG: lnxLib.rules /main/14 1998/03/16 11:15:30 mgreess $
  
  /*
   * Linux shared library rules (DLL & ELF versions)
--- 1,5 ----
! XCOMM $XConsortium: lnxLib.rules /main/13 1996/09/28 16:11:01 rws $
! XCOMM $XFree86: xc/config/cf/lnxLib.rules,v 3.28.2.4 1998/12/18 11:56:08 dawes Exp $
  
  /*
   * Linux shared library rules (DLL & ELF versions)
***************
*** 14,19 ****
--- 15,50 ----
  
  #if UseElfFormat
  
+ #if (LinuxCLibMajorVersion >= 5 && LinuxCLibMinorVersion >= 4) || LinuxCLibMajorVersion >= 6
+ #undef SpecialMalloc
+ #define SpecialMalloc NO
+ #undef UseInternalMalloc
+ #define UseInternalMalloc NO
+ #endif
+ 
+ #if LinuxCLibMajorVersion <= 5
+ /*
+  *	#define BaseShLibReqs	-lc
+  *
+  * I don't want to use this since the normal ELF executables should
+  * be linked with libc.so. If it is not, i.e., static, the variables in
+  * libc.so which is loaded in because of the other shared libraries
+  * may have different values than the ones in the static ELF
+  * executables. That happens if the binaries are linked with libg.a
+  * or libc_p.a.
+  *
+  * If an ELF executable linked with libg.a or libc_p.a loads a shared
+  * object which needs libc.so via dlopen (), I think it should fail.
+  * It is a very bad idea. The moral story is DON'T USE dlopen () IN
+  * ELF EXECUTABLES LINKED WITH libg.a OR libc_p.a. H.J.
+  *
+  */
+ #define BaseShLibReqs
+ #else
+ /* With GNU libc 2 this works fine. */
+ #define BaseShLibReqs	-lc
+ #endif
+ 
  #ifndef SharedDataSeparation
  #define SharedDataSeparation NO
  #endif
***************
*** 36,43 ****
--- 67,84 ----
  #define PositionIndependentCplusplusFlags -fPIC
  #endif
  #ifndef ExtraLoadFlags
+ #if LinuxBinUtilsMajorVersion >= 26
+ #ifdef UseInstalled
+ #if LinuxBinUtilsMajorVersion < 27
+ #define ExtraLoadFlags -Wl,-rpath-link,$(USRLIBDIRPATH)
+ #endif
+ #else
+ #define ExtraLoadFlags -Wl,-rpath-link,$(BUILDLIBDIR)
+ #endif
+ #else
  #define ExtraLoadFlags -Wl,-rpath,$(USRLIBDIRPATH)
  #endif
+ #endif
  
  /*
   * InstallSharedLibrary - generate rules to install the shared library.
***************
*** 48,55 ****
  install:: Concat(lib,libname.so.rev) 					@@\
  	MakeDir($(DESTDIR)dest)						@@\
  	$(INSTALL) $(INSTALLFLAGS) $(INSTBINFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
! 	(T=`echo Concat($(DESTDIR)dest/lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`;\
! 		$(RM) $$T && $(LN) Concat(lib,libname.so.rev) $$T)	@@\
  	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
  	$(LN) Concat(lib,libname.so.rev) Concat($(DESTDIR)dest/lib,libname.so)
  #endif /* InstallSharedLibrary */
--- 89,96 ----
  install:: Concat(lib,libname.so.rev) 					@@\
  	MakeDir($(DESTDIR)dest)						@@\
  	$(INSTALL) $(INSTALLFLAGS) $(INSTBINFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
! 	@T=`echo Concat($(DESTDIR)dest/lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`;\
! 	  set -x; $(RM) $$T && $(LN) Concat(lib,libname.so.rev) $$T	@@\
  	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
  	$(LN) Concat(lib,libname.so.rev) Concat($(DESTDIR)dest/lib,libname.so)
  #endif /* InstallSharedLibrary */
***************
*** 68,95 ****
   * the library gone for long periods.
   */
  #ifndef SharedLibraryTarget
  #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
  AllTarget(Concat(lib,libname.so.rev))					@@\
  									@@\
  Concat(lib,libname.so.rev):  solist $(EXTRALIBRARYDEPS)			@@\
  	$(RM) $@~							@@\
! 	(cd down; T=`echo $@ | sed 's/\.[^\.]*$$//'`; \
! 		$(CC) -o up/$@~ $(SHLIBLDFLAGS) -Wl,-soname,$$T solist $(REQUIREDLIBS); \
! 		$(RM) $$T && $(LN) $@ $$T)				@@\
  	$(RM) $@ 							@@\
  	$(MV) $@~ $@							@@\
  	$(RM) Concat(lib,libname.so)					@@\
  	$(LN) $@ Concat(lib,libname.so)					@@\
  	LinkBuildLibrary($@)						@@\
  	LinkBuildLibrary(Concat(lib,libname.so))			@@\
- 	(T=`echo $@ | sed 's/\.[^\.]*$$//'`; \
- 		$(RM) $(BUILDLIBDIR)/$$T; cd $(BUILDLIBDIR); $(LN) $(BUILDLIBTOP)/$(CURRENT_DIR)/$$T .) @@\
  									@@\
  clean::									@@\
  	$(RM) Concat(lib,libname.so.rev) Concat(lib,libname.so)
  
  #endif /* SharedLibraryTarget */
  
  /*
   * SharedLibraryDataTarget - generate rules to create shlib data file;
   */
--- 109,159 ----
   * the library gone for long periods.
   */
  #ifndef SharedLibraryTarget
+ #ifdef UseInstalled
+ #define LinkBuildSonameLibrary(lib) true
+ #else
+ #define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+ 	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
+ #endif
+ 
  #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
  AllTarget(Concat(lib,libname.so.rev))					@@\
  									@@\
  Concat(lib,libname.so.rev):  solist $(EXTRALIBRARYDEPS)			@@\
  	$(RM) $@~							@@\
! 	@SONAME=`echo $@ | sed 's/\.[^\.]*$$//'`; set -x; \		@@\
! 		(cd down; $(CC) -o up/$@~ $(SHLIBLDFLAGS) -Wl,-soname,$$SONAME solist $(REQUIREDLIBS) BaseShLibReqs); \ @@\
! 		$(RM) $$SONAME; $(LN) $@ $$SONAME; \			@@\
! 		LinkBuildSonameLibrary($$SONAME)			@@\
  	$(RM) $@ 							@@\
  	$(MV) $@~ $@							@@\
  	$(RM) Concat(lib,libname.so)					@@\
  	$(LN) $@ Concat(lib,libname.so)					@@\
  	LinkBuildLibrary($@)						@@\
  	LinkBuildLibrary(Concat(lib,libname.so))			@@\
  									@@\
  clean::									@@\
+ 	@MAJREV=`expr rev : '\(.*\)\.'`; \				@@\
+ 	set -x; $(RM) Concat(lib,libname.so.$$MAJREV)			@@\
  	$(RM) Concat(lib,libname.so.rev) Concat(lib,libname.so)
  
  #endif /* SharedLibraryTarget */
  
+ #ifndef SharedDepModuleTarget
+ #define SharedDepModuleTarget(name,deps,solist)				@@\
+ AllTarget(name)								@@\
+ 									@@\
+ name: deps								@@\
+ 	$(RM) $@~							@@\
+ 	$(CC) -o $@~ $(SHLIBLDFLAGS) solist $(REQUIREDLIBS) BaseShLibReqs @@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) name
+ 
+ #endif /* SharedDepModuleTarget */
+ 
  /*
   * SharedLibraryDataTarget - generate rules to create shlib data file;
   */
***************
*** 115,121 ****
  #define SharedLibraryLoadFlags /**/
  #endif
  #ifndef PositionIndependentCFlags
! #define PositionIndependentCFlags -B/usr/dll/jump/
  #endif
  
  /*
--- 179,185 ----
  #define SharedLibraryLoadFlags /**/
  #endif
  #ifndef PositionIndependentCFlags
! #define PositionIndependentCFlags -B/usr/bin/jump
  #endif
  
  /*
***************
*** 142,148 ****
   *  JUMP_FUNCS_Xfoo = $(JUMP_ROOT_Xfoo)/jump_funcs	<see DLL docs>
   *  JUMP_IGNORE_Xfoo = $(JUMP_ROOT_Xfoo)/jump_ignore	<see DLL docs>
   *  JUMP_EXPORT_Xfoo = $(JUMP_DIR_Xfoo)/jump.vars	<exported symbols>
!  *  JUMP_IMPORT_Xfoo = $(JUMP_DIR_Xbar)			<imported symbols>
   *  JUMP_ADDRESS_Xfoo = 0xXXXXXXXX			<fill in with address>
   *  JUMP_JUMPTABLESIZE_Xfoo = 0x4000			<adjust if necessary>
   *  JUMP_GOTSIZE_Xfoo = 4096				<adjust if necessary>
--- 206,212 ----
   *  JUMP_FUNCS_Xfoo = $(JUMP_ROOT_Xfoo)/jump_funcs	<see DLL docs>
   *  JUMP_IGNORE_Xfoo = $(JUMP_ROOT_Xfoo)/jump_ignore	<see DLL docs>
   *  JUMP_EXPORT_Xfoo = $(JUMP_DIR_Xfoo)/jump.vars	<exported symbols>
!  *  JUMP_IMPORT_Xfoo = $(JUMP_EXPORT_Xbar)		<imported symbols>
   *  JUMP_ADDRESS_Xfoo = 0xXXXXXXXX			<fill in with address>
   *  JUMP_JUMPTABLESIZE_Xfoo = 0x4000			<adjust if necessary>
   *  JUMP_GOTSIZE_Xfoo = 4096				<adjust if necessary>
***************
*** 182,188 ****
  JUMP_STUBLIBS_X11 = libX11.sa libSM.sa libICE.sa
  JUMP_SIBDIRS_X11 = $(JUMP_ROOT_SM) $(JUMP_ROOT_ICE)
  JUMP_DIR_X11 = $(JUMP_ROOT_X11)/shared
! JUMP_DEFS_X11 = $(XDMAUTHDEFS)
  JUMP_VARS_X11 = $(JUMP_ROOT_X11)/jump_vars
  JUMP_FUNCS_X11 = $(JUMP_ROOT_X11)/jump_funcs
  JUMP_IGNORE_X11 = $(JUMP_ROOT_X11)/jump_ignore
--- 246,252 ----
  JUMP_STUBLIBS_X11 = libX11.sa libSM.sa libICE.sa
  JUMP_SIBDIRS_X11 = $(JUMP_ROOT_SM) $(JUMP_ROOT_ICE)
  JUMP_DIR_X11 = $(JUMP_ROOT_X11)/shared
! JUMP_DEFS_X11 = $(XDMAUTHDEFS) $(XKB_DEFINES)
  JUMP_VARS_X11 = $(JUMP_ROOT_X11)/jump_vars
  JUMP_FUNCS_X11 = $(JUMP_ROOT_X11)/jump_funcs
  JUMP_IGNORE_X11 = $(JUMP_ROOT_X11)/jump_ignore
***************
*** 207,219 ****
  JUMP_HOST_ICE = $(JUMP_ROOT_X11)
  JUMP_DIR_ICE = $(JUMP_DIR_X11)
  
! XCOMM libXt.so (Xt, Xmu, Xext, Xi, Xtst)
  JUMP_ROOT_Xt = $(TOOLKITSRC)
  JUMP_IS_HOST_Xt = YES
! JUMP_STUBLIBS_Xt = libXt.sa libXmu.sa libXext.sa libXi.sa libXtst.sa
  JUMP_SUBDIRS_Xt = $(JUMP_ROOT_X11)
  JUMP_SIBDIRS_Xt = $(JUMP_ROOT_Xmu) $(JUMP_ROOT_Xext) \
! 	$(JUMP_ROOT_Xi) $(JUMP_ROOT_Xtst)
  JUMP_DIR_Xt = $(JUMP_ROOT_Xt)/shared
  JUMP_VARS_Xt = $(JUMP_ROOT_Xt)/jump_vars
  JUMP_FUNCS_Xt = $(JUMP_ROOT_Xt)/jump_funcs
--- 271,283 ----
  JUMP_HOST_ICE = $(JUMP_ROOT_X11)
  JUMP_DIR_ICE = $(JUMP_DIR_X11)
  
! XCOMM libXt.so (Xt, Xmu, Xext, Xi, Xtst, Xp)
  JUMP_ROOT_Xt = $(TOOLKITSRC)
  JUMP_IS_HOST_Xt = YES
! JUMP_STUBLIBS_Xt = libXt.sa libXmu.sa libXext.sa libXi.sa libXtst.sa libXp.sa
  JUMP_SUBDIRS_Xt = $(JUMP_ROOT_X11)
  JUMP_SIBDIRS_Xt = $(JUMP_ROOT_Xmu) $(JUMP_ROOT_Xext) \
! 	$(JUMP_ROOT_Xi) $(JUMP_ROOT_Xtst) $(JUMP_ROOT_Xp)
  JUMP_DIR_Xt = $(JUMP_ROOT_Xt)/shared
  JUMP_VARS_Xt = $(JUMP_ROOT_Xt)/jump_vars
  JUMP_FUNCS_Xt = $(JUMP_ROOT_Xt)/jump_funcs
***************
*** 223,231 ****
  JUMP_ADDRESS_Xt = 0x602a0000
  JUMP_JUMPTABLESIZE_Xt = 0x4000
  JUMP_GOTSIZE_Xt = 4096
! JUMP_STUBNAMES_Xt = libXt libXmu libXext libXi libXtst
  JUMP_STUBS_IMPORT_Xt = $(JUMP_STUBS_IMPORT_X11)
! JUMP_SIBARS_Xt = jump/libXmu.a~ jump/libXext.a~ jump/libXi.a~ jump/libXtst.a~
  JUMP_LDLIBS_Xt = $(JUMP_SIBARS_Xt) $(JUMP_ROOT_ICE)/libICE.sa \
  	$(JUMP_ROOT_SM)/libSM.sa $(JUMP_ROOT_X11)/libX11.sa $(JUMP_LDLIBS_libc)
  
--- 287,295 ----
  JUMP_ADDRESS_Xt = 0x602a0000
  JUMP_JUMPTABLESIZE_Xt = 0x4000
  JUMP_GOTSIZE_Xt = 4096
! JUMP_STUBNAMES_Xt = libXt libXmu libXext libXi libXtst libXp
  JUMP_STUBS_IMPORT_Xt = $(JUMP_STUBS_IMPORT_X11)
! JUMP_SIBARS_Xt = jump/libXmu.a~ jump/libXext.a~ jump/libXi.a~ jump/libXtst.a~ jump/libXp.a~
  JUMP_LDLIBS_Xt = $(JUMP_SIBARS_Xt) $(JUMP_ROOT_ICE)/libICE.sa \
  	$(JUMP_ROOT_SM)/libSM.sa $(JUMP_ROOT_X11)/libX11.sa $(JUMP_LDLIBS_libc)
  
***************
*** 252,257 ****
--- 316,327 ----
  JUMP_IS_HOST_Xtst = NO
  JUMP_HOST_Xtst = $(JUMP_ROOT_Xt)
  JUMP_DIR_Xtst = $(JUMP_DIR_Xt)
+ 
+ XCOMM libXp (part of libXt.so)
+ JUMP_ROOT_Xp = $(XPLIBSRC)
+ JUMP_IS_HOST_Xp = NO
+ JUMP_HOST_Xp = $(JUMP_ROOT_Xt)
+ JUMP_DIR_Xp = $(JUMP_DIR_Xt)
  
  XCOMM libXaw.so (Xaw)
  JUMP_ROOT_Xaw = $(AWIDGETSRC)
*** motif.orig/config/cf/lnxLib.tmpl	Fri Apr 28 11:04:01 2000
--- motif/config/cf/lnxLib.tmpl	Fri Jun 30 10:07:46 2000
***************
*** 1,37 ****
! XCOMM $TOG: lnxLib.tmpl /main/7 1998/03/20 14:26:41 mgreess $
  
  /*
   * Linux shared library template
   */
  
- /* Linux ELF shared libraries are deficient in link semantics */
  #if UseElfFormat
  #ifndef FixupLibReferences
  #define FixupLibReferences()						@@\
  XMULIBONLY = -lXmu							@@\
  XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
  #endif
  #ifndef XawClientLibs
  #define XawClientLibs $(XAWLIB) $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
  #endif
- #else
- #ifndef FixupLibReferences
- #define FixupLibReferences()						@@\
- XMULIB = -lXmu $(XLIB)
- #endif
  
! #endif
  
! #ifndef SharedXReqs
! # define SharedXReqs $(XTOOLLIB) $(XPLIB) $(XLIB) $(LDPOSTLIBS)
! #endif
  
! #ifndef SharedXmReqs
! # define SharedXmReqs $(LDPRELIBS) SharedXReqs -lc
! #endif
  
! #ifndef SharedTtReqs
! # define SharedTtReqs $(LDPRELIBS) SharedXReqs $(CXXLIB)
  #endif
  
! #define NoMessageCatalog
--- 1,46 ----
! XCOMM $XConsortium: lnxLib.tmpl,v 1.5 95/01/11 21:44:44 kaleb Exp $
! XCOMM $XFree86: xc/config/cf/lnxLib.tmpl,v 3.9 1996/02/24 04:32:52 dawes Exp $
  
  /*
   * Linux shared library template
   */
  
  #if UseElfFormat
+ 
  #ifndef FixupLibReferences
  #define FixupLibReferences()						@@\
  XMULIBONLY = -lXmu							@@\
  XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
  #endif
+ 
  #ifndef XawClientLibs
  #define XawClientLibs $(XAWLIB) $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
  #endif
  
! #define CplusplusLibC
  
! #define SharedX11Reqs
! #define SharedOldXReqs	$(LDPRELIB) $(XLIBONLY)
! #define SharedXtReqs	$(LDPRELIB) $(XLIBONLY) $(SMLIB) $(ICELIB)
! #define SharedXawReqs	$(LDPRELIB) $(XMULIB) $(XTOOLLIB) $(XLIB)
! #define SharedXmuReqs	$(LDPRELIB) $(XTOOLLIB) $(XLIB)
! #define SharedXextReqs	$(LDPRELIB) $(XLIBONLY)
! #define SharedXiReqs	$(LDPRELIB) $(XLIB)
! #define SharedPexReqs	$(LDPRELIB) $(XLIBONLY) MathLibrary
! #define SharedXtstReqs	$(LDPRELIB) $(XLIB)
! #define SharedXieReqs	$(LDPRELIB) $(XLIBONLY)
! #define SharedSMReqs	$(LDPRELIB) $(ICELIB)
! 
! #define SharedXReqs	$(XTOOLLIB) $(XPLIB) $(XLIB)
! #define SharedXmReqs	$(LDPRELIBS) SharedXReqs
! #define SharedMrmReqs	$(LDPRELIBS) $(XMLIB) SharedXReqs
! #define SharedUilReqs	$(LDPRELIBS) $(MRESOURCELIB) $(XMLIB) SharedXReqs
  
! #else	/* UseElfFormat */
  
! #ifndef FixupLibReferences
! #define FixupLibReferences()						@@\
! XMULIB = -lXmu $(XLIB)
  #endif
  
! #endif	/* UseElfFormat */
*** motif.orig/config/cf/lynx.cf	Fri Jul  7 15:22:07 2000
--- motif/config/cf/lynx.cf	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,341 ----
+ XCOMM platform:  $XFree86: xc/config/cf/lynx.cf,v 3.12.2.12 1999/07/22 08:13:52 hohndel Exp $
+ 
+ #ifndef OSName
+ #define OSName			DefaultOSName
+ #endif
+ #ifndef OSVendor
+ #define OSVendor		(LYNX Real-Time Systems, Inc)
+ #endif
+ #ifndef OSMajorVersion
+ #define OSMajorVersion		DefaultOSMajorVersion
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion		DefaultOSMinorVersion
+ #endif
+ #ifndef OSTeenyVersion
+ #define OSTeenyVersion		DefaultOSTeenyVersion
+ #endif
+ XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
+ 
+ #define HasGcc			YES
+ #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion > 2)
+ # define HasGcc2		YES
+ # ifndef HasGcc2ForCplusplus
+ #  define HasGcc2ForCplusplus	YES
+ # endif
+ #else
+ # define HasGcc2		NO
+ #endif
+ #ifndef HasGcc2ForCplusplus
+ # define HasGcc2ForCplusplus	YES
+ #endif
+ #define GccUsesGas		YES
+ #define UseGas			YES
+ #define GnuCpp			YES
+ #define HasShadowPasswd		NO
+ #ifndef HasLibCrypt
+ # define HasLibCrypt		NO
+ #endif
+ #define HasPutenv		YES
+ #define HasShm			YES
+ #define HasSockets		YES
+ #define HasVFork		NO
+ #define HasVarDirectory		NO
+ #if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion > 4)
+ # define HasBSD44Sockets 	YES
+ #endif
+ #define HasStickyDirBit		NO
+ 
+ #define HasPosixThreads		YES
+ #define ThreadedX		YES
+ #define HasThreadSafeAPI	YES	/* only 2.[345].0 ?? */
+ #if HasGcc2
+ # if OSMajorVersion == 2 && OSMinorVersion == 3
+ #  define ThreadsCompileFlags	-mposix -mthreads
+ #  define ThreadsCplusplusCompileFlags	-mposix -mthreads
+ # else
+ #  define ThreadsCompileFlags	-mthreads
+ #  define ThreadsCplusplusCompileFlags	-mthreads
+ # endif
+ #else
+ # define ThreadsCompileFlags	-m
+ # define ThreadsCplusplusCompileFlags	-m
+ #endif
+ #if OSMajorVersion == 2 && OSMinorVersion < 3
+ # define ThreadsLibraries /lib/thread/libc.a /lib/thread/libc_p.a
+ #endif
+ #if OSMajorVersion == 3 || (OSMajorVersion == 2 && OSMinorVersion <= 5)
+ # define ThreadPreStdAPIDefines	-DXPRE_STANDARD_API
+ #endif
+ #define AvoidNullMakeCommand	YES
+ #if OSMajorVersion > 2 || OSMinorVersion > 2
+ # define StripInstalledPrograms	YES
+ #else
+ /* under LynxOS AT V2.x /bin/strip will leave file.unstripped around
+  * and fail if installing across different file systems
+  */
+ #define StripInstalledPrograms	NO
+ #endif
+ #define CompressAllFonts	YES
+ #define Malloc0ReturnsNull	NO
+ #define NeedConstPrototypes	YES
+ #define NeedFunctionPrototypes	YES
+ #define NeedNestedPrototypes	YES
+ #define NeedVarargsPrototypes	YES
+ #define NeedWidePrototypes	NO
+ 
+ #define MkdirHierCmd		mkdir -p
+ 
+ #if HasGcc2
+ # if OSMajorVersion == 2 && OSMinorVersion == 3
+ #  define CplusplusCmd		g++ -mposix
+ #  define CcCmd			gcc -mposix
+ # else
+ #  define CplusplusCmd		g++
+ #  define CcCmd			gcc
+ # endif
+ # if OSMajorVersion > 2 || OSMinorVersion == 5
+ #  define DefaultCCOptions -ansi -pedantic -fcommon
+ # endif
+ #else
+ # define CplusplusCmd		g++ 
+ # define CcCmd			gcc 
+ # define DefaultCCOptions	-ansi
+ # define GccGasOption		-DGCCUSESGAS /* For SuperProbe */
+ #endif
+ #define AsCmd			as
+ #define LdCmd			ld
+ #define AsmDefines		-DUSE_GAS
+ #define CppCmd			/lib/cpp
+ #define YaccCmd			bison -y
+ /* make sure we take the right flex on 2.3.0 and 2.4.0 */
+ #define LexCmd			/bin/flex
+ #if OSMajorVersion > 2 || OSMinorVersion >= 5
+ # define LexLib			-lfl
+ #else
+ # define LexLib			/**/
+ #endif
+ /* On LynxOS AT 2.3.0 /lib/libm.a is a symbolic link to /lib/libc.a, so we
+  * screw up some POSIX functionality when -lm comes before -lc_p in our
+  * ld argument list. For LynxOS-AT we don't need -lm but for others we 
+  * do (e.g. SPARC)
+  */
+ #if OSMajorVersion == 2 && OSMinorVersion == 3
+ # define MathLibrary		-lc_p -lm
+ # define TermcapLibrary		-lc_p -ltermcap
+ #else
+ # define MathLibrary		-lm
+ # define TermcapLibrary		-ltermcap
+ #endif
+ #define PreProcessCmd		CcCmd -E
+ #if HasGcc2
+ # define PostIncDir		DefaultGccIncludeDir
+ #endif
+ #define LdCombineFlags		-r
+ #if HasGcc2
+ # ifdef i386Architecture
+ #  define OptimizedCDebugFlags	DefaultGcc2i386Opt
+ # else
+ #  define OptimizedCDebugFlags	-O2
+ # endif
+ #else
+ # define OptimizedCDebugFlags	-O
+ #endif
+ #if OSMajorVersion == 2 && OSMinorVersion <= 2
+ # define StandardDefines		-DLynx -DLynx_22 -DX_NOT_POSIX
+ #else
+ # if defined(i386Architecture)
+ /* need __i386__ for 2.5.0 AT and higher */
+ #  define StandardDefines		-DLynx -DX_LOCALE -D__i386__
+ # else
+ #  define StandardDefines		-DLynx -DX_LOCALE
+ # endif
+ #endif
+ #define StandardCppDefines	-traditional StandardDefines
+ #ifdef i386Architecture
+ # define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME -DPART_NET
+ # define ServerExtraDefines	-DGCCUSESGAS XFree86ServerDefines
+ # if OSMajorVersion == 2 && OSMinorVersion < 5
+ #  define XkbServerDefines	-DNEED_POPEN_WORKAROUND
+ # endif
+ #else
+ # if defined(SparcArchitecture)
+ #  define SparcConsoleDefines	-DPATCHED_CONSOLE
+ #  define ServerOSDefines 	-DDDXOSINIT
+ #  define ServerExtraDefines	-DGCCUSESGAS SparcConsoleDefines
+ #  define XkbServerDefines	-DXKB_ALWAYS_USES_SOFT_REPEAT
+ # else
+ #  define ServerOSDefines 	/**/
+ #  define ServerExtraDefines	-DGCCUSESGAS
+ # endif
+ #endif
+ #define ServerExtraSysLibs	$(CBRT) MathLibrary
+ #define ConnectionFlags		-DUNIXCONN -DTCPCONN
+ #if OSMajorVersion <= 2 && OSMinorVersion < 5
+ # define ExtraLibraries		-lbsd
+ #else
+ # define ExtraLibraries		-lbsd -llynx
+ #endif
+ #if !HasGcc2
+ # define ExtraLoadFlags		-k
+ #endif
+ #if OSMajorVersion == 2 && OSMinorVersion <= 2
+ # define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
+ #endif
+ 
+ /* 3.0 ships with a useable Tcl/Tk for XF86Setup */
+ #if OSMajorVersion == 3
+ # ifndef TkLibName
+ #  define TkLibName		tk4.2
+ # endif
+ # ifndef TkLibDir
+ #  define TkLibDir		/usr/lib
+ # endif
+ # ifndef TclLibName
+ #  define TclLibName		tcl7.6
+ # endif
+ # ifndef TclLibDir
+ #  define TclLibDir		/usr/lib
+ # endif
+ #endif
+ 
+ /* define HasMotif to YES for LynxOS with Motif
+  * installed according to the notes in README.LynxOS.
+  */
+ #ifndef HasMotif
+ # define HasMotif 		NO
+ #endif
+ #if HasMotif
+ # ifndef UseInstalledMotif
+ #  define UseInstalledMotif	YES
+ # endif
+ # ifndef SaberProgramTarget
+ #  define SaberProgramTarget(program,srclist,objlist,locallibs,syslibs) /**/
+ # endif
+ # define LocalTmplFile		<Motif.tmpl>
+ # define LocalRulesFile		<Motif.rules>
+ #endif
+ 
+ #define ManSourcePath   $(MANPATH)/cat
+ 
+ #ifndef ManSuffix
+ # define ManSuffix	1
+ #endif
+ #ifndef ManDir
+ # define ManDir		$(MANSOURCEPATH)1
+ #endif
+ #ifndef LibManSuffix
+ # define LibManSuffix	3
+ #endif
+ #ifndef LibmanDir
+ # define LibmanDir	$(MANSOURCEPATH)3
+ #endif
+ #ifndef FileManSuffix
+ # define FileManSuffix	5
+ #endif
+ #ifndef FileManDir
+ # define FileManDir	$(MANSOURCEPATH)5
+ #endif
+ 
+ /* groff 1.09 compiles right out of the box with LynxOS 2.3,
+  * so if you want to have manual pages you should install groff 1.09
+  * before you run 'make install.man'
+  */
+ #ifndef InstallManPageLong
+ #define InstallManPageLong(file,destdir,dest)                           @@\
+ install.man:: file.man                                                  @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	$(RM) $(DESTDIR)destdir/dest.$(MANSUFFIX)*			@@\
+ 	groff -e -t -man -Tascii file.man >/tmp/file.man		@@\
+ 	$(INSTALL) -c $(INSTMANFLAGS) /tmp/file.man $(DESTDIR)destdir/dest.$(MANSUFFIX) @@\
+ 	echo dest dest $(MANSUFFIX) >> $(DESTDIR)destdir/LIST$(MANSUFFIX) @@\
+ 	gawk '					\			@@\
+ 	/^\.SH[ 	]*NAME/ 	{ 	\			@@\
+ 		getline; sub("\\\\", "(" p ") "); print; exit	\	@@\
+ 	}' p=$(MANSUFFIX) file.man  >> $(DESTDIR)destdir/../whatis	@@\
+ 	$(RM) /tmp/file.man
+ #endif
+ 
+ #ifndef InstallManPageAliases
+ #define InstallManPageAliases(file,destdir,aliases)                     @@\
+ install.man::                                                           @@\
+ 	@(SUFFIX=`echo $(DESTDIR)destdir/file.* | cut -f2,3 -d.`; \	@@\
+ 	for i in aliases; do (set -x; \ 				@@\
+ 	$(RM) $(DESTDIR)destdir/$$i.*; \				@@\
+ 	(cd $(DESTDIR)destdir; $(LN) file.$${SUFFIX} \			@@\
+ 	$$i.$${SUFFIX})); \						@@\
+ 	echo $$i dest $(MANSUFFIX) >> $(DESTDIR)destdir/LIST$(MANSUFFIX); \ @@\
+ 	done)
+ #endif
+ 
+ #ifndef InstallGenManPageLong
+ #define InstallGenManPageLong(file,destdir,dest,suffix)                 @@\
+ install.man:: file.man                                                  @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	$(RM) $(DESTDIR)destdir/dest.suffix*				@@\
+ 	groff -e -t -man -Tascii file.man >/tmp/file.man		@@\
+ 	$(INSTALL) -c $(INSTMANFLAGS) /tmp/file.man $(DESTDIR)destdir/dest.suffix @@\
+ 	echo dest dest suffix >> $(DESTDIR)destdir/Concat(LIST,suffix)	 @@\
+ 	gawk '					\			@@\
+ 	/^\.SH[ 	]*NAME/ 	{ 	\			@@\
+ 		getline; sub("\\\\", "(" p ") "); print; exit	\	@@\
+ 	}' p=suffix file.man  >> $(DESTDIR)destdir/../whatis	@@\
+ 	$(RM) /tmp/file.man
+ #endif
+ 
+ #ifndef InstallMultipleMan
+ #define InstallMultipleMan(list,dest)                                   @@\
+ install.man:: list                                                      @@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	@case '${MFLAGS}' in *[i]*) set +e;; esac; \			@@\
+ 	for i in list; do \						@@\
+ 		(set -x; \						@@\
+ 		MNAME=`echo $$i | cut -f1 -d.`; \			@@\
+ 		$(RM) $(DESTDIR)dest/$${MNAME}*; \			@@\
+ 		groff -e -t -man -Tascii $$i >/tmp/$$i; \		@@\
+ 		$(INSTALL) -c $(INSTMANFLAGS) /tmp/$$i $(DESTDIR)dest/$${MNAME}.$(MANSUFFIX); \      @@\
+ 		echo $${MNAME} $${MNAME} $(MANSUFFIX) >> $(DESTDIR)dest/LIST$(MANSUFFIX)\  @@\
+ 		gawk '							\  @@\
+ 		/^\.SH[ 	]*NAME/ 	{ 			\  @@\
+ 			getline; sub("\\\\", "(" p ") "); print; exit	\  @@\
+ 		}' p=$(MANSUFFIX) $$i  >> $(DESTDIR)dest/../whatis	\  @@\
+ 		$(RM) /tmp/$$i); \					   @@\
+ 	done
+ #endif
+ 
+ /*
+  * Definitions for the SUN server on LynxOS SPARC
+  */
+ #ifdef SparcArchitecture
+ # define XsunLynxServer			YES
+ # define XsunLynxMonoServer		NO
+ # define BuildPexExt			YES
+ # define BuildXIE			YES
+ # ifndef BuildScreenSaverLibrary
+ #  define BuildScreenSaverLibrary	YES
+ # endif
+ # if BuildXInputExt
+ #  undef BuildXInputExt
+ # endif
+ # define BuildXInputExt			NO
+ # if BuildDPMSExt
+ #  undef BuildDPMSExt
+ # endif
+ # define BuildDPMSExt			NO
+ # define BuildXF86MiscExt		NO
+ /*
+  * XFree86 uses its own (more portable) database routines to speed up 
+  * the RGB database lookups
+  * However, if you want to use ndbm anyway, you can set that to NO in 
+  * site.def
+  */
+ # ifndef UseRgbTxt
+ #  define UseRgbTxt	YES
+ # endif
+ #endif
+ 
+ #ifndef i386Architecture
+ # define BuildXF86DGA NO
+ #endif
+ 
+ #include <xfree86.cf>
*** motif.orig/config/cf/mach.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/mach.cf	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/mach.cf,v 3.6 1995/09/22 07:06:31 dawes Exp $
  
  #define OSName           Mach 2.5/3.0
  #define OSVendor          /**/
--- 2,8 ----
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/mach.cf,v 3.7.2.2 1997/07/05 15:55:29 dawes Exp $
  
  #define OSName           Mach 2.5/3.0
  #define OSVendor          /**/
***************
*** 26,34 ****
  #define DefaultCCOptions	/**/
  #define GccGasOption 		-DGCCUSESGAS
  #if HasGcc2 && defined(i386Architecture)
! #define OptimizedCDebugFlags	-m486 DefaultGcc2i386Opt
  #else
! #define OptimizedCDebugFlags	-m486 -O2
  #endif
  
  #define AsmDefines		-DUSE_GAS
--- 26,34 ----
  #define DefaultCCOptions	/**/
  #define GccGasOption 		-DGCCUSESGAS
  #if HasGcc2 && defined(i386Architecture)
! #define OptimizedCDebugFlags	DefaultGcc2i386Opt
  #else
! #define OptimizedCDebugFlags	-O2
  #endif
  
  #define AsmDefines		-DUSE_GAS
*** motif.orig/config/cf/minix.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/minix.cf	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/minix.cf,v 3.3 1994/06/28 12:15:02 dawes Exp $
  
  
  /*
--- 2,8 ----
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/minix.cf,v 3.4 1996/12/27 06:50:21 dawes Exp $
  
  
  /*
*** motif.orig/config/cf/ncr.cf	Fri Apr 28 11:04:01 2000
--- motif/config/cf/ncr.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
--- 1,5 ----
  XCOMM platform:  $XConsortium: ncr.cf /main/28 1996/09/28 16:11:31 rws $
+ XCOMM platform:  $XFree86: xc/config/cf/ncr.cf,v 3.18 1996/12/27 06:50:22 dawes Exp $
  
  #ifndef OSName
  #define OSName			Unix System V Release 4/MP-RAS
***************
*** 14,19 ****
--- 15,24 ----
  
  /* Build Flags */
  
+ XCOMM
+ XCOMM These flags build correctly on SVR4/MP-RAS 3.0. If building on
+ XCOMM SVR4/MP-RAS 2.X, you must add -DWINTCP to StandardDefines
+ XCOMM
  #define StandardDefines		-DSVR4 -DNCR -Di386
  #define DefaultCCOptions	-Xa -Hnocopyr -W0,-asm
  #define DefaultCDebugFlags	-O3
***************
*** 86,91 ****
--- 91,99 ----
  	$(INSTALL) -c $(INSTMANFLAGS) file.z $(DESTDIR)destdir/dest.z; \@@\
  	fi
  
+ #define InstallGenManPageLong(file,destdir,dest,suffix)			@@\
+ 	InstallManPageLong(file,destdir,dest)
+ 
  #define InstallMultipleManSuffix(list,dest,suff)                        @@\
  install.man:: 								@@\
  	MakeDir($(DESTDIR)dest)						@@\
***************
*** 110,114 ****
--- 118,125 ----
  		(cd $(DESTDIR)destdir; $(LN) file.z $$i.z);\		@@\
  		); \							@@\
  	done
+ 
+ #define InstallGenManPageAliases(file,destdir,suffix,aliases)		@@\
+ 	InstallManPageAliases(file,destdir,aliases)
  
  #include <svr4.cf>
*** motif.orig/config/cf/NetBSD.cf	Fri Apr 28 11:03:58 2000
--- motif/config/cf/NetBSD.cf	Sat Jun  3 18:49:34 2000
***************
*** 2,54 ****
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/NetBSD.cf,v 3.44 1996/10/23 13:07:55 dawes Exp $
  
- #ifndef OpenBSDArchitecture
  
  #ifndef OSName
! #define OSName		NetBSD 1.2
  #endif
  #ifndef OSMajorVersion
! #define OSMajorVersion    1
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion    2
  #endif
- /* 1 = A, 2 = B, 3 = C */
  #ifndef OSTeenyVersion
! #define OSTeenyVersion	  0
! #endif
! 
! #else
! 
! #ifndef OSName
! #define OSName		OpenBSD 2.0
! #endif
! #ifndef OSMajorVersion
! #define OSMajorVersion    2
! #endif
! #ifndef OSMinorVersion
! #define OSMinorVersion    0
! #endif
! /* 1 = A, 2 = B, 3 = C */
! #ifndef OSTeenyVersion
! #define OSTeenyVersion	  0
! #endif
! 
  #endif
  
  #ifndef OSVendor
! #define	OSVendor	/**/
  #endif
! XCOMM operating system:  OSName
  
  /*
   * C library features
   */
! #if defined(OpenBSDArchitecture) || \
!    defined(NetBSDArchitecture) && (OsMajorVersion == 1 && OsMinorVersion >= 2)
! #  define HasPoll			YES
  #endif
  #define HasNdbm         	YES
  #define HasPutenv       	YES
--- 2,36 ----
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/NetBSD.cf,v 3.49.2.13 1999/10/12 17:18:20 hohndel Exp $
  
  
  #ifndef OSName
! #define OSName			DefaultOSName OSBinaryType
  #endif
  #ifndef OSMajorVersion
! #define OSMajorVersion		DefaultOSMajorVersion
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion		DefaultOSMinorVersion
  #endif
  #ifndef OSTeenyVersion
! #define OSTeenyVersion		DefaultOSTeenyVersion
  #endif
  
  #ifndef OSVendor
! #define	OSVendor		The NetBSD Foundation, Inc.
  #endif
! 
! XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
  
  /*
   * C library features
   */
! #if ((OSMajorVersion > 1) || \
!      (OSMajorVersion == 1 && OSMinorVersion > 2) || \
!      (OSMajorVersion == 1 && OSMinorVersion == 2 && OSTeenyVersion > 1))
! # define HasPoll		YES
  #endif
  #define HasNdbm         	YES
  #define HasPutenv       	YES
***************
*** 75,84 ****
  /*
   * There's a bug in NetBSD 1.0, 1.1 and 1.2 dlsym()
   */
! #if !defined(OpenBSDArchitecture) && OSMajorVersion == 1 && OSMinorVersion <= 2
  #  define HasDlsymBug		YES
  #endif
! 
  /*
   * Compiler Features
   */
--- 57,71 ----
  /*
   * There's a bug in NetBSD 1.0, 1.1 and 1.2 dlsym()
   */
! #if ((OSMajorVersion == 1 && OSMinorVersion < 2) || \
!      (OSMajorVersion == 1 && OSMinorVersion == 2 && OSTeenyVersion < 2))
  #  define HasDlsymBug		YES
  #endif
! /* Mkstemp is there since 1.2 (at least) */
! #if (!(OSMajorVersion == 0 || \
!        (OSMajorVersion == 1 && OSMinorVersion < 2))) 
! #define HasMkstemp		YES
! #endif
  /*
   * Compiler Features
   */
***************
*** 92,122 ****
  #define UseGas			YES
  #define GnuCpp			YES
  
- /* OpenBSD has gcc 2.7.2.1 which fixes the strength-reduce bug */
- #ifdef OpenBSDArchitecture
- #define DefaultGcc2i386Opt	-O2
- #endif
- 
  #define NeedConstPrototypes	YES
  #define NeedFunctionPrototypes	YES
  #define NeedNestedPrototypes	YES
  #define NeedVarargsPrototypes	YES
  #define NeedWidePrototypes	NO
  
  #define MkdirHierCmd		mkdir -p
  
  #define CppCmd          	/usr/libexec/cpp
  #define StandardCppDefines	-traditional
  #define PreProcessCmd   	CppCmd
- #ifndef OpenBSDArchitecture
  #define PreIncDir		/usr/include
- #else
- #define PreIncDir /usr/lib/gcc-lib/i386-unknown-openbsd1.2/2.7.2.1/include
- #endif
  
  #undef CcCmd
  #define CcCmd 			gcc
! #if UseInstalled
  #define DefaultCCOptions 	/**/
  #else
  #define DefaultCCOptions 	-ansi -Dasm=__asm
--- 79,101 ----
  #define UseGas			YES
  #define GnuCpp			YES
  
  #define NeedConstPrototypes	YES
  #define NeedFunctionPrototypes	YES
  #define NeedNestedPrototypes	YES
  #define NeedVarargsPrototypes	YES
  #define NeedWidePrototypes	NO
  
+ #define HasMktemp		NO
  #define MkdirHierCmd		mkdir -p
  
  #define CppCmd          	/usr/libexec/cpp
  #define StandardCppDefines	-traditional
  #define PreProcessCmd   	CppCmd
  #define PreIncDir		/usr/include
  
  #undef CcCmd
  #define CcCmd 			gcc
! #if defined(UseInstalled) && (!defined(XF86LinkKit) || !XF86LinkKit)
  #define DefaultCCOptions 	/**/
  #else
  #define DefaultCCOptions 	-ansi -Dasm=__asm
***************
*** 125,148 ****
  #define GccGasOption 		-DGCCUSESGAS
  #define AsmDefines 		-DUSE_GAS
  
  
  #ifdef i386Architecture
! # define OptimizedCDebugFlags 	-m486 DefaultGcc2i386Opt
  # if OSMajorVersion < 1
  #  define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME -DXNO_SYSCONF
  # else
  #  define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME
  # endif
  # if OSMajorVersion == 1 && OSMinorVersion >= 1 || OSMajorVersion >= 2
! #  define ServerExtraSysLibs	-li386
  # endif
  #else
  # define OptimizedCDebugFlags 	-O2
! # if defined(SparcArchitecture)
  #  define ServerOSDefines 	-DDDXOSINIT
  # else
  #  define ServerOSDefines 	/**/
  # endif
  #endif
  #ifdef i386Architecture
  # define ServerExtraDefines GccGasOption XFree86ServerDefines
--- 104,168 ----
  #define GccGasOption 		-DGCCUSESGAS
  #define AsmDefines 		-DUSE_GAS
  
+ /* UseElfFormat defaults to YES if __ELF__ set */
+ #ifndef UseElfFormat
+ # ifdef __ELF__
+ #  undef __ELF__			/* other imake files shouldn't care */
+ #  define UseElfFormat YES
+ # else
+ #  define UseElfFormat NO
+ # endif
+ #endif
+ 
+ /*
+  * Dynamic loading supported starting in 1.0 on a.out platforms,
+  * and on all ELF platforms.
+  *
+  * XXX May not be correct on NetBSD/pmax (ELF, but might not have
+  * working shared libs).
+  */
+ #if ((OSMajorVersion > 0) && \
+      !defined(AlphaArchitecture) && !defined(MipsArchitecture)) || \
+     UseElfFormat
+ # ifndef BuildDynamicLoading
+ # define BuildDynamicLoading	YES
+ # endif
+ #endif
+ 
+ #if UseElfFormat
+ #define DlLibrary		-rdynamic /* no -ldl yet */
+ #else
+ #define DlLibrary		/**/
+ #endif
  
  #ifdef i386Architecture
! # ifndef DefaultGcc2i386Opt
! #  if OSMajorVersion > 1 || (OSMajorVersion == 1 && OSMinorVersion > 2)
!     /* The GCC strength-reduce bug is fixed for NetBSD 1.3 and later */
! #   define DefaultGcc2i386Opt -O2
! #  endif
! # endif
! # define OptimizedCDebugFlags 	DefaultGcc2i386Opt
  # if OSMajorVersion < 1
  #  define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME -DXNO_SYSCONF
  # else
  #  define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME
  # endif
  # if OSMajorVersion == 1 && OSMinorVersion >= 1 || OSMajorVersion >= 2
! #  define ServerExtraSysLibs	-li386 DlLibrary
  # endif
  #else
  # define OptimizedCDebugFlags 	-O2
! # if defined(SparcArchitecture) || defined(AlphaArchitecture)
  #  define ServerOSDefines 	-DDDXOSINIT
  # else
  #  define ServerOSDefines 	/**/
  # endif
+ # if BuildDynamicLoading
+ #  define ServerExtraSysLibs	DlLibrary
+ # else
+ #  define ServerExtraSysLibs	/**/
+ # endif
  #endif
  #ifdef i386Architecture
  # define ServerExtraDefines GccGasOption XFree86ServerDefines
***************
*** 150,192 ****
  #  define XFree86ConsoleDefines -DPCCONS_SUPPORT -DPCVT_SUPPORT
  # endif
  #else
! # define ServerExtraDefines GccGasOption
  #endif
  
  #define StandardDefines	-DCSRG_BASED
  #define XawI18nDefines	-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
  
- #if OSMajorVersion > 0
- # ifndef BuildDynamicLoading
- # define BuildDynamicLoading	YES
- # endif
- #endif
- 
  #ifndef ExtraLibraries
  #define ExtraLibraries		/**/
  #endif
  #ifndef UseGnuMalloc
- #ifndef OpenBSDArchitecture
  #  define UseGnuMalloc		YES
- #else
- #  define UseGnuMalloc		NO
- #endif
  #endif
  #ifndef GnuMallocLibrary
  #define GnuMallocLibrary	-lgnumalloc
  #endif
  
  /*
   * Make & install Features
   */
! 
! #define HasMakefileSafeInclude	YES
! #define IncludeMakefile(file) @@# dependencies are in .depend
! #define DependFileName .depend
! #define AvoidNullMakeCommand 	YES
  #define StripInstalledPrograms	YES
  #define CompressAllFonts	YES
! #define DefaultUserPath		.:/bin:/usr/bin:/usr/local/bin:$(BINDIR)
  #define DefaultSystemPath	/sbin:/usr/sbin:/bin:/usr/bin:$(BINDIR)
  
  #ifdef  InstallCmd
--- 170,213 ----
  #  define XFree86ConsoleDefines -DPCCONS_SUPPORT -DPCVT_SUPPORT
  # endif
  #else
! # if defined(AlphaArchitecture)
! #  define ServerExtraDefines GccGasOption -D_XSERVER64
! # else
! #  define ServerExtraDefines GccGasOption
! # endif
  #endif
  
  #define StandardDefines	-DCSRG_BASED
  #define XawI18nDefines	-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
  
  #ifndef ExtraLibraries
  #define ExtraLibraries		/**/
  #endif
  #ifndef UseGnuMalloc
  #  define UseGnuMalloc		YES
  #endif
  #ifndef GnuMallocLibrary
  #define GnuMallocLibrary	-lgnumalloc
  #endif
  
+ #if ((OSMajorVersion > 1) || \
+      (OSMajorVersion == 1 && OSMinorVersion > 2) || \
+      (OSMajorVersion == 1 && OSMinorVersion == 2 && OSTeenyVersion > 1))
+ #ifndef HasZlib
+ #define HasZlib			  YES
+ #endif
+ #endif 
+ 
+ #define	AdmDir			/var/log
+ 
  /*
   * Make & install Features
   */
! #define HasBsdMake		YES
  #define StripInstalledPrograms	YES
  #define CompressAllFonts	YES
! #define GzipFontCompression	YES
! #define DefaultUserPath		/bin:/usr/bin:/usr/local/bin:$(BINDIR)
  #define DefaultSystemPath	/sbin:/usr/sbin:/bin:/usr/bin:$(BINDIR)
  
  #ifdef  InstallCmd
***************
*** 202,207 ****
--- 223,229 ----
   * Documentation formatting
   */
  #define NeqnCmd			neqn -Tlatin1
+ #define NroffCmd		nroff -Tlatin1
  #define	EqnCmd 			eqn -Tps
  #define TroffCmd        	groff -Tps
  
***************
*** 209,221 ****
   * To use the NetBSD Aperture driver
   */
  #if defined(i386Architecture)
! #ifndef HasNetBSDApertureDrv
! #define HasNetBSDApertureDrv	NO
  #endif
  #endif
  
- #define MakeHasPosixVariableSubstitutions	YES
- 
  /*
   * ForceSubdirs - force make to build subdirectories
   * 
--- 231,241 ----
   * To use the NetBSD Aperture driver
   */
  #if defined(i386Architecture)
! #ifndef HasNetBSDApertureDriver
! #define HasNetBSDApertureDriver	YES
  #endif
  #endif
  
  /*
   * ForceSubdirs - force make to build subdirectories
   * 
***************
*** 283,291 ****
  #define InstallGenManPageAliases(file,destdir,suffix,aliases)		@@\
  	InstallManPageAliases(file,destdir,aliases)
  
  #include <bsdLib.rules>
  
! #ifdef i386Architecture
  # include <xfree86.cf>
  #endif
  
--- 303,340 ----
  #define InstallGenManPageAliases(file,destdir,suffix,aliases)		@@\
  	InstallManPageAliases(file,destdir,aliases)
  
+ /*
+  * Shared libraries supported starting in 1.0 on a.out platforms,
+  * and on all ELF platforms.
+  *
+  * XXX May not be correct on NetBSD/pmax (ELF, but might not have
+  * working shared libs).
+  */
+ #if ((OSMajorVersion > 0) && \
+      !defined(AlphaArchitecture) && !defined(MipsArchitecture)) || \
+     UseElfFormat
+ # ifndef HasSharedLibraries
+ # define HasSharedLibraries	YES
+ # endif
+ #endif
+ 
+ #ifndef OSBinaryType
+ #if UseElfFormat
+ #define OSBinaryType	[ELF]
+ #else
+ #define OSBinaryType	/**/
+ #endif
+ #endif
+ 
+ #ifndef HasSharedLibraries
+ #define HasSharedLibraries	NO
+ #endif 
+ 
+ #if HasSharedLibraries
  #include <bsdLib.rules>
+ #endif /* HasSharedLibraries */
  
! #if defined(i386Architecture) || defined(Arm32Architecture)
  # include <xfree86.cf>
  #endif
  
***************
*** 325,328 ****
--- 374,384 ----
  sed 's/\.[0-9]*$$//'`
  #define SharedXtReqs $(XLIBONLY) $(SMLIB) $(ICELIB)
  #define SharedXmuReqs $(LDPRELIB) $(XTOOLONLYLIB) $(XONLYLIB) $(EXTENSIONLIB)
+ #endif
+ 
+ /*
+  * Definition for compiling on Alpha machines
+  */
+ #ifdef AlphaArchitecture
+ #define	BuildServer	NO
  #endif
*** motif.orig/config/cf/nto.cf	Fri Jul  7 15:22:07 2000
--- motif/config/cf/nto.cf	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,132 ----
+ /* $XFree86: xc/config/cf/nto.cf,v 1.1.2.3 1999/11/18 15:37:13 hohndel Exp $ */
+ /* Get X to build using the gcc toolchain, from QNX4 */
+ /* Let us try to separate the x86 stuff out of here as well... */ 
+ 
+ 
+ #ifndef OSName
+ #define OSName 			Neutrino	
+ #endif
+ 
+ #ifndef OSVendor
+ #define OSVendor		QNX Corp.
+ #endif
+ #ifndef OSMajorVersion
+ #define OSMajorVersion		2
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion		0
+ #endif
+ 
+ #if defined(i386Architecture)
+ #define BuildServer 		YES
+ #else
+ #define BuildServer		NO
+ #endif
+ 
+ /* Use a non-broken shell ... */
+ #define BourneShell		/bin/pdksh
+ #define OSDefines		-DNO_REGEX -DSTRINGS_ALIGNED
+ #define XawI18nDefines		-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
+ #define StripInstalledPrograms	NO
+ #define BuildLBX		YES 
+ 
+ #define SourceDefines		-D_POSIX_SOURCE
+ #define CrossCompiling		YES
+ #define HasGcc			YES
+ #define HasGcc2			YES
+ #define DoRanlibCmd 		YES
+ #define GccUsesGas		YES
+ #define MkdirHierCmd		mkdir -p
+ 
+ #define InstallCmd		/usr/X11R6/bin/install.qnx
+ #define DefaultCCOptions	
+ #define LibraryCCOptions
+ #define ServerCCOptions		
+ #define LocalLibraries
+ #define CLibrary
+ #define PosixLibraries
+ #define ConnectionFlags 	-DTCPCONN 
+ 
+ #define StandardCppDefines	-traditional StandardDefines
+ #define PreProcessCmd		CppCmd
+ 
+ #define HasShm			NO    /* For now as well */
+ #define HasSockets		YES
+ #define HasPutenv		YES
+ #define HasCbrt			NO
+ #define HasShadowPasswd	YES
+ 
+ #define AvoidNullMakeCommand    YES
+ #define CompressAllFonts        YES
+ #define Malloc0ReturnsNull      YES
+ #define NeedConstPrototypes     YES
+ #define NeedFunctionPrototypes  YES
+ #define NeedNestedPrototypes    YES
+ #define NeedVarargsPrototypes   YES
+ #define OptimizedCDebugFlags	-O2
+ #define DefaultCDebugFlags	-O2
+ 
+ #ifndef NeedWidePrototypes
+ #define NeedWidePrototypes      NO
+ #endif
+ 
+ #define LexLib
+ #define TermcapLibrary		-lncurses
+ #ifndef UseStaticTermcapLib
+ #define UseStaticTermcapLib     NO
+ #endif
+ 
+ /* Here, we put in the #defines which are CPU-specific */
+ /* Note that the full paths to the tools will go away when self-hosted */
+ 
+ #ifdef i386Architecture
+ #define BootstrapCFlags		-D__QNXNTO__ -Di386
+ #define OSDefines		-DNO_REGEX -DSTRINGS_ALIGNED 
+ #define NTODefines		-D__i386__ -D__ELF__ -D__QNXNTO__ -D_i386
+ #define CcCmd			/usr/gcc/ntox86/bin/gcc -bntox86
+ #define ArCmd			/usr/gcc/bin/ar cq
+ #define LdCmd			/usr/gcc/bin/ld
+ #define AsCmd			/usr/gcc/ntox86/bin/as
+ #define RanlibCmd		/usr/gcc/bin/ranlib
+ #define CppCmd			/usr/gcc/lib/gcc-lib/ntox86/2.8.1/cpp
+ #define AsmDefines		-DUSE_GAS -D__ELF__ -D__QNXNTO__
+ #define ExtraLibraries		-lsocket
+ #endif
+ 
+ /* MIPS architecture */
+ #ifdef mipsArchitecture
+ #define BootstrapCFlags		-D__QNXNTO__ -DMIPS
+ #define OSDefines		-DNO_REGEX -DSTRINGS_ALIGNED
+ #define NTODefines		-D__MIPS__ -D__ELF__ -D__QNXNTO__
+ #define CcCmd			/usr/gcc/ntomips/bin/gcc -bntomips -EL
+ #define ArCmd			/usr/gcc/bin/ar cq
+ #define LdCmd			/usr/gcc/bin/ld
+ #define AsCmd			/usr/gcc/ntomips/bin/as
+ #define RanlibCmd		/usr/gcc/bin/ranlib
+ #define AsmDefines		-DUSE_GAS -D__ELF__ -D__QNXNTO__
+ #define ExtraLibraries		-lsocket 
+ #endif
+ 
+ /* Power PC support */
+ #ifdef PPCArchitecture
+ #define BootstrapCFlags		-D__QNXNTO__ -DPPC
+ #define OSDefines		-DNO_REGEX -DSTRINGS_ALIGNED
+ #define NTODefines		-D__PPC__ -D__ELF__ -D__QNXNTO__
+ #define CcCmd			/usr/gcc/ntoppc/bin/gcc -bntoppc
+ #define ArCmd			/usr/gcc/bin/ar cq
+ #define LdCmd			/usr/gcc/bin/ld
+ #define AsCmd			/usr/gcc/ntoppc/bin/as
+ #define RanlibCmd		/usr/gcc/bin/ranlib
+ #define AsmDefines		-DUSE_GAS -D__ELF__ -D__QNXNTO__
+ #define ExtraLibraries		-lsocket
+ #endif
+ 
+ 
+ #define StandardDefines OSDefines NTODefines
+ #define ServerOSDefines -DDDXTIME XFree86ServerOSDefines 
+ #define ServerExtraDefines XFree86ServerDefines
+ #define ExtraFilesToClean       *.err *.map 
+ 
+ #include <nto.rules>
+ #include <xfree86.cf>
+ 
*** motif.orig/config/cf/nto.rules	Fri Jul  7 15:22:07 2000
--- motif/config/cf/nto.rules	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,212 ----
+ XCOMM $XFree86: xc/config/cf/nto.rules,v 1.1.2.1 1999/07/29 09:40:13 hohndel Exp $ 
+ XCOMM Rules for QNX/Neutrino
+ XCOMM Note that some of these will disappear when we stop cross-compiling
+ 
+ #ifndef HasSharedLibraries
+ #define HasSharedLibraries YES
+ #endif
+ 
+ #ifndef SharedDataSeparation
+ #define SharedDataSeparation NO
+ #endif
+ #ifndef SharedCodeDef
+ #define SharedCodeDef /**/
+ #endif
+ #ifndef SharedLibraryDef
+ #define SharedLibraryDef /**/
+ #endif
+ #ifndef SharedLibraryLoadFlags
+ #define SharedLibraryLoadFlags -shared
+ #endif
+ #ifndef PositionIndependentCFlags
+ #define PositionIndependentCFlags -fPIC
+ #endif
+ #ifndef PositionIndependentCplusplusFlags
+ #define PositionIndependentCplusplusFlags -fPIC
+ #endif
+ 
+ #define LinkFile(tofile, fromfile)				@@\
+ tofile:: fromfile						@@\
+ 	$(CP) fromfile tofile					@@\
+ 								@@\
+ includes:: tofile						@@\
+ 								@@\
+ depend:: tofile							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(tofile)
+ 
+ XCOMM This special rule is used to install the install script.
+ XCOMM Else theres a name conflict with the QNX installer.
+ 
+ #define QNXCopyInstaller(tofile, fromfile)			@@\
+ tofile:: 							@@\
+ 	$(CP) fromfile tofile					@@\
+ 								@@\
+ includes:: tofile
+ 
+ 
+ #define ObjectFromSpecialSource(dst, src, flags)		@@\
+ NoConfigRec(dst.c)						@@\
+ 								@@\
+ dst.c: src.c							@@\
+ 	RemoveFile($@)						@@\
+ 	$(CP) $? $@						@@\
+ 								@@\
+ SpecialCObjectRule(dst,NullParameter,flags)			@@\
+ 								@@\
+ includes:: dst.c						@@\
+ 								@@\
+ depend:: dst.c							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(dst.c)
+ 
+ 
+ #define ObjectFromSpecialAsmSource(dst, src, flags)		@@\
+ dst.s: src.s							@@\
+ 	RemoveFile($@)						@@\
+ 	$(CP) $? $@						@@\
+ 								@@\
+ dst.o: dst.s							@@\
+ 	AssembleObject(flags)					@@\
+ 								@@\
+ dst.i: dst.s							@@\
+ 	CPPOnlyAsm(dst,flags)					@@\
+ 								@@\
+ depend:: dst.s							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(dst.s)
+ 
+ XCOMM Special rule ComplexHostProgramTarget needed to compile 
+ XCOMM our utilities locally because we are cross-compiling...
+ XCOMM
+ 
+ #define ComplexHostProgramTarget(program)			@@\
+            CC=cc						@@\
+            STD_INCLUDES =					@@\
+            CFLAGS=$(TOP_INCLUDES) $(INCLUDES) $(BOOTSTRAPCFLAGS)	@@\
+            CCOPTIONS =						@@\
+            EXTRA_LOAD_FLAGS =					@@\
+            PROGRAM = program					@@\
+ 								@@\
+ AllTarget(program)						@@\
+ 								@@\
+ program: $(OBJS) $(DEPLIBS)					@@\
+ 	RemoveTargetProgram($@)					@@\
+ 	HostLinkRule($@,$(_NOOP_),$(OBJS),$(DEPLIBS) $(LOCAL_LIBRARIES)) @@\
+ 								@@\
+ DependTarget()							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(ProgramTargetName(program))
+ 
+ XCOMM And this rule is again for a host simple host program when cross-compiling.
+ XCOMM
+ 
+ #define SimpleHostProgramTarget(program)			@@\
+          OBJS = program.o					@@\
+          SRCS = program.c					@@\
+ 								@@\
+ ComplexHostProgramTarget(program)
+ 	
+ #define HostLinkRule(target,flags,src,libs)			@@\
+ 	cc -F -o target src $(ALLINCLUDES)
+ 
+ #ifndef FixupLibReferences
+ #define FixupLibReferences()						@@\
+ XMULIBONLY = -lXmu							@@\
+ XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+ #endif
+ 
+ #ifndef SharedLibraryTarget
+ #ifdef UseInstalled
+ #define LinkBuildSonameLibrary(lib) true
+ #else
+ #define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+ 	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
+ #endif
+ 
+ #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
+ AllTarget(Concat(lib,libname.so.rev))					@@\
+ 									@@\
+ Concat(lib,libname.so.rev):  solist $(EXTRALIBRARYDEPS)			@@\
+ 	$(RM) $@~							@@\
+ 	@SONAME=`echo $@ | sed 's/\.[^\.]*$$//'`; set -x; \		@@\
+ 		(cd down; $(CC) -o up/$@~ $(SHLIBLDFLAGS) -Wl,-soname,$$SONAME solist $(REQUIREDLIBS) BaseShLibReqs); \ @@\
+ 		$(RM) $$SONAME; $(LN) $@ $$SONAME; \			@@\
+ 		LinkBuildSonameLibrary($$SONAME)			@@\
+ 	$(RM) $@ 							@@\
+ 	$(MV) $@~ $@							@@\
+ 	$(RM) Concat(lib,libname.so)					@@\
+ 	$(LN) $@ Concat(lib,libname.so)					@@\
+ 	LinkBuildLibrary($@)						@@\
+ 	LinkBuildLibrary(Concat(lib,libname.so))			@@\
+ 									@@\
+ clean::									@@\
+ 	@MAJREV=`expr rev : '\(.*\)\.'`; \				@@\
+ 	set -x; $(RM) Concat(lib,libname.so.$$MAJREV)			@@\
+ 	$(RM) Concat(lib,libname.so.rev) Concat(lib,libname.so)
+ #endif
+ /*
+  * InstallSharedLibrary - generate rules to install the shared library.
+  * NOTE: file must be executable, hence "INSTBINFLAGS"
+  */
+ #ifndef InstallSharedLibrary
+ #define	InstallSharedLibrary(libname,rev,dest)				@@\
+ install:: Concat(lib,libname.so.rev) 					@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) $(INSTALLFLAGS) $(INSTBINFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
+ 	@T=`echo Concat($(DESTDIR)dest/lib,libname.so.rev) | sed 's/\.[^\.]*$$//'`;\
+ 	  set -x; $(RM) $$T && $(LN) Concat(lib,libname.so.rev) $$T	@@\
+ 	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
+ 	$(LN) Concat(lib,libname.so.rev) Concat($(DESTDIR)dest/lib,libname.so)
+ #endif /* InstallSharedLibrary */
+ 
+ /*
+  * SharedLibraryDataTarget - generate rules to create shlib data file;
+  */
+ #ifndef SharedLibraryDataTarget
+ #define SharedLibraryDataTarget(libname,rev,salist)
+ #endif /* SharedLibraryTarget */
+ 
+ /*
+  * InstallSharedLibraryData - generate rules to install the shared library data
+  */
+ #ifndef InstallSharedLibraryData
+ #define	InstallSharedLibraryData(libname,rev,dest)
+ #endif /* InstallSharedLibraryData */
+ 
+ #define BaseShLibReqs
+ 
+ 
+ 
+ /*
+  * ServerTargetWithFlags - generate rules to compile, link, and relink a server
+  */
+ #ifndef ServerTargetWithFlags
+ #define	ServerTargetWithFlags(server,subdirs,objects,libs,syslibs,flags) @@\
+ AllTarget(ProgramTargetName(server))					@@\
+ ProgramTargetName(server): subdirs objects libs				@@\
+ 	MoveToBakFile($@)						@@\
+ 	LinkRule($@,$(LDOPTIONS),objects,libs $(LDLIBS) syslibs) 	@@\
+ 									@@\
+ Concat(load,server):							@@\
+ 	MoveToBakFile(ProgramTargetName(server))			@@\
+ 	LinkRule(ProgramTargetName(server),$(LDOPTIONS),objects,libs $(LDLIBS) syslibs) @@\
+ 									@@\
+ loadX:: Concat(load,server)						@@\
+ 									@@\
+ SentinelProgramTarget(server,subdirs objects libs,objects libs $(LDLIBS) syslibs) @@\
+ SentinelLinkTarget(Concat(load,server),server,objects libs $(LDLIBS) syslibs) @@\
+ PurifyProgramTarget(server,subdirs objects libs,objects libs $(LDLIBS) syslibs) @@\
+ PurifyLinkTarget(Concat(load,server),server,objects libs $(LDLIBS) syslibs) @@\
+ ProofProgramTarget(server,subdirs objects libs,objects libs $(LDLIBS) syslibs) @@\
+ ProofLinkTarget(Concat(load,server),server,objects libs $(LDLIBS) syslibs) @@\
+ 									@@\
+ InstallProgramWithFlags(server,$(BINDIR),flags)				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(ProgramTargetName(server))
+ #endif /* ServerTargetWithFlags */
*** motif.orig/config/cf/OpenBSD.cf	Fri Jul  7 15:22:07 2000
--- motif/config/cf/OpenBSD.cf	Sat Jun  3 18:49:34 2000
***************
*** 0 ****
--- 1,592 ----
+ XCOMM platform:  $XFree86: xc/config/cf/OpenBSD.cf,v 3.1.2.14 1999/12/01 12:49:09 hohndel Exp $
+ XCOMM
+ XCOMM $OpenBSD: OpenBSD.cf,v 1.33 1998/09/27 04:52:48 rahnds Exp $
+ XCOMM
+ 
+ #ifndef OSName
+ #define OSName			DefaultOSName OSBinaryType
+ #endif
+ #ifndef OSMajorVersion
+ #define OSMajorVersion		DefaultOSMajorVersion
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion		DefaultOSMinorVersion
+ #endif
+ #ifndef OSTeenyVersion
+ #define OSTeenyVersion		DefaultOSTeenyVersion
+ #endif
+ 
+ #ifndef OSVendor
+ #define	OSVendor	/**/
+ #endif
+ XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
+ 
+ /*
+  * C library features
+  */
+ #define HasPoll			YES
+ #define HasNdbm         	YES
+ #define HasPutenv       	YES
+ #define HasSnprintf		YES
+ #define HasBSD44Sockets 	YES
+ #define Malloc0ReturnsNull	NO
+ #define SetTtyGroup     	YES
+ #define DBMLibrary		/**/
+ #define HasLibCrypt		NO
+ #define HasShm          	YES
+ #define HasWChar32		YES
+ #define HasMkstemp		YES
+ #define HasZlib			YES
+ 
+ /*
+  * Compiler Features
+  */
+ #undef HasGcc
+ #define HasGcc			YES
+ #define HasGcc2			YES
+ #ifndef HasGcc2ForCplusplus
+ #define HasGcc2ForCplusplus	YES
+ #endif
+ #define GccUsesGas		YES
+ #define UseGas			YES
+ #define GnuCpp			YES
+ 
+ 
+ #define NeedConstPrototypes	YES
+ #define NeedFunctionPrototypes	YES
+ #define NeedNestedPrototypes	YES
+ #define NeedVarargsPrototypes	YES
+ #define NeedWidePrototypes	NO
+ 
+ #define MkdirHierCmd		mkdir -p
+ 
+ #define CppCmd          	/usr/libexec/cpp
+ #define StandardCppDefines	-traditional
+ #define PreProcessCmd   	CppCmd
+ #define PreIncDir 		DefaultGccIncludeDir
+ 
+ #undef CcCmd
+ #define CcCmd 			gcc
+ #if defined(UseInstalled) && (!defined(XF86LinkKit) || !XF86LinkKit)
+ #define DefaultCCOptions 	/**/
+ #else
+ #define DefaultCCOptions 	-ansi -Dasm=__asm
+ #endif
+ 
+ #define GccGasOption 		-DGCCUSESGAS
+ #define AsmDefines 		-DUSE_GAS
+ 
+ #ifdef i386Architecture
+ # ifndef DefaultGcc2i386Opt
+ #  if (OSMajorVersion == 2 && OSMinorVersion >= 3) || OSMajorVersion > 2
+     /* The GCC strength-reduce bug is fixed for OpenBSD 2.3 and later */
+ #   define DefaultGcc2i386Opt	-O2
+ #  endif
+ # endif
+ # define OptimizedCDebugFlags	DefaultGcc2i386Opt
+ # define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME
+ # define ServerExtraSysLibs	-li386
+ # define LdPostLib		/**/
+ #else
+ # define OptimizedCDebugFlags 	-O2
+ # if defined(SparcArchitecture) || defined(AlphaArchitecture) || defined(AmigaArchitecture) || defined(Sun3Architecture)
+ #  define ServerOSDefines 	-DDDXOSINIT
+ # else
+ #  define ServerOSDefines 	/**/
+ # endif
+ #endif
+ #if defined(i386Architecture) || defined(ArcArchitecture)
+ # define ServerExtraDefines GccGasOption XFree86ServerDefines
+ # ifndef XFree86ConsoleDefines
+ #  if defined(ArcArchitecture)
+ #   define XFree86ConsoleDefines -DPCCONS_SUPPORT
+ #  else
+ #   define XFree86ConsoleDefines -DPCCONS_SUPPORT -DPCVT_SUPPORT
+ #  endif
+ # endif
+ #else
+ # if defined(AlphaArchitecture)
+ #  define ServerExtraDefines GccGasOption -D_XSERVER64
+ # else
+ #  if !defined(Sun3Architecture)
+ #   define ServerExtraDefines GccGasOption
+ #  endif
+ # endif
+ #endif
+ 
+ #define StandardDefines	-DCSRG_BASED
+ #define XawI18nDefines	-DUSE_XWCHAR_STRING -DUSE_XMBTOWC
+ 
+ 
+ #ifndef ExtraLibraries
+ #define ExtraLibraries		/**/
+ #endif
+ #define UseGnuMalloc		NO
+ 
+ #define	AdmDir			/var/log
+ 
+ /*
+  * Make & install Features
+  */
+ 
+ #define HasBsdMake		YES
+ 
+ #define StripInstalledPrograms	YES
+ #define BuildCyrillicFonts	YES
+ #define GzipFontCompression	YES
+ #define DefaultUserPath		/bin:/usr/bin:/usr/local/bin:$(BINDIR)
+ #define DefaultSystemPath	/sbin:/usr/sbin:/bin:/usr/bin:$(BINDIR)
+ 
+ #define InstUidFlags		-m 4755
+ 
+ #ifdef  InstallCmd
+ # undef  InstallCmd
+ # define InstallCmd 		/usr/bin/install
+ #endif
+ 
+ #ifndef ExtraFilesToClean
+ # define ExtraFilesToClean 	*.core
+ #endif
+ 
+ /*
+  * Documentation formatting
+  */
+ #define NeqnCmd			neqn -Tlatin1
+ #define NroffCmd		nroff -Tlatin1
+ #define	EqnCmd 			eqn -Tps
+ #define TroffCmd        	groff -Tps
+ 
+ /*
+  * To use the NetBSD Aperture driver
+  */
+ #if defined(i386Architecture)
+ #ifndef HasNetBSDApertureDriver
+ #define HasNetBSDApertureDriver	YES
+ #endif
+ #endif
+ 
+ 
+ /*
+  * Man pages need to be formatted when installed, so override the default
+  * imake rules.
+  */
+ #define ManSuffix	1
+ #define FileManSuffix	5
+ #define ManSourcePath	$(MANPATH)/cat
+ 
+ #define InstallManPageLong(file,destdir,dest)                           @@\
+ all:: file.0								@@\
+ 									@@\
+ file.0:: file.man							@@\
+ 	@if [ -f file.man ]; \						@@\
+ 	then \								@@\
+ 	cat file.man | $(NEQN) | $(TBL) | $(NROFF) $(MANMACROS) | $(COL) >/tmp/$$$$.man; \	@@\
+ 	cp /tmp/$$$$.man file.0; \					@@\
+ 	$(RM) /tmp/$$$$.man; \						@@\
+ 	fi 								@@\
+ 									@@\
+ install.man::                                                           @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	-@if [ -f file.0 ]; \						@@\
+ 	then \								@@\
+ 	$(INSTALL) -c $(INSTMANFLAGS) file.0 $(DESTDIR)destdir/dest.0; \@@\
+ 	fi								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(file.0)
+ 
+ #define InstallGenManPageLong(file,destdir,dest,suffix)			@@\
+ 	InstallManPageLong(file,destdir,dest)
+ 
+ #define InstallMultipleManSuffix(list,dest,suff)                        @@\
+ install.man:: 								@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	case '${MFLAGS}' in *[i]*) set +e;; esac; \			@@\
+ 	for i in list; do \                                             @@\
+ 	  (set -x; \							@@\
+ 	  cat $$i.suff | $(NEQN) | $(TBL) | $(NROFF) $(MANMACROS) | $(COL) >/tmp/$$$$.suff; \	@@\
+ 	  $(INSTALL) -c $(INSTMANFLAGS) /tmp/$$$$.suff $(DESTDIR)dest/$$i.0; \	@@\
+ 	  $(RM) /tmp/$$$$.suff); \						@@\
+ 	done
+ 
+ #define InstallMultipleMan(list,dest)                                   @@\
+ 	InstallMultipleManSuffix(list,dest,man)
+ 
+ #define InstallManPageAliases(file,destdir,aliases)                     @@\
+ install.man:: 								@@\
+ 	@case '${MFLAGS}' in *[i]*) set +e;; esac; \                    @@\
+ 	for i in aliases; do \                                          @@\
+ 		(set -x; \						@@\
+ 		$(RM) $(DESTDIR)destdir/$$i.0;\  			@@\
+ 		(cd $(DESTDIR)/destdir; $(LN) file.0 $$i.0);\ 		@@\
+ 		); \							@@\
+ 	done
+ 
+ #define InstallGenManPageAliases(file,destdir,suffix,aliases)		@@\
+ 	InstallManPageAliases(file,destdir,aliases)
+ 
+ /*
+  * InstallFontAliases - generate rules to install font aliases
+  *                      databases without comments for X11R5 servers
+  */
+ #ifndef InstallFontAliasesNoComment
+ #define InstallFontAliasesNoComment(dest)				@@\
+ install:: fonts.alias							@@\
+ 	$(RM) _fonts.alias 						@@\
+ 	sed -e '/^!/d' -e '/^$$/d' < fonts.alias > _fonts.alias		@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) $(INSTALLFLAGS) $(INSTALLDATFLAGS) _fonts.alias \	@@\
+ 	$(DESTDIR)dest/fonts.alias					@@\
+ 	$(RM) _fonts.alias
+ #endif /* InstallFontAliasesNoComment */
+ 
+ /* We now only use the XFree86 tree - thus we can define this
+  * independent of the architecture
+  */
+ #ifndef XF86Contrib
+ #define XF86Contrib
+ #endif
+ 
+ /*
+  * Architecture specific sections - put all architecture dependent
+  * options and setting here into the correct section
+  */
+ 
+ /*
+  * Definitions for the alpha architecture
+  */
+ #ifdef AlphaArchitecture
+ 
+  /*
+   * The code for an Alpha XF86_TGA server compiles, but it DOES NOT work
+   */
+ # define BuildAlphaXF86		NO
+ 
+ # if BuildAlphaXF86
+ #  include <xf86.rules>
+ # endif
+ 
+  /*
+   * For the current ECOFF system
+   */
+ # define HasSharedLibraries	NO
+ # define UseElfFormat		NO
+ # define BuildDynamicLoading	NO
+  /*
+   * For the upcoming ELF system
+   */
+ # if 0 /* NOT YET */
+ #  define HasSharedLibraries	YES
+ #  define UseElfFormat		YES
+ #  define BuildDynamicLoading	YES
+ # endif
+ 
+ # define BuildServer		YES
+ # define XnestServer		YES
+ # define XVirtualFramebufferServer	YES
+ 
+ # define BuildDPMSLibrary	NO
+ # define BuildDPMSExt		NO
+ 
+ # define BuildXF86DGALibrary	NO
+ # define BuildXF86DGA		NO
+ 
+ # ifndef XF86S3Server
+ #  define XF86S3Server		NO
+ # endif
+ # ifndef XF86S3VServer
+ #  define XF86S3VServer		NO
+ # endif
+ # ifndef XF86Mach64Server
+ #  define XF86Mach64Server	NO
+ # endif
+ # ifndef XF86P9000Server
+ #  define XF86P9000Server	NO
+ # endif
+ # ifndef XF86I128Server
+ #  define XF86I128Server	NO
+ # endif
+ # if BuildAlphaXF86
+ #  ifndef XF86TGAServer
+ #   define XF86TGAServer	YES
+ #  endif
+ # else
+ #  define XF86TGAServer		NO
+ # endif
+ # ifndef XF86SVGAServer
+ #  define XF86SVGAServer	NO
+ # endif
+ # ifndef XF86MonoServer
+ #  define XF86MonoServer	NO
+ # endif
+ # ifndef XF86SvgaDrivers
+ #  define XF86SvgaDrivers	mga s3v
+ # endif
+ # ifndef XF86Vga2Drivers
+ #  define XF86Vga2Drivers	generic
+ # endif
+ 
+ # if BuildAlphaXF86
+ #  include <xfree86.cf>
+ # endif
+ 
+ #endif /* AlphaArchitecture */
+ 
+ 
+ /*
+  * Definitions for the i386 architecture
+  */
+ #ifdef i386Architecture
+ 
+ /* Support for USB Mices */
+ #if OSMajorVersion == 2 && OSMinorVersion >= 6 || OSMajorVersion > 2
+ #define UsbMouseSupport		YES
+ #define HasLibUsb		NO
+ #endif
+ 
+ /*
+  * For safety reasons, don't install the X server setuid on OpenBSD
+  * use xdm instead
+  */
+ # define InstallXserverSetUID	NO
+ 
+ # define BuildDynamicLoading	YES
+ # include <xfree86.cf>
+ 
+ #endif /* i386Architecture */
+ 
+ 
+ /*
+  * Definitions for the m68k architecture (currently amiga, hp300,
+  * mac68k, mvme68k, sun3)
+  */
+ #ifdef Mc68020Architecture
+ 
+ /*
+  * Function CSE makes gas -k not recognize external function calls as lazily
+  * resolvable symbols, thus sometimes making ld.so report undefined symbol
+  * errors on symbols found in shared library members that would never be
+  * called.  Ask niklas@openbsd.org for details.
+  */
+ # define PositionIndependentCFlags -fpic -fno-function-cse
+ 
+ #endif /* Mc68020Architecture */
+ 
+ 
+ /*
+  * Definitions for the amiga architecture
+  */
+ #ifdef AmigaArchitecture
+ 
+ # include <xf86.rules>
+ # define BuildServer		NO
+ 
+ #endif /* AmigaArchitecture */
+ 
+ 
+ /*
+  * Definitions for the hp300 architecture
+  */
+ #ifdef Hp300Architecture
+ 
+ # include <xf86.rules>
+ # define BuildServer		NO
+ /* For the X11R5 server */
+ # define CompressAllFonts	NO
+ # define InstallFontAliases	InstallFontAliasesNoComment
+ # define UseRgbTxt		NO
+ 
+ #endif /* Hp300Architecture */
+ 
+ 
+ /*
+  * Definitions for the mac68k architecture
+  */
+ #ifdef mac68kArchitecture
+ 
+ # include <xf86.rules>
+ # define BuildServer		NO
+ 
+ #endif /* mac68kArchitecture */
+ 
+ 
+ /*
+  * Definitions for the mvme68k architecture
+  */
+ #ifdef Mvme68kArchitecture
+ 
+ # include <xf86.rules>
+ # define BuildServer		NO
+ 
+ #endif /* Mvme68kArchitecture */
+ 
+ 
+ /*
+  * Definitions for the sun3 architecture
+  */
+ #ifdef Sun3Architecture
+ 
+ # include <xf86.rules>
+ 
+ # define OptimizedCDebugFlags  -O2
+ # define ServerOSDefines       -DDDXOSINIT
+ # define BootstrapCFlags       -Dsun3
+ # define UnalignedReferencesAllowed	YES /* changes _XtCopyArgs() */
+ /* Note: -ansi turns off -Dmc68000 */
+ # define ServerExtraDefines    GccGasOption -Dmc68000 -Dmc68020
+ 
+ # ifndef Xsun24Server
+ #  define Xsun24Server		YES
+ # endif
+ # ifndef XsunServer
+ #  define XsunServer		YES
+ # endif
+ # ifndef XsunMonoServer
+ #  define XsunMonoServer	YES
+ # endif
+ 
+ #define XkbServerDefines  -DXKB_ALWAYS_USES_SOFT_REPEAT
+ 
+ #if 0
+ # ifndef BuildXKB
+ #  define BuildXKB        	NO
+ # endif
+ 
+ # ifndef BuildXKBlib
+ #  define BuildXKBlib     	NO
+ # endif
+ 
+ # ifndef BuildPexExt
+ #  define BuildPexExt 		(XsunServer || Xsun24Server)
+ # endif
+ #endif
+ 
+ #endif /* Sun3Architecture */
+ 
+ 
+ /*
+  * Definitions for the mips architecture (currently arc, pmax)
+  */
+ #ifdef MipsArchitecture
+ 
+  /*
+   * Mips ELF shared libs need some special handling.
+   */
+ # define PositionIndependentCFlags
+ # define SharedLibraryLoadFlags -x -shared --whole-archive -soname `echo $@ | sed 's/\.[0-9]*$$//'`
+ # define SharedXtReqs -L$(BUILDLIBDIR) $(XLIBONLY) $(SMLIB) $(ICELIB)
+ # define SharedXmuReqs $(LDPRELIB) $(XTOOLONLYLIB) $(XONLYLIB) $(EXTENSIONLIB)
+ 
+ #endif /* MipsArchitecture */
+ 
+ 
+ /*
+  * Definitions for the arc architecture
+  */
+ #ifdef ArcArchitecture
+ 
+ # include <xfree86.cf>
+ 
+ #endif /* ArcArchitecture */
+ 
+ 
+ /*
+  * Definitions for the pmax architecture
+  */
+ #ifdef PmaxArchitecture
+ 
+ # include <xf86.rules>
+ # define BuildServer		NO
+ /* For the X11R5 server */
+ # define CompressAllFonts	NO
+ # define InstallFontAliases	InstallFontAliasesNoComment
+ # define UseRgbTxt		NO
+ 
+ #endif /* PmaxArchitecture */
+ 
+ #ifdef ppcArchitecture
+ # define HasSharedLibraries	NO
+ # define UseElfFormat		YES
+ # define BuildDynamicLoading	NO
+ #endif
+ 
+ /*
+  * Definitions for the sparc architecture
+  */
+ #ifdef SparcArchitecture
+ 
+ # include <xf86.rules>
+ 
+ # ifndef Xsun24Server
+ # define Xsun24Server		YES
+ # endif
+ # ifndef XsunServer
+ # define XsunServer		YES
+ # endif
+ # ifndef XsunMonoServer
+ # define XsunMonoServer		YES
+ # endif
+ 
+ #define XkbServerDefines  -DXKB_ALWAYS_USES_SOFT_REPEAT
+ 
+ # ifndef BuildPexExt
+ #  define BuildPexExt 	(XsunServer || Xsun24Server)
+ # endif
+ #endif /* SparcArchitecture */
+ 
+ 
+ /* End or architecture specific section */
+ 
+ /*
+  * Generic settings for all architectures
+  */
+ 
+ #ifndef XVirtualFramebufferServer
+ # undef BuildServer
+ # define BuildServer			YES
+ # define XVirtualFramebufferServer	YES
+ #endif
+ 
+ #ifndef XnestServer
+ # undef BuildServer
+ # define BuildServer			YES
+ # define XnestServer			YES
+ #endif
+ 
+ #ifndef BuildScreenSaverLibrary
+ # define BuildScreenSaverLibrary	YES
+ #endif
+ 
+ #ifndef ForceNormalLib
+ # define ForceNormalLib			YES
+ #endif
+ 
+ #ifndef BuildDynamicLoading
+ # define BuildDynamicLoading		NO
+ #endif
+ 
+ #ifndef CompressAllFonts
+ # define CompressAllFonts		YES
+ #endif
+ 
+ /*
+  * XFree86 uses its own (more portable) database routines to speed up
+  * the RGB database lookups
+  * However, if you want to use ndbm anyway, you can set that to NO in
+  * host.def
+  */
+ #ifndef UseRgbTxt
+ # define UseRgbTxt			YES
+ #endif
+ 
+ #ifndef OSBinaryType
+ # if UseElfFormat
+ #  define OSBinaryType			[ELF]
+ # else
+ #  define OSBinaryType			/**/
+ # endif
+ #endif
+ 
+ /* This must come last */
+ #include <bsdLib.rules>
+ 
*** motif.orig/config/cf/os2.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/os2.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,12 ****
! XCOMM $TOG: os2.cf /main/2 1997/08/05 08:51:25 kaleb $
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/os2.cf,v 3.14 1996/10/17 15:09:58 dawes Exp $
  
  #define OSName           OS/2
  #define OSVendor	 IBM
! #define OSMajorVersion    3
  #define OSMinorVersion    0
  
  /*
--- 1,12 ----
! XCOMM $XConsortium: os2.cf /main/1 1996/10/31 14:47:25 kaleb $
  
  
  
! XCOMM platform:  $XFree86: xc/config/cf/os2.cf,v 3.18.2.8 1999/07/13 07:09:36 hohndel Exp $
  
  #define OSName           OS/2
  #define OSVendor	 IBM
! #define OSMajorVersion    4
  #define OSMinorVersion    0
  
  /*
***************
*** 19,26 ****
   */
  #define BootstrapCFlags   -DBSD43
  
! /* X_WCHAR and X_LOCALE are set in Xosdefs.h */
! #define StandardDefines   /**/
  #define XawI18nDefines    -DUSE_XWCHAR_STRING -DUSE_XMBTOWC
  
  /* This will redirect everything to /XFree86
--- 19,25 ----
   */
  #define BootstrapCFlags   -DBSD43
  
! #define StandardDefines   -DX_LOCALE -DX_WCHAR
  #define XawI18nDefines    -DUSE_XWCHAR_STRING -DUSE_XMBTOWC
  
  /* This will redirect everything to /XFree86
***************
*** 44,49 ****
--- 43,49 ----
  
  /* more directories */
  #define AdmDir		        $(LIBDIR)/adm
+ #define ConfigDir		$(X11ROOT)$(LIBDIR)/config
          DESTDIR = $(X11ROOT)
  
  /* for the man pages */
***************
*** 62,68 ****
  #define NroffCmd	groff -Tascii
  #define	EqnCmd 		eqn -Tascii
  #define TroffCmd        groff -Tps
-           COL = /usr/bin/col
           NEQN = NeqnCmd
          NROFF = NroffCmd
  
--- 62,67 ----
***************
*** 70,77 ****
--- 69,81 ----
  #define OSDefines		-D__EMX__ -D__i386__ -Demxos2 -D_POSIX_SOURCE \
  				-D_BSD_SOURCE -D_GNU_SOURCE
  
+ #ifndef BuildXKB
  #define BuildXKB		YES
+ #endif
  #define BuildImplibs		YES
+ #ifndef BuildLBX
+ #define BuildLBX		YES
+ #endif
  
  /* some more properties of the OS/2 implementation */
  #define HasNdbm         	YES
***************
*** 86,112 ****
  #define	HasSymLinks		NO
  #define HasVFork		NO
  #define HasVarDirectory		NO
  #define Malloc0ReturnsNull	YES
  #define SetTtyGroup     	NO
  #ifndef HasLibCrypt
  # define HasLibCrypt		NO
  #endif
  #ifndef HasShm
! # define HasShm          	NO
  #endif
  #define ConnectionFlags		-DTCPCONN -DOS2PIPECONN
  #define StdIncDir $(C_INCLUDE_PATH)
  
! /* XF86Setup stuff */
! #define HasTcl			YES
! #define TclLibDir		$(X11ROOT)$(SHLIBDIR)
! #define TclIncDir		$(X11ROOT)$(INCROOT)/tcl
! #define TclLibName		xtcl
! 
! #define HasTk			YES
! #define TkLibDir		$(X11ROOT)$(SHLIBDIR)
! #define TkIncDir		$(X11ROOT)$(INCROOT)/tk
! #define TkLibName		xtk
  
  /*
   * Compiler Features
--- 90,118 ----
  #define	HasSymLinks		NO
  #define HasVFork		NO
  #define HasVarDirectory		NO
+ #define HasStrcasecmp		NO
  #define Malloc0ReturnsNull	YES
  #define SetTtyGroup     	NO
  #ifndef HasLibCrypt
  # define HasLibCrypt		NO
  #endif
  #ifndef HasShm
! # define HasShm          	YES
  #endif
  #define ConnectionFlags		-DTCPCONN -DOS2PIPECONN
  #define StdIncDir $(C_INCLUDE_PATH)
+ #define HasStickyDirBit		NO
  
! /* XF86Setup stuff - does not work yet! */
! #define HasTcl			NO
! /*define TclLibDir		$(X11ROOT)$(SHLIBDIR)*/
! /*define TclIncDir		$(X11ROOT)$(INCROOT)/tcl*/
! /*define TclLibName		xtcl*/
! 
! #define HasTk			NO
! /*define TkLibDir		$(X11ROOT)$(SHLIBDIR)*/
! /*define TkIncDir		$(X11ROOT)$(INCROOT)/tk*/
! /*define TkLibName		xtk*/
  
  /*
   * Compiler Features
***************
*** 130,140 ****
  #define PreProcessCmd	CppCmd
  
  #define CcCmd	gcc
! #define DefaultCCOptions	-D__ST_MT_ERRNO -Zmtd -Zsysv-signals
! #define LibraryCCOptions	-D__ST_MT_ERRNO -Zmtd -Zsysv-signals
! #define ServerCCOptions		-D__ST_MT_ERRNO  -Zmtd -Zsysv-signals
  
! #define CplusplusCmd	g++
  #define CplusplusOptions	-Zmtd -Zsysv-signals
  
  #define MakeCmd x11make 
--- 136,146 ----
  #define PreProcessCmd	CppCmd
  
  #define CcCmd	gcc
! #define DefaultCCOptions	-D__ST_MT_ERRNO__ -Zmtd -Zsysv-signals
! #define LibraryCCOptions	-D__ST_MT_ERRNO__ -Zmtd -Zsysv-signals
! #define ServerCCOptions	-D__ST_MT_ERRNO__ -Zmtd -Zsysv-signals
  
! #define CplusplusCmd g++
  #define CplusplusOptions	-Zmtd -Zsysv-signals
  
  #define MakeCmd x11make 
***************
*** 145,153 ****
  #define InstallCmd	install
  
  #define LdCmd	ld
! #define ExtraLoadFlags	/**/
! #define ExtraLibraries	$(LIBRARY_PATH)/binmode.Osuf -lsocket -lbsd
! /*define ServerExtraSysLibs -lemxio*/
  
  /* quite a number of programs you need, most of them the same as
   * with Unix, but listed here for completeness
--- 151,158 ----
  #define InstallCmd	install
  
  #define LdCmd	ld
! #define ExtraLoadFlags	-Zbin-files
! #define ExtraLibraries	-lsocket -lbsd
  
  /* quite a number of programs you need, most of them the same as
   * with Unix, but listed here for completeness
***************
*** 161,166 ****
--- 166,172 ----
  #define LintCmd	/**/
  #define MvCmd	mv
  #define CompressCmd	compress
+ #define GzipCmd	gzip
  #define LnCmd cp
  #define CpCmd cp
  #define RmCmd	ImakeHelper 4 
***************
*** 186,202 ****
  #define InstDatFlags /**/
  #define InstallFlags /**/
  
! #ifdef i386Architecture
! # define OptimizedCDebugFlags 	-m486 DefaultGcc2i386Opt
! # define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME
! #else
! # define OptimizedCDebugFlags 	-O
! # define ServerOSDefines 	/**/
! #endif
! #ifdef i386Architecture
  #define ServerExtraDefines GccGasOption XFree86ServerDefines
! #else
! #define ServerExtraDefines GccGasOption
  #endif
  
  /*
--- 192,203 ----
  #define InstDatFlags /**/
  #define InstallFlags /**/
  
! #define OptimizedCDebugFlags 	DefaultGcc2i386Opt
! #define ServerOSDefines	XFree86ServerOSDefines -DDDXTIME
  #define ServerExtraDefines GccGasOption XFree86ServerDefines
! 
! #if HasShm
! # define ServerExtraSysLibs	-lshm
  #endif
  
  /*
***************
*** 209,214 ****
--- 210,216 ----
  #define StripInstalledPrograms	NO
  #define CompressAllFonts	YES
  #define CompressManPages	YES
+ #define GzipFontCompression	YES
  #define DefaultUserPath		.;/os2;/emx/bin;/tcpip/bin;$(BINDIR)
  #define DefaultSystemPath	/os2;/emx/bin;$(BINDIR)
  
*** motif.orig/config/cf/os2Lib.rules	Fri Apr 28 11:04:06 2000
--- motif/config/cf/os2Lib.rules	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM $XFree86: xc/config/cf/os2Lib.rules,v 3.5 1996/08/20 12:07:08 dawes Exp $
  
  /*
   * OS2/EMX shared library rules (DLL version)
--- 2,8 ----
  
  
  
! XCOMM $XFree86: xc/config/cf/os2Lib.rules,v 3.7.2.2 1999/07/13 07:09:36 hohndel Exp $
  
  /*
   * OS2/EMX shared library rules (DLL version)
***************
*** 121,127 ****
  	LBRRSP = Concat3(libname,os2,.rsp)				@@\
  									@@\
  link.rsp: $(LBRRSP) $(LBRDEF)						@@\
! 	@echo $(LBRPATH)"\\dll0.obj+" >link.rsp				@@\
  	@cat $(LBRRSP) >>link.rsp					@@\
  	@echo $(LBRPATH)\\mt\\ $(LBRPATH)\\ $(REQUIREDLIBS) bsd socket c_alias c_static c_import os2 emx2 end >>link.rsp	@@\
  	@echo $(LBRDEF) >>link.rsp					@@\
--- 121,127 ----
  	LBRRSP = Concat3(libname,os2,.rsp)				@@\
  									@@\
  link.rsp: $(LBRRSP) $(LBRDEF)						@@\
! 	@echo $(LBRPATH)\\dll0.obj+ >link.rsp				@@\
  	@cat $(LBRRSP) >>link.rsp					@@\
  	@echo $(LBRPATH)\\mt\\ $(LBRPATH)\\ $(REQUIREDLIBS) bsd socket c_alias c_static c_import os2 emx2 end >>link.rsp	@@\
  	@echo $(LBRDEF) >>link.rsp					@@\
***************
*** 212,214 ****
--- 212,251 ----
  install::	LibraryTargetName(Concat(libname,_s))			@@\
  	$(INSTALL) $(INSTALLFLAGS) $(INSTLIBFLAGS) LibraryTargetName(Concat(libname,_s)) $(DESTDIR)$(SHLIBDIR)
  #endif /* UnsharedLibraryTarget3 */
+ 
+ /*
+  * DebuggedLibraryTarget - generate rules to create a debuggable library.
+  */
+ #ifndef DebuggedLibraryTarget
+ #define	DebuggedLibraryTarget(libname,objlist)				@@\
+ AllTarget(LibraryTargetNameSuffix(libname,_d))				@@\
+ 									@@\
+ LibraryTargetNameSuffix(libname,_d): objlist $(EXTRALIBRARYDEPS)	@@\
+ 	RemoveFile($@)							@@\
+ 	ImakeIndir debugger MakeStaticLibrary(../$@)			@@\
+ 	RanLibrary($@)							@@\
+ 	_LinkBuildLibrary($@)
+ 
+ #endif /* DebuggedLibraryTarget */
+ 
+ /*
+  * ProfiledLibraryTarget - generate rules to create a profiled library.
+  */
+ #ifndef ProfiledLibraryTarget
+ #define	ProfiledLibraryTarget(libname,objlist)				@@\
+ AllTarget(LibraryTargetNameSuffix(libname,_p))				@@\
+ 									@@\
+ LibraryTargetNameSuffix(libname,_p): objlist $(EXTRALIBRARYDEPS)	@@\
+ 	RemoveFile($@)							@@\
+ 	ImakeIndir profiled MakeStaticLibrary(../$@)			@@\
+ 	RanLibrary($@)							@@\
+ 	_LinkBuildLibrary($@)
+ 
+ #endif /* ProfiledLibraryTarget */
+ 
+ /*
+ define ExtraLibMkdir() $(_NULLCMD_)
+ define ExtraObjCompile(options) $(_NULLCMD_)
+ define ExtraObjCplusplusCompile(options) $(_NULLCMD_)
+ define ExtraCleanDir() $(_NULLCMD_)
+ */
\ No newline at end of file
*** motif.orig/config/cf/os2Lib.tmpl	Fri Apr 28 11:04:06 2000
--- motif/config/cf/os2Lib.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM $XFree86: xc/config/cf/os2Lib.tmpl,v 3.3 1996/04/15 11:13:56 dawes Exp $
  
  /*
   * OS2/EMX shared library template
--- 2,8 ----
  
  
  
! XCOMM $XFree86: xc/config/cf/os2Lib.tmpl,v 3.5 1997/01/05 11:49:40 dawes Exp $
  
  /*
   * OS2/EMX shared library template
***************
*** 23,39 ****
  #define SharedXtstReqs $(LDPRELIB) $(XLIB)
  #define SharedOldXReqs $(LDPRELIB) $(XLIBONLY)
  #define SharedPexReqs $(LDPRELIB) $(XLIBONLY) MathLibrary
  #else
! #define SharedXtReqs ..\\..\\usrlib\\ ICE SM X11
! #define SharedXawReqs ..\\..\\usrlib\\ Xmu Xt X11 Xext
! #define SharedXmuReqs ..\\..\\usrlib\\ Xt X11 Xext
! #define SharedSMReqs ..\\..\\usrlib\\ ICE
! #define SharedXextReqs ..\\..\\usrlib\\ X11
! #define SharedXiReqs ..\\..\\usrlib\\ X11 Xext
! #define SharedXieReqs ..\\..\\usrlib\\ X11 Xext
! #define SharedXtstReqs ..\\..\\usrlib\\ X11 Xext
! #define SharedOldXReqs ..\\..\\usrlib\\ X11 Xext
! #define SharedPexReqs ..\\..\\usrlib\\ X11 m
  #endif
  
  /*
--- 23,41 ----
  #define SharedXtstReqs $(LDPRELIB) $(XLIB)
  #define SharedOldXReqs $(LDPRELIB) $(XLIBONLY)
  #define SharedPexReqs $(LDPRELIB) $(XLIBONLY) MathLibrary
+ #define SharedXpReqs $(LDPRELIBS) $(XLIB)
  #else
! #define SharedXtReqs ..\\..\\exports\\lib\\ ICE SM X11
! #define SharedXawReqs ..\\..\\exports\\lib\\ Xmu Xt X11 Xext
! #define SharedXmuReqs ..\\..\\exports\\lib\\ Xt X11 Xext
! #define SharedSMReqs ..\\..\\exports\\lib\\ ICE
! #define SharedXextReqs ..\\..\\exports\\lib\\ X11
! #define SharedXiReqs ..\\..\\exports\\lib\\ X11 Xext
! #define SharedXieReqs ..\\..\\exports\\lib\\ X11 Xext
! #define SharedXtstReqs ..\\..\\exports\\lib\\ X11 Xext
! #define SharedOldXReqs ..\\..\\exports\\lib\\ X11 Xext
! #define SharedPexReqs ..\\..\\exports\\lib\\ X11 m
! #define SharedXpReqs ..\\..\\exports\\lib\\ X11 Xext
  #endif
  
  /*
***************
*** 54,59 ****
--- 56,62 ----
  #define SDlibXIE -lXIE_s
  #define SDlibXtst -lXtst_s
  #define SDlibPEX5 -lPEX5_s
+ #define SDlibXp -lXp_s
  #else
  #define SDlibX11 -lX11
  #define SDlibXExt -lXExt
***************
*** 64,69 ****
--- 67,73 ----
  #define SDlibXIE -lXIE
  #define SDlibXtst -lXtst
  #define SDlibPEX5 -lPEX5
+ #define SDlibXp -lXp
  #endif
  
  /*
***************
*** 108,111 ****
--- 112,119 ----
  #if SharedLibPex
        DEPPEXLIB = 
           PEXLIB = _Use(SDlibPEX5,-L$(PEXLIBSRC) SDlibPEX5)
+ #endif
+ #if SharedLibXp
+  DEPEXTENSIONLIB = 
+     EXTENSIONLIB = _Use(SDlibXp,-L$(EXTENSIONSRC)/lib SDlibXp)
  #endif
*** motif.orig/config/cf/os2.rules	Fri Jul  7 15:22:07 2000
--- motif/config/cf/os2.rules	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,536 ----
+ XCOMM $XConsortium: os2.rules /main/1 1996/10/31 14:47:27 kaleb $
+ 
+ 
+ 
+ XCOMM platform:  $XFree86: xc/config/cf/os2.rules,v 3.15.2.1 1998/10/11 12:34:48 hohndel Exp $
+ 
+ .SUFFIXES: .Osuf .c .CCsuf
+ 
+ .c.Osuf:
+ 	$(CC) $(CFLAGS) -c $*.c
+ 
+ #if HasCplusplus
+ .CCsuf.Osuf:
+ 	$(CXX) $(CFLAGS) -c $*.CCsuf
+ #endif
+ 
+ #ifndef UseInstalled
+ #define ImakeHelper \imakesvc
+ #define IMmode n
+ #define ImakeIndir \indir
+ #define ImakeSubCmdHelper \imake -I$(IRULESRC) $(IMAKE_DEFINES)
+ #define Fontc \bdftopcf
+ #define MkFontDir \mkfontdir
+ #define XkbComp \xkbcomp
+ #else
+ #define ImakeHelper imakesvc
+ #define IMmode u
+ #define ImakeIndir indir
+ #define ImakeSubCmdHelper $(IMAKE_CMD)
+ #define Fontc bdftopcf
+ #define MkFontDir mkfontdir
+ #define XkbComp xkbcomp
+ #endif
+ 
+ #define echo ImakeHelper 8 
+ #define RunProgram(progvar,options) $(subst /,\,$(progvar)) options
+ #define RemoveFile(file) $(RM) file
+ #define RemoveFiles(files) $(RM) files
+ #define NeedLdLibraryPathForXkbComp NO
+ 
+ #define LibObjCompile(dir,options) RemoveFiles($@ dir\$@)		@@\
+ 	$(CC) $(CCOPTIONS) $(ALLDEFINES) options -c  $*.c		@@\
+ 	$(MV) $@ dir\$@
+ 
+ #define MakeDir(dir) $(MKDIRHIER) dir
+ 
+ #define BuildIncludesTop(srclist)					@@\
+ includes:: srclist							@@\
+ 	MakeDir($(BUILDINCDIR))						@@\
+ 	@for %i in (srclist) do ImakeHelper 2 $(BUILDINCDIR) $(BUILDINCTOP) $(CURRENT_DIR) %i
+ 
+ #define	ProgramTargetHelper(program,srcs,objs,deplib,locallib,syslib)	@@\
+ ProgramTargetName(program): $(objs) 					@@\
+ 	RemoveTargetProgram($@)						@@\
+ 	LinkRule($@,$(LDOPTIONS),$(objs),locallib $(LDLIBS) syslib)	@@\
+ 									@@\
+ InstallProgram(program,$(BINDIR))					@@\
+ InstallManPage(program,$(MANDIR))
+ 
+ #if 0
+ #define	ProgramTargetHelperNoMan(program,srcs,objs,deplib,locallib,syslib)	@@\
+ ProgramTargetName(program): $(objs) 					@@\
+ 	RemoveTargetProgram($@)						@@\
+ 	LinkRule($@,$(LDOPTIONS),$(objs),locallib $(LDLIBS) syslib)	@@\
+ 									@@\
+ InstallProgram(program,$(BINDIR))
+ #endif
+ 
+ 
+ #define BuildIncludes(srclist,dstsubdir,dstupdir)			@@\
+ includes:: srclist							@@\
+ 	MakeDir($(BUILDINCDIR)/dstsubdir)				@@\
+ 	@for %i in (srclist) do ImakeHelper 3 $(BUILDINCTOP)/dstupdir/$(CURRENT_DIR) $(BUILDINCDIR)/dstsubdir %i
+ 
+ #define LinkFileList(step,list,dir,sub)					@@\
+ step::  list								@@\
+ 	@for %i in (list) do ImakeHelper 3 sub dir %i
+ 
+ #define ComplexProgramTarget(program)					@@\
+ PROGRAM = ProgramTargetName(program)					@@\
+ 									@@\
+ AllTarget(ProgramTargetName(program))					@@\
+ 									@@\
+ ProgramTargetHelper(program,SRCS,OBJS,DEPLIBS,$(LOCAL_LIBRARIES),NullParameter) @@\
+ 									@@\
+ DependTarget()								@@\
+ LintTarget()								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile($(PROGRAM))
+ 
+ #define ComplexProgramTarget_1(program,locallib,syslib)			@@\
+ OBJS = $(OBJS1) $(OBJS2) $(OBJS3)					@@\
+ SRCS = $(SRCS1) $(SRCS2) $(SRCS3)					@@\
+ PROGRAM1 = ProgramTargetName(program)					@@\
+ 									@@\
+ AllTarget($(PROGRAM1) $(PROGRAM2) $(PROGRAM3))				@@\
+ 									@@\
+ ProgramTargetHelper(program,SRCS1,OBJS1,DEPLIBS1,locallib,syslib)	@@\
+ 									@@\
+ DependTarget()								@@\
+ LintTarget()								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles($(PROGRAMS))
+ 
+ #define ComplexProgramTarget_2(program,locallib,syslib)			@@\
+ PROGRAM2 = ProgramTargetName(program)					@@\
+ 									@@\
+ ProgramTargetHelper(program,SRCS2,OBJS2,DEPLIBS2,locallib,syslib)
+ 
+ #define ComplexProgramTarget_3(program,locallib,syslib)			@@\
+ PROGRAM3 = ProgramTargetName(program)					@@\
+ 									@@\
+ ProgramTargetHelper(program,SRCS3,OBJS3,DEPLIBS3,locallib,syslib)
+ 
+ #define NormalProgramTarget(program,objects,deplibs,locallibs,syslibs)	@@\
+ ProgramTargetName(program): objects 					@@\
+ 	RemoveTargetProgram($@)						@@\
+ 	LinkRule($@,$(LDOPTIONS),objects,locallibs $(LDLIBS) syslibs)	@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(ProgramTargetName(program))
+ 
+ #if 0
+ #define ComplexProgramTargetNoMan(program)				@@\
+ PROGRAM = ProgramTargetName(program)					@@\
+ 									@@\
+ AllTarget(ProgramTargetName(program))					@@\
+ 									@@\
+ ProgramTargetHelperNoMan(program,SRCS,OBJS,DEPLIBS,$(LOCAL_LIBRARIES),NullParameter) @@\
+ 									@@\
+ DependTarget()								@@\
+ LintTarget()								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile($(PROGRAM))
+ #endif
+ 
+ #define MoveToBakFile(file) ImakeHelper 5 file
+ 
+ #define RMoveToBakFile(file) ImakeHelper 6 file
+ 
+ #define InstallMultipleDestFlags(step,list,dest,flags)			@@\
+ step:: list								@@\
+ 	MakeDir($(DESTDIR)dest)							@@\
+ 	$(INSTALL) $(INSTALLFLAGS) flags list $(subst /,\,$(DESTDIR)dest)
+ 
+ #define	CleanTarget()							@@\
+ clean::									@@\
+ 	RemoveFiles(FilesToClean ExtraFilesToClean)
+ 
+ #define LinkSourceFile(src,dir)						@@\
+ src:									@@\
+ 	ImakeHelper 3 dir . src						@@\
+ 									@@\
+ includes:: src								@@\
+ 									@@\
+ depends:: src								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(src)
+ 
+ #define LinkFile(tofile,fromfile)					@@\
+ tofile:: fromfile							@@\
+ 	ImakeHelper 7 fromfile tofile					@@\
+ 									@@\
+ includes:: tofile							@@\
+ 									@@\
+ depend:: tofile								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(tofile)
+ 
+ #ifndef UseInstalled
+ #define ImakeDependency(target)						@@\
+ target:: ProgramTargetName($(IMAKE))					@@\
+ 									@@\
+ ProgramTargetName($(IMAKE)):						@@\
+ 	@ImakeIndir $(IMAKESRC) if exist Makefile $(MAKE) SHELL= MAKE=x11make all		@@\
+ 	@ImakeIndir $(IMAKESRC) if not exist Makefile $(MAKE) SHELL= MAKE=x11make -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"
+ #endif
+ 
+ #ifndef UseInstalled
+ #define DependDependency() 						@@\
+ depend:: ProgramTargetName($(DEPEND))					@@\
+ 									@@\
+ ProgramTargetName($(DEPEND)):						@@\
+ 	@ImakeIndir $(DEPENDSRC) $(MAKE) SHELL= MAKE=x11make 
+ #endif
+ 
+ #define	DependTarget()							@@\
+ DependDependency()							@@\
+ 									@@\
+ depend::								@@\
+ 	$(subst /,\,$(DEPEND)) $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- $(SRCS)
+ 
+ #define	DependTarget3(srcs1,srcs2,srcs3)				@@\
+ DependDependency()							@@\
+ 
+ /* Currently this stuff doesn't work correctly for libX11
+ depend::								@@\
+ 	$(subst /,\,$(DEPEND)) $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- srcs1 @@\
+ 	$(subst /,\,$(DEPEND)) $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- srcs2 @@\
+ 	$(subst /,\,$(DEPEND)) $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- srcs3
+ */
+ 
+ #define ForceSubdirs(dirs)						@@\
+ dirs: DONE								@@\
+ 									@@\
+ DONE:									@@\
+ 	@for %i in (dirs) do ImakeIndir %i $(MAKE) SHELL= MAKE=x11make $(MFLAGS) PassCDebugFlags all @@\
+ 	touch DONE							@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(DONE)
+ 
+ #define MakeMakeSubdirs(dirs,target)					@@\
+ MMSDIRS = dirs								@@\
+ MMSTOP = $(TOP)								@@\
+ MMSRULES = $(IRULESRC)							@@\
+ MMSCUR = $(CURRENT_DIR)							@@\
+ target::								@@\
+ 	@for %i in ($(subst /,\,$(MMSDIRS))) do ImakeHelper 1 IMmode %i $(MMSRULES) $(MMSTOP) $(MMSCUR)
+ 
+ #define NamedTargetSubdirs(name,dirs,verb,flags,subname)		@@\
+ Concat(SUBST,name) = dirs						@@\
+ name::									@@\
+ 	@for %i in ($(subst /,\,$(Concat(SUBST,name)))) do ImakeIndir %i $(MAKE) SHELL= MAKE=x11make $(MFLAGS) flags subname
+ 
+ #define InstallNamedTarget(step,srcname,flags,dest,dstname)		@@\
+ step:: srcname								@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) $(INSTALLFLAGS) flags srcname $(subst \,/,$(DESTDIR)dest)/dstname
+ 
+ #define	BuildMakefileTarget(notused,imakeflags)				@@\
+ ImakeDependency(Makefile)						@@\
+ 									@@\
+ Makefile:: 								@@\
+ 	RMoveToBakFile(Makefile)					@@\
+ 	ImakeSubCmdHelper -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR) imakeflags
+ 
+ #define AssembleObject(flags) $(RM) $@                                  @@\
+ 	$(CPP) AsmDefines $(DEFINES) $(INCLUDES) flags $*.s | grep -v '^\#' > _tmp_.s                                     @@\
+ 	$(CC) $(CFLAGS) -o $*.Osuf -c _tmp_.s                           @@\
+ 	$(RM) _tmp_.s
+ 
+ #define NormalAsmObjectRule()                                           @@\
+ .s.Osuf:                                                                @@\
+ 	AssembleObject($(_NOOP_))
+ 
+ #define ObjectMapIncludeFromSpecialSource(dst,src,flags)		@@\
+ dst.c: src.c								@@\
+ 	ImakeHelper 9 $@ mfbmap.h $?					@@\
+ 									@@\
+ SpecialCObjectRule(dst,NullParameter,flags)				@@\
+ 									@@\
+ depend:: dst.c								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(dst.c)
+ 
+ #define FontBaseObj(basename)basename.pcf
+ /*
+  * UncompressedFontTarget
+  */
+ #define UncompressedFontTarget(basename)				@@\
+ FontBaseObj(basename):  FontSrc(basename)				@@\
+ 	Fontc $(FONTCFLAGS) $? -o $@
+ 
+ /*
+  * CompressedFontTarget
+  */
+ #ifndef CompressedFontTarget
+ #if GzipFontCompression
+ #define CompressedFontTarget(basename)					@@\
+ FontBaseObj(basename).gz:  FontSrc(basename)				@@\
+ 	Fontc $(FONTCFLAGS) $? | $(GZIPCMD) > $@
+ #else
+ #define CompressedFontTarget(basename)					@@\
+ FontBaseObj(basename).Z:  FontSrc(basename)				@@\
+ 	Fontc $(FONTCFLAGS) $? | $(COMPRESS) > $@
+ #endif
+ #endif
+ 
+ /*
+  * MakeFontsDir - generate rules to build fonts.dir database.
+  */
+ #define MakeFontsDir(deplist)						@@\
+ all:: fonts.dir								@@\
+ 									@@\
+ fonts.dir:  deplist							@@\
+ 	MkFontDir .							@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(fonts.dir)
+ 
+ /* OS/2 scripts are based on REXX
+  * it is just the SHELL variable that is messed up that forces me to
+  * modify this rule
+  */
+ #define ConfigTargetLong(target,dep,script,args,extra)			@@\
+ all:: Configure								@@\
+ 									@@\
+ Configure:: target.o							@@\
+ 									@@\
+ target.c: script dep							@@\
+ 	$(MAKE) SHELL= MAKE=x11make $(MFLAGS) extra Concat(Build,target)			@@\
+ 									@@\
+ Concat(Build,target):							@@\
+ 	$(RM) target.c							@@\
+ 	script args							@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) target.c
+ 
+ #ifndef ServerTargetWithFlags
+ #define	ServerTargetWithFlags(server,subdirs,objects,libs,syslibs,flags) @@\
+ AllTarget(ProgramTargetName(server))					@@\
+ ProgramTargetName(server): subdirs objects libs				@@\
+ 	MoveToBakFile($@)						@@\
+ 	LinkRule($@,$(LDOPTIONS),objects,libs $(LDLIBS) syslibs)	@@\
+ 	emxbind -a ProgramTargetName(server) -h255			@@\
+ 									@@\
+ Concat(load,server):							@@\
+ 	MoveToBakFile(ProgramTargetName(server))			@@\
+ 	LinkRule(ProgramTargetName(server),$(LDOPTIONS),objects,libs $(LDLIBS) syslibs) @@\
+ 									@@\
+ loadX:: Concat(load,server)						@@\
+ 									@@\
+ SentinelProgramTarget(server,subdirs objects libs,objects libs $(LDLIBS) syslibs) @@\
+ SentinelLinkTarget(Concat(load,server),server,objects libs $(LDLIBS) syslibs) @@\
+ PurifyProgramTarget(server,subdirs objects libs,objects libs $(LDLIBS) syslibs) @@\
+ PurifyLinkTarget(Concat(load,server),server,objects libs $(LDLIBS) syslibs) @@\
+ ProofProgramTarget(server,subdirs objects libs,objects libs $(LDLIBS) syslibs) @@\
+ ProofLinkTarget(Concat(load,server),server,objects libs $(LDLIBS) syslibs) @@\
+ 									@@\
+ InstallProgramWithFlags(server,$(BINDIR),flags)				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFile(ProgramTargetName(server))
+ #endif /* ServerTargetWithFlags */
+ 
+ /*
+  * ServerTarget - rules to compile, link, and relink a normal server
+  * Need a .def file for OS/2
+  */
+ #ifndef ServerTarget
+ #define	ServerTarget(server,subdirs,objects,libs,syslibs)		@@\
+ ServerTargetWithFlags(server,subdirs,objects,libs,syslibs server.def,$(_NOOP_)) @@\
+ 									@@\
+ ProgramTargetName(server): server.def
+ #endif /* ServerTarget */
+ 
+ /*
+  * ToolkitMakeStrings generates a string-table, i.e., a C source
+  * file and the matching header(s), e.g., Xt's StringDefs.c, StringDefs.h,
+  * and Shell.h files; or Motif's XmStrDefs.c and XmStrDefs.h files.
+  *
+  * The 'files' argument is the list of files that will be produced by
+  * this rule, e.g., for Xt they would be "Shell.h StringDefs.c StringDefs.h"
+  * and for Motif they would be "XmStrDefs.c XmStrDefs.h".
+  *
+  * The 'source' argument is the string-list file to be parsed, e.g., in
+  * Xt that would be "util/string.list".  For Motif 2.0 it would be
+  * "../../tools/makestr/xmstring.list", and for Motif-CDE1 it would be
+  * "util/xmstring.list".
+  *
+  * The 'options' argument is passed by the library's Imakefile, see the
+  * Xt Imakefile for an example.  Typically this would be nothing, -intelabi,
+  * or -sparcabi; there are other choices, but these are typical.
+  *
+  * The 'depends' argument names additional files the target files
+  * depend on.  It should name the #ctmpl and #htmpl files from the
+  * 'source' file.
+  *
+  * The 'dest' argument is the C source output file.  For Xt this should
+  * be "StringDefs.c", and for all versions of Motif it would be "XmStrDefs.c"
+  *
+  * Headers are generated and named according to data in the 'source'
+  * file.
+  */
+ 
+ #ifndef ToolkitMakeStrings
+ #define ToolkitMakeStrings(files,source,options,depends,dest)		@@\
+ MAKESTRS = $(CONFIGSRC)/util/makestrs					@@\
+ MAKESTRS1 = /makestrs.exe						@@\
+ 									@@\
+ ProgramTargetName($(MAKESTRS)): $(MAKESTRS).c				@@\
+ 	ImakeIndir $(CONFIGSRC)/util make SHELL= ProgramTargetName(makestrs)	@@\
+ 	ImakeHelper 7 $(CONFIGSRC)/util/makestrs.exe /			@@\
+ 									@@\
+ files: ProgramTargetName($(MAKESTRS)) source depends			@@\
+ 	RemoveFiles(files)						@@\
+ 	RunProgram(MAKESTRS1,options < source > dest)			@@\
+ 									@@\
+ AllTarget(files)							@@\
+ 									@@\
+ includes:: files							@@\
+ 									@@\
+ depend:: files								@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(files)
+ 
+ #endif /* ToolkitMakeStrings */
+ 
+ /*#define CppSedMagic SedMagic*/
+ #define CppSedMagic sed -e '/^#  *[0-9][0-9]*  *.*$$/d' -e 's/^XCOMM/#/g' -e 's/^XCOMM[^a-zA-Z0-9_]/#/g'
+ 
+ #ifndef InstallNamedTargetNoClobber
+ #define InstallNamedTargetNoClobber(step,srcname,flags,dest,dstname)	@@\
+ step:: srcname								@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	if not exist $(subst /,\,$(DESTDIR)dest)\dstname $(INSTALL) $(INSTALLFLAGS) flags srcname $(DESTDIR)dest/dstname
+ 
+ #endif /* InstallNamedTargetNoClobber */
+ 
+ #if CompressManPages
+ 
+ #ifndef InstallManPageLong
+ #define InstallManPageLong(file,destdir,dest)                           @@\
+ install.man:: file.man                                                  @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	ImakeHelper 12 file $(DESTDIR)destdir dest
+ #endif
+ 
+ #ifndef InstallManPageAliases
+ #define InstallManPageAliases(file,destdir,aliases)                     @@\
+ install.man::                                                           @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	for %i in (aliases) do $(INSTALL) $(DESTDIR)destdir/file.gz $(DESTDIR)destdir/%i.gz
+ #endif
+ 
+ #ifndef InstallGenManPageLong
+ #define InstallGenManPageLong(file,destdir,dest,suffix)                 @@\
+ install.man:: file.man                                                  @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	ImakeHelper 12 file $(DESTDIR)destdir dest
+ #endif
+ 
+ #ifndef InstallMultipleMan
+ #define InstallMultipleMan(list,dest)                                   @@\
+ install.man:: list                                                      @@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	for %i in (list) do ImakeHelper 12 %i $(DESTDIR)dest %i
+ #endif
+ 
+ #else /* CompressManPages */
+ 
+ #ifndef InstallManPageLong
+ #define InstallManPageLong(file,destdir,dest)                           @@\
+ install.man:: file.man                                                  @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	ImakeHelper 10 file $(DESTDIR)destdir dest $(MANSUFFIX)
+ #endif
+ 
+ #ifndef InstallManPageAliases
+ #define InstallManPageAliases(file,destdir,aliases)                     @@\
+ install.man::                                                           @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	for %i in (aliases) do $(INSTALL) $(DESTDIR)destdir/file.$(MANSUFFIX) $(DESTDIR)destdir/%i.$(MANSUFFIX) 
+ #endif
+ 
+ #ifndef InstallGenManPageLong
+ #define InstallGenManPageLong(file,destdir,dest,suffix)                 @@\
+ install.man:: file.man                                                  @@\
+ 	MakeDir($(DESTDIR)destdir)					@@\
+ 	ImakeHelper 10 file $(DESTDIR)destdir dest suffix
+ #endif
+ 
+ #ifndef InstallMultipleMan
+ #define InstallMultipleMan(list,dest)                                   @@\
+ install.man:: list                                                      @@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	for %i in (list) do ImakeHelper 10 %i $(DESTDIR)dest %i $(MANSUFFIX)
+ #endif
+ 
+ #endif
+ 
+ #ifndef NormalLintTarget
+ #define NormalLintTarget(srclist)
+ #endif /* NormalLintTarget */
+ 
+ #ifndef MakeDirectories
+ #define MakeDirectories(step,dirs)					@@\
+ step::									@@\
+ 	-for %i in (dirs) do $(MKDIRHIER) $(DESTDIR)%i
+ #endif /* MakeDirectories */
+ 
+ #ifndef YaccFile
+ #define YaccFile(file,flags)						@@\
+ depend:: file.c								@@\
+ 									@@\
+ file.h file.c: file.y							@@\
+ 	$(YACC) flags file.y						@@\
+ 	$(MV) y.tab.c file.c						@@\
+ 	@if exist y.tab.h $(MV) y.tab.h file.h				@@\
+ 									@@\
+ clean::									@@\
+ 	RemoveFiles(y.tab.c y.tab.h file.h file.c)
+ #endif /* YaccFile */
+ 
+ #ifndef StaticLibrary
+ #define StaticLibrary(libpath,libname) Concat4(libpath,/,libname,_s.a)
+ #endif
+ 
+ #ifndef MakeXkbDir
+ #define MakeXkbDir(basedir,subdir)					@@\
+ all::	Concat(subdir,.dir)						@@\
+ 									@@\
+ Concat(subdir,.dir):							@@\
+ 	$(XKBCOMPCMD) -lfhlpR -o Concat(subdir,.dir) *			@@\
+ 									@@\
+ InstallTarget(install,Concat(subdir,.dir),$(INSTDATFLAGS),basedir)
+ #endif
+ 
+ /* This is to replace an ugly hack in /xc/nls/XLC_LOCALE */
+ /* the corresponding Imake.rules rule would be:
+    define LinkFileSpecial(gotodir,tofile,fromfile)	@@\
+         @MakeFlagsToShellFlags(i,set +e); \		@@\
+ 	cd dir && (set -x; RemoveFile(tofile); $(LN) fromfile tofile)
+  */
+ #ifndef LinkFileSpecial
+ #define LinkFileSpecial(gotodir,tofile,fromfile)			@@\
+ 	ImakeHelper 13 gotodir fromfile tofile
+ #endif
+ 
+ #ifndef LinkBuildBinary
+ #define LinkBuildBinary(binary)						@@\
+ all:: $(BUILDBINDIR)/binary binary					@@\
+ 									@@\
+ $(BUILDBINDIR)/binary: binary						@@\
+ 	ImakeHelper 13 $(BUILDBINDIR) $(BUILDBINTOP)/$(CURRENT_DIR)/binary binary @@\
+ 	$(CP) binary /
+ #endif /* LinkBuildBinary */
*** motif.orig/config/cf/osf1.cf	Fri Apr 28 11:04:02 2000
--- motif/config/cf/osf1.cf	Sat Jun  3 18:49:35 2000
***************
*** 74,79 ****
--- 74,82 ----
  #if OSMajorVersion > 3
  #define TermcapLibrary		-lcurses
  #endif
+ #if OSMajorVersion >= 3
+ #define HasMkstemp		YES
+ #endif
  #endif
  
  /*
*** motif.orig/config/cf/QNX.cf	Fri Jul  7 15:22:07 2000
--- motif/config/cf/QNX.cf	Sat Jun  3 18:49:34 2000
***************
*** 0 ****
--- 1,79 ----
+ XCOMM platform:  $XFree86: xc/config/cf/QNX.cf,v 1.1.2.4 1999/07/29 09:22:24 hohndel Exp $
+ 
+ #define StripInstalledPrograms	NO
+ #define BuildServer 		YES
+ #define BuildLBX  		YES    /* For now */
+ 
+ #ifndef OSName
+ #define OSName 			QNX
+ #endif
+ 
+ #ifndef OSVendor
+ #define OSVendor		QNX Corp.
+ #endif
+ #ifndef OSMajorVersion
+ #define OSMajorVersion		4
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion		25
+ #endif
+ 
+ /* Use a non-broken shell ... */
+ #define BourneShell		/usr/local/bin/pdksh
+ #define OSDefines		-DQNX -D__QNX__ -DNO_REGEX -DSTRINGS_ALIGNED -D__i386__
+ 
+ #define SourceDefines		-D_POSIX_SOURCE
+ #define HasGcc			NO
+ #define HasGcc2			NO
+ #define DoRanlibCmd 		NO
+ #undef ArCmd
+ #define ArCmd			wlib -b -c -p=256
+ #define MkdirHierCmd		mkdir -p
+ #define InstallCmd		/usr/X11R6/bin/install.qnx
+ 
+ #define DefaultCCOptions	-5s -Otx -Wc,-r -b -j -Wc,-ei -N128000 -zp4 -mf
+ #define LibraryCCOptions	-5s -Otx -Wc,-r -b -j -Wc,-ei -zp4 -mf
+ #define ServerCCOptions		-5s -Otx -Wc,-r -T1 -M -N4096000 -j -b -mf -Wc,-ei -Wc,-s -zp4 -llibmalloc
+ #define LocalLibraries
+ #define ExtraLibraries		-lsocket -lunix 
+ #define CLibrary
+ #define PosixLibraries
+ #define ConnectionFlags 	-DTCPCONN 
+ #define CppCmd			/usr/X11R6/bin/cpp
+ 
+ #define HasShadowPasswd		YES
+ #define HasLibCrypt		YES
+ #define SharedLibXdmGreet	NO
+ #define HasShm			NO    /* For now as well */
+ #define HasSockets		YES
+ #define HasPutenv		YES
+ #define HasCbrt			NO
+ #define HasVarDirectory		NO
+ 
+ #define AvoidNullMakeCommand    YES
+ #define CompressAllFonts        YES
+ #define Malloc0ReturnsNull      YES
+ #define UseInternalMalloc	NO
+ #define NeedConstPrototypes     YES
+ #define NeedFunctionPrototypes  YES
+ #define NeedNestedPrototypes    YES
+ #define NeedVarargsPrototypes   YES
+ 
+ #ifndef NeedWidePrototypes
+ #define NeedWidePrototypes      NO
+ #endif
+ 
+ #define TermcapLibrary		-lncurses
+ #ifndef UseStaticTermcapLib
+ #define UseStaticTermcapLib     NO
+ #endif
+ 
+ #define StandardCppDefines	-traditional StandardDefines
+ #define StandardDefines OSDefines SourceDefines
+ #define ServerOSDefines -DDDXTIME XFree86ServerOSDefines 
+ #define ServerExtraDefines XFree86ServerDefines
+ #define ExtraFilesToClean       *.err *.map 
+ 
+ #include <QNX.rules>
+ #include <xfree86.cf>
+ 
*** motif.orig/config/cf/QNX.rules	Fri Jul  7 15:22:07 2000
--- motif/config/cf/QNX.rules	Sat Jun  3 18:49:34 2000
***************
*** 0 ****
--- 1,72 ----
+ XCOMM platform:  $XFree86: xc/config/cf/QNX.rules,v 1.1.2.2 1999/07/23 13:42:29 hohndel Exp $
+ 
+ XCOMM Rules to work around wlib for QNX...
+ 
+ #define LinkFile(tofile, fromfile)				@@\
+ tofile:: fromfile						@@\
+ 	$(CP) fromfile tofile					@@\
+ 								@@\
+ includes:: tofile						@@\
+ 								@@\
+ depend:: tofile							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(tofile)
+ 
+ XCOMM This special rule is used to install the install script.
+ XCOMM Else there's a name conflict with the QNX installer.
+ 
+ #define QNXCopyInstaller(tofile, fromfile)			@@\
+ tofile:: 							@@\
+ 	$(CP) fromfile tofile					@@\
+ 								@@\
+ includes:: tofile
+ 
+ 
+ #define ObjectFromSpecialSource(dst, src, flags)		@@\
+ NoConfigRec(dst.c)						@@\
+ 								@@\
+ dst.c: src.c							@@\
+ 	RemoveFile($@)						@@\
+ 	$(CP) $? $@						@@\
+ 								@@\
+ SpecialCObjectRule(dst,NullParameter,flags)			@@\
+ 								@@\
+ includes:: dst.c						@@\
+ 								@@\
+ depend:: dst.c							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(dst.c)
+ 
+ 
+ #define ObjectFromSpecialAsmSource(dst, src, flags)		@@\
+ dst.s: src.s							@@\
+ 	RemoveFile($@)						@@\
+ 	$(CP) $? $@						@@\
+ 								@@\
+ dst.o: dst.s							@@\
+ 	AssembleObject(flags)					@@\
+ 								@@\
+ dst.i: dst.s							@@\
+ 	CPPOnlyAsm(dst,flags)					@@\
+ 								@@\
+ depend:: dst.s							@@\
+ 								@@\
+ clean::								@@\
+ 	RemoveFile(dst.s)
+ 
+ /* This is the rule to make reloc. OMF objects. We use a little
+  * trick which works only for OMF....
+  */
+ #define NormalRelocatableTarget(objname,objlist)		@@\
+ AllTarget(objname.Osuf)						@@\
+ 								@@\
+ objname.Osuf: objlist $(EXTRALIBRARYDEPS)			@@\
+ 	RemoveFile($@)						@@\
+ 	/bin/cat objlist > $@
+ 
+ 
+ 	
+ 
+ 
*** motif.orig/config/cf/README	Fri Apr 28 11:03:59 2000
--- motif/config/cf/README	Sat Jun  3 18:49:34 2000
***************
*** 1,4 ****
! $TOG: README /main/76 1998/05/11 14:35:10 barstow $
  
  The easiest way to write an Imakefile is to find another one that does
  something similar and copy/modify it!
--- 1,9 ----
! $TOG: README /main/66 1997/05/20 10:05:36 kaleb $
! 
! 
! 
! 
! $XFree86: xc/config/cf/README,v 1.1.1.9.2.3 1998/01/23 12:35:07 dawes Exp $
  
  The easiest way to write an Imakefile is to find another one that does
  something similar and copy/modify it!
***************
*** 46,51 ****
--- 51,57 ----
  	FortranDebugFlags	flags for Fortran debug info
  	FortranFlags		Fortran compiler flags
  	HasBSD44Sockets		boolean for system has BSD4.4 sockets
+ 	HasBsdMake		use the 4.4BSD variant of the make program?
  	HasBsearch		boolean for libc has bsearch()
  	HasBrokenCCForLink	boolean for brain damaged cc driver
  	HasCenterLineC		boolean for system has CenterLine C compiler
***************
*** 58,63 ****
--- 64,70 ----
  	HasGcc			boolean for system has GNU gcc compiler
  	HasGcc2			boolean for system has GNU gcc 2.x compiler
  	HasGcc2ForCplusplus	use gcc 2 for C++ programs?
+ 	HasGnuMake		use the GNU make program?
  	HasKrb5			system has Kerberos version 5 support?
  	HasLargeTmp		boolean for system has /tmp space
  	HasLatex		system has LaTeX document preparation software
***************
*** 122,133 ****
  	OSMajorVersion		major version number of operating system
  	OSMinorVersion		minor version number of operating system
  	OptimizedCDebugFlags	C compiler flags to turn on optimization
- 	XtPopdownConformance	XtPopdown conformans to the specification
  	PreProcessCmd		command to run /lib/cpp on scripts
  	RanlibCmd		command to clean up libraries
  	RanlibInstFlags		flags to ranlib after copying
- 	ResourceConfigurationManagement boolean for Xt's Resource Configuration
- 					Management
  	RmCmd			command to delete files
  	ShLibDir		directory in which to install shared libraries
  	StandardCppDefines	-D's for running cpp
--- 129,137 ----
***************
*** 143,184 ****
  	UNCOMPRESSPATH		command to run uncompress
  	UnalignedReferencesAllowed	boolean for unaligned copies ok
  	UsrLibDir		directory in which to install libraries
  	YaccCmd			command to run yacc
  
  X11.tmpl provides defaults for the following variables:
  
  	AdmDir			directory containing system log files
! 	AllocateLocalDefines	-D's to turn on alloca() (should be in Imake.tmpl)
  	BDFTOSNFFILT		command to run bdftosnf
  	BaseExtensionDefines	universal extensions to use
  	BinDir			directory in which to install programs
! 	BuildAppgroup		build AppGroup extension in server
! 	BuildCup		build Colormap Utilization extension in server
! 	BuildDBE		build DOUBLE-BUFFER extension
! 	BuildDIS		build Document Imaging Subset of XIE
! 	BuildDPMS		build Display Power Management Signaling extension
  	BuildFontServer		build font server
  	BuildFonts		build pcf fonts
  	BuildIncRoot		relative path to location of headers in build
  	BuildIncTop		path from build includes directory to top
- 	BuildEVI		build EVI server extension
  	BuildLBX		build LBX (aka X.fast) server extension
- 	BuildMultibuffer	build Multibuffer extension (obsolete)
- 	BuildPlugin		build xrx plug-in for web browsers
- 	BuildRECORD		Build RECORD extension
  	BuildPexExt		build PEX server extension and fonts
  	BuildPhigs		build Phigs (obsolete)
  	BuildServer		build X server
  	BuildXAudio		build Audio 
  	BuildXAServer		build Audio server
- 	BuildXCSecurity		Build Security Extension
  	BuildXIE		build X Image Extension
  	BuildXInputExt		build X Input extension (requires ddx support,
! 					which exists only in Xhp and XFree86)
  	BuildXInputLib		build X Input library
  	BuildXKB		build X Keyboard Extension?
  	BuildXKBlib		build X Keyboard Extension into Xlib?
  	UseXKBInClients		Use XKB functions in normal clients?
  	ConfigDir		install directory for config files
  	ConnectionFlags		-D's for supported transports
  	ContribDir		location of user-contributed sources
--- 147,186 ----
  	UNCOMPRESSPATH		command to run uncompress
  	UnalignedReferencesAllowed	boolean for unaligned copies ok
  	UsrLibDir		directory in which to install libraries
+ 	VarDirectory		directory in /var for logs, etc., and config
  	YaccCmd			command to run yacc
  
  X11.tmpl provides defaults for the following variables:
  
  	AdmDir			directory containing system log files
! 	AllocateLocalDefines	-D's to turn on alloca()
  	BDFTOSNFFILT		command to run bdftosnf
  	BaseExtensionDefines	universal extensions to use
  	BinDir			directory in which to install programs
! 	BuildAppgroup		build AppGroup extension
  	BuildFontServer		build font server
  	BuildFonts		build pcf fonts
  	BuildIncRoot		relative path to location of headers in build
  	BuildIncTop		path from build includes directory to top
  	BuildLBX		build LBX (aka X.fast) server extension
  	BuildPexExt		build PEX server extension and fonts
  	BuildPhigs		build Phigs (obsolete)
  	BuildServer		build X server
  	BuildXAudio		build Audio 
  	BuildXAServer		build Audio server
  	BuildXIE		build X Image Extension
+ 	BuildDIS		build Document Imaging Subset of XIE
+ 	BuildXCSecurity		Build Security Extension
  	BuildXInputExt		build X Input extension (requires ddx support,
! 					which exists only in Xhp)
  	BuildXInputLib		build X Input library
  	BuildXKB		build X Keyboard Extension?
  	BuildXKBlib		build X Keyboard Extension into Xlib?
  	UseXKBInClients		Use XKB functions in normal clients?
+ 	BuildDBE		build DOUBLE-BUFFER extension
+ 	BuildMultibuffer	build Multibuffer extension (obsolete)
+ 	BuildRECORD		Build RECORD extension
+ 	BuildPlugin		build xrx plug-in for web browsers
  	ConfigDir		install directory for config files
  	ConnectionFlags		-D's for supported transports
  	ContribDir		location of user-contributed sources
***************
*** 232,238 ****
  	ManPath			full path of parent directory
  	ManSourcePath		common prefix of man page directories
  	ManSuffix		man suffix for programs
- 	MiscManSuffix		man suffix for miscellaneous pages
  	NeedDefaultDepLibs	boolean for enabling default DEPLIBS
  	NlsDir			directory in which to install nls files
  	NormalLibFS		build libFS.a
--- 234,239 ----
***************
*** 307,313 ****
  	TwmDir			directory in which to install twm config files
  	UseCCMakeDepend		boolean for using alternate makedepend script
  	UseRgbTxt		use rgb.txt file as is instead of DBM-compiled
- 	VarDirectory		directory in /var for logs, etc., and config
  	VendorHasX11R6_3libXext	don't need Security & AppGroup in xrx plug-in
  	XAppLoadDir		directory in which to install app defaults
  	XFileSearchPathBase	base file search path
--- 308,313 ----
***************
*** 502,510 ****
  			Such an Imakefile also needs to #define IHaveSubdirs
  			and call MakeSubdirs() and DependSubdirs().
  MANSUFFIX		suffix used by InstallManPage* rules.
! 			May be set to $(LIBMANSUFFIX), $(FILEMANSUFFIX), or
! 			$(MISCMANSUFFIX) in directories for libraries or data 
! 			files.
  
  
  Rule-specific variables that may be set in an individual Imakefile.
--- 502,509 ----
  			Such an Imakefile also needs to #define IHaveSubdirs
  			and call MakeSubdirs() and DependSubdirs().
  MANSUFFIX		suffix used by InstallManPage* rules.
! 			May be set to $(LIBMANSUFFIX) or $(FILEMANSUFFIX) in
! 			directories for libraries or data files.
  
  
  Rule-specific variables that may be set in an individual Imakefile.
*** motif.orig/config/cf/sco5.cf	Fri Jul  7 15:22:07 2000
--- motif/config/cf/sco5.cf	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,141 ----
+ XCOMM $XFree86: xc/config/cf/sco5.cf,v 3.1.2.5 1998/12/13 14:11:59 dawes Exp $
+ 
+ /*
+  * This is for SCO Open Server 5.0.2 or later.
+  */
+ 
+ #ifndef ScoOsMouse
+ # define ScoOsMouse             YES
+ #endif
+ 
+ #ifndef OSName
+ #define OSName                  UNIX System V/386 Open Server 5.0.4
+ #endif
+ #ifndef OSVendor
+ #define OSVendor                SCO
+ #endif
+ #ifndef OSMajorVersion
+ #define OSMajorVersion          5
+ #endif
+ #ifndef OSMinorVersion
+ #define OSMinorVersion          0
+ #endif
+ #ifndef OSTeenyVersion
+ #define OSTeenyVersion          4
+ #endif
+ 
+ /*
+  * Note: We define FD_SETSIZE here (as opposed to in ConnectionFlags) to
+  * guarantee that the same FD_SETSIZE is used. Havoc abounds if we do not
+  * do this, as some files which include sys/socket.h and sys/types.h will
+  * have different values for FD_SETSIZE.
+  */
+ 
+ #define StandardDefines         -Dsco -DSCO -DSYSV -Di386 -DSCO325 -DFD_SETSIZE=256 -D_NO_STATIC
+ #ifdef HasGcc2
+ # define DefaultCCOptions       -melf
+ # define CcCmd                  gcc
+ # define ExtraLoadOptions       -melf
+ # define DefaultCDebugFlags     -O
+ # define OptimizedCDebugFlags   -O
+ #else
+ # define DefaultCCOptions       -dy 
+ # define CcCmd                  cc
+ # define ExtraLoadOptions       -b elf
+ # define DefaultCDebugFlags     -O
+ # define OptimizedCDebugFlags   -O
+ #endif
+ 
+ #ifndef PexDynamicModule
+ #define PexDynamicModule        YES
+ #endif
+ #ifndef XieDynamicModule
+ #define XieDynamicModule        YES
+ #endif
+ 
+ #ifndef HasSymLinks
+ # define HasSymLinks            YES
+ #endif
+ 
+ #ifdef BuildDynamicLoading
+ #define SCODynamicFlags         -Wl,-Bexport
+ #else
+ #define SCODynamicFlags
+ #endif
+ 
+ #define XawI18nDefines          -DHAS_WCHAR_H -DHAS_ISW_FUNCS
+ #if ScoOsMouse
+ # define ServerExtraSysLibs     $(CBRT) -lm -levent SCODynamicFlags
+ # define ServerExtraDefines     ServerCCOptions -DUSE_OSMOUSE XFree86ServerDefines
+ #else
+ # define ServerExtraSysLibs     $(CBRT) -lm SCODynamicFlags
+ # define ServerExtraDefines     ServerCCOptions XFree86ServerDefines
+ #endif
+ #define ExtraLibraries          -lsocket
+ #define NeedWidePrototypes      NO
+ #define ServerOSDefines         -DDDXTIME
+ #define ToolkitStringsABIOptions -intelabi
+ #define ThreadedX               NO
+ #define HasThreadSafeAPI        NO
+ #define HasNdbm                 YES
+ #define HasVFork                YES
+ #define HasPutenv               YES
+ #define ExecableScripts         YES
+ #define HasShadowPasswd         YES
+ #define ManSourcePath           $(MANPATH)/cat.
+ #define Malloc0ReturnsNull      YES
+ #define RemoveDSDENroffMacros   NO
+ #define CompressManPages        YES
+ 
+ #ifndef HasLibCrypt
+ # define HasLibCrypt            YES
+ # define SpecialLibCrypt        -lcrypt
+ #endif
+ #define PosixLibraries          /**/
+ 
+ #ifndef ForceNormalLib
+ # define ForceNormalLib         YES 
+ #endif
+ 
+ #define SharedLibXmu            NO
+ #define SystemV                 YES
+ #define LdCombineFlags          -r 
+ 
+ #define HasLdRunPath            YES
+ #define HasPoll                 NO
+ #define PatheticCpp             YES
+ 
+ #define ArCmdBase               ar
+ #define AsCmd                   as
+ #define CppCmd                  /lib/cpp
+ #define LdCmd                   ld
+ #define LexCmd                  lex
+ #define MakeCmd	                make
+ #define YaccCmd                 yacc
+ 
+ #define DefaultUserPath         /bin:/usr/bin:$(BINDIR):/usr/bin/X11:/usr/local/bin:/etc
+ #define DefaultSystemPath       /etc:/bin:/usr/bin:$(BINDIR):/usr/bin/X11
+ 
+ /*
+  * If you are compiling on an SCO Open Server release prior to 5.0.2,
+  * you may need to remove -DLOCALCONN. There have been reports of it
+  * working on some 5.0.0 machines but not others.
+  */
+ #define ConnectionFlags         -DLOCALCONN -DTCPCONN -DUNIXCONN
+ 
+ #define InstallManPageAliases(file,destdir,aliases)                     @@\
+ install.man::                                                           @@\
+         @(SUFFIX=`echo $(DESTDIR)destdir/file.* | cut -f3,4 -d.`; \     @@\
+         for i in aliases; do (set -x; \                                 @@\
+         $(RM) $(DESTDIR)destdir/$$i.*; \                                @@\
+         (cd $(DESTDIR)destdir; $(LN) file.$${SUFFIX} \                  @@\
+         $$i.$${SUFFIX})); \                                             @@\
+         done)
+ 
+ #include <scoLib.rules>  /* minor changes to sv4Lib.rules */
+ #include <sv4Lib.rules>
+ 
+ #ifdef i386Architecture
+ #include <xfree86.cf>
+ #endif
+ 
*** motif.orig/config/cf/sco.cf	Fri Apr 28 11:04:02 2000
--- motif/config/cf/sco.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,67 ****
  XCOMM platform:  $XConsortium: sco.cf /main/5 1996/12/04 10:12:36 swick $
  
! #ifndef OSName
! #define OSName			SCO OpenServer Release 5
  #endif
  #ifndef OSVendor
! #define OSVendor		SCO
  #endif
  #ifndef OSMajorVersion
! #define OSMajorVersion		5
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion		0
  #endif
  #ifndef OSTeenyVersion
! #define OSTeenyVersion		0
  #endif
  
! #if OSMajorVersion < 5 		/* Must be 3.2v4 (not fully tested) */
! #define StandardDefines		-Dsco -Dsco324 -DSYSV -Di386
  #else
! #define StandardDefines		-Dsco -DSYSV -Di386
! #define DefaultCCOptions	-b elf
  #endif
  
! #define CcCmd			cc
! #define NeedWidePrototypes	NO
! #define ServerExtraDefines	-DSTATIC_COLOR -DAVOID_GLYPHBLT -DPIXPRIV
! #define ServerOSDefines		-DDDXTIME -DDDXOSINIT -DSERVER_LOCK
  #define ToolkitStringsABIOptions -intelabi
! #define XawI18nDefines		-DHAS_WCHAR_H -DHAS_ISW_FUNCS
! #define ExtraLibraries		-lsocket 
! #define ExtraLoadOptions   	-b elf 
! #define ThreadedX		NO
! #define HasThreadSafeAPI	NO
  #define HasNdbm                 YES
  #define HasVFork                YES
  #define ExecableScripts         YES
! #define HasShadowPasswd		YES
! 
  
! XCOMM Uncomment the following line to build static COFF libraries
! XCOMM #define ForceNormalLib		YES 
! #define SharedLibXmu		NO
! 
! #define XnestServer		YES
  
! #define SystemV			YES
! #define LdCombineFlags		-r 
  
! #define HasLdRunPath		YES
! #define HasPoll			YES
! #define PatheticCpp		YES
! #define Malloc0ReturnsNull	YES		/* in case -lmalloc used */
  
! #define	ArCmdBase	ar
! #define	AsCmd		as
! #define	CppCmd		/lib/cpp
! #define	LdCmd		ld
! #define	LexCmd		lex
! #define	MakeCmd		make
! #define	YaccCmd		yacc
  
! #define ConnectionFlags	-DUNIXCONN -DLOCALCONN -DTCPCONN -DFD_SETSIZE=256
  
  #include <scoLib.rules>  /* minor changes to sv4Lib.rules */
  #include <sv4Lib.rules>
--- 1,143 ----
  XCOMM platform:  $XConsortium: sco.cf /main/5 1996/12/04 10:12:36 swick $
+ XCOMM platform:  $XFree86: xc/config/cf/sco.cf,v 3.12.2.1 1997/05/24 13:38:09 dawes Exp $
  
! /*
!  * This is sco.cf, for SCO Open Server 5.0.2 and SCO UNIX.
!  * Please mail hug@netcom.com with any questions.
!  *
!  * This section is common to all versions of SCO
!  */
! 
! #ifndef ScoOsMouse
! # define ScoOsMouse             YES
  #endif
+ 
  #ifndef OSVendor
! #define OSVendor                Santa Cruz Operation
! #endif
! 
! #define PosixLibraries          /**/
! #define Malloc0ReturnsNull      YES
! #define RemoveDSDENroffMacros   NO
! #define ExtraLibraries          -lsocket -lmalloc -lpt
! 
! #define ManSourcePath           $(MANPATH)/cat.
! 
! #ifndef CompressManPages
! #define CompressManPages        YES
! #endif
! 
! #if ScoOsMouse
! # define ServerExtraDefines     -DUSE_OSMOUSE XFree86ServerDefines
! # define ServerExtraSysLibs     $(CBRT) -lm -levent
! #else
! # define ServerExtraSysLibs     $(CBRT) -lm
! #endif
! 
! /*
!  * XBSDLIB is included with the Socket libraries, because SCO needs Xbsd
!  * as its bcopy routine doesn't handle overlapping regions. If HasSockets
!  * If HasSockets is false the XINETLIB does it for us anyway.
!  */
! #define SocketLibraries	        $(XBSDLIB) -lsocket
! 
! #define ConnectionFlags         -DLOCALCONN -DTCPCONN -DFD_SETSIZE=256
! 
! #if defined(i386Sco324Architecture) || defined(i386Sco325Architecture)
! # ifndef HasSymLinks
! #  define HasSymLinks           YES
! # endif
! # define CompressManCmd         $(COMPRESS) -v
! #else /* SCO 3.2.2 */
! # ifndef HasSymLinks
! #  define HasSymLinks           NO
! # endif
! # define CommpressManCmd        pack
! #endif
! 
! /*
!  * Due to the extra '.' chars in the SCO man pages file name we have
!  * to provide our own version of this macro.
!  */
! 
! #define InstallManPageAliases(file,destdir,aliases)                     @@\
! install.man::                                                           @@\
!         @(SUFFIX=`echo $(DESTDIR)destdir/file.* | cut -f3,4 -d.`; \     @@\
!         for i in aliases; do (set -x; \                                 @@\
!         $(RM) $(DESTDIR)destdir/$$i.*; \                                @@\
!         (cd $(DESTDIR)destdir; $(LN) file.$${SUFFIX} \                  @@\
!         $$i.$${SUFFIX})); \                                             @@\
!         done)
! 
! /*
!  * This is the SCO Open Server 5.0.2 section. BOOTSTRAPCFLAGS is computed
!  * automatically. You can simply run make World.
!  */
! #ifdef i386Sco325Architecture
! #ifndef OSName
! #define OSName                  OpenServer Release 5
  #endif
  #ifndef OSMajorVersion
! #define OSMajorVersion          5
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion          0
  #endif
  #ifndef OSTeenyVersion
! #define OSTeenyVersion          2
  #endif
  
! #define StandardDefines         -Dsco -DSCO -DSYSV -Di386 -DSCO325 -DSCO324
! #ifdef HasGcc2
! # define DefaultCCOptions       -melf
! # define CcCmd                  gcc
! # define ExtraLoadOptions       -melf
! # define DefaultCDebugFlags     DefaultGcc2i386Opt
! # define OptimizedCDebugFlags   DefaultGcc2i386Opt
  #else
! # define DefaultCCOptions       -dy 
! # define CcCmd                  cc
! # define ExtraLoadOptions       -b elf
! # define DefaultCDebugFlags     -O2
! # define OptimizedCDebugFlags   -O2
  #endif
  
! #define XawI18nDefines          -DHAS_WCHAR_H -DHAS_ISW_FUNCS
! #define NeedWidePrototypes      NO
! #define ServerOSDefines         -DDDXTIME
  #define ToolkitStringsABIOptions -intelabi
! #define ThreadedX               NO
! #define HasThreadSafeAPI        NO
  #define HasNdbm                 YES
  #define HasVFork                YES
+ #define HasPutenv               YES
  #define ExecableScripts         YES
! #define HasShadowPasswd         YES
  
! #ifndef HasLibCrypt
! # define HasLibCrypt            YES
! # define SpecialLibCrypt        -lcrypt
! #endif
  
! #ifndef ForceNormalLib
! # define ForceNormalLib         YES 
! #endif
  
! #define SharedLibXmu            NO
! #define SystemV                 YES
! #define LdCombineFlags          -r 
  
! #define HasLdRunPath            YES
! #define HasPoll                 YES
! #define PatheticCpp             YES
  
! #define ArCmdBase               ar
! #define AsCmd                   as
! #define CppCmd                  /lib/cpp
! #define LdCmd                   ld
! #define LexCmd                  lex
! #define MakeCmd                 make
! #define YaccCmd                 yacc
  
  #include <scoLib.rules>  /* minor changes to sv4Lib.rules */
  #include <sv4Lib.rules>
***************
*** 70,72 ****
--- 146,206 ----
  #define DtSearchDefines		-DI18N_MSG DtSvcDefines
  #define DtWidgetDefines		DtSearchDefines
  #define DtPrintDefines		DtSearchDefines
+ 
+ #else /* !i386Sco325Architecture */
+ /*
+  * This is the SCO 3.2v4.x and SCO 3.2v2.x section
+  */
+ 
+ /* You must manually compute BootstrapCFlags for initial build */
+ 
+ #define	OSMinorVersion	2
+ 
+ #ifdef i386Sco324Architecture
+ # define BootstrapCFlags        -DSYSV -Di386 -DSCO -DSCO324
+ # define OSTeenyVersion         4
+ # define OSName                 (SCO Version 3.2.4)
+ # define OSDefines              -DSCO -DSCO324 -Dsco -Dsco324 -DBROKEN_FTOL \
+                                 -D_NO_PROTOTYPE -D_SVID
+ #else
+ # define BootstrapCFlags        -DSYSV -Di386 -DSCO
+ # define OSTeenyVersion         2
+ # define OSName                 (SCO Version 3.2.2)
+ # define OSDefines              -DSCO -Dsco -DBROKEN_FTOL -DNO_PROTOTYPE \
+                                 -D_SVID
+ #endif
+ 
+ #ifdef i386Sco324Architecture
+ /*
+  * if your gcc is compiled with STDC_VALUE=0 then change the 1 to 0
+  */
+ # define GCC_STDC_VALUE         1
+ # if !GCC_STDC_VALUE
+ #  define OSDefines             -DSCO -DSCO324 -Dsco -Dsco324 -DBROKEN_FTOL \
+                                 -D_NO_PROTOTYPE -D_SVID -D__STDC__=1
+ #  undef StandardCppDefines
+ #  define StandardCppDefines    -DUNIXCPP=1 StandardDefines
+ # endif
+ #endif
+ 
+ #define XawI18nDefines		    -DUSE_XWCHAR_STRING -DUSE_XMBTOWC
+ 
+ /*
+  * The user should override this in their site.def if they have the real
+  * crypt library. We default to the international crypt library here as
+  * anyone may obtain that.
+  */
+ 
+ #ifndef HasLibCrypt
+ # define HasLibCrypt            YES
+ # define SpecialLibCrypt        -lcrypt_i
+ #endif
+ 
+ #include <svr3.cf>
+ 
+ #endif /* SCO 3.2.4 and SCO 3.2.2 section */
+ 
+ #ifdef i386Architecture
+ #include <xfree86.cf>
+ #endif
+ 
*** motif.orig/config/cf/scoLib.rules	Fri Apr 28 11:04:02 2000
--- motif/config/cf/scoLib.rules	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
--- 1,5 ----
  XCOMM $XConsortium: scoLib.rules /main/2 1996/09/28 16:12:20 rws $
+ XCOMM $XFree86: xc/config/cf/scoLib.rules,v 1.1.1.2.2.2 1997/07/19 12:59:10 dawes Exp $
  
  /*
   * SharedLibraryTarget3 - generate rules to create a shared library;
***************
*** 13,19 ****
  									@@\
  Concat(lib,libname.so.rev): solist1 solist2 solist3 $(EXTRALIBRARYDEPS)	@@\
  	$(RM) $@~							@@\
! 	echo -n $(LD) -o up/$@~ $(SHLIBLDFLAGS) -h $@ solist1 " " > Concat(down/lib,cmd) 	@@\
  	echo -n solist2 " " >> Concat(down/lib,cmd)			@@\
  	echo -n solist3  >> Concat(down/lib,cmd)			@@\
  	(cd down; $(SHELL) Concat(./lib,cmd))				@@\
--- 14,20 ----
  									@@\
  Concat(lib,libname.so.rev): solist1 solist2 solist3 $(EXTRALIBRARYDEPS)	@@\
  	$(RM) $@~							@@\
! 	echo -n $(LD) -o up/$@~ $(SHLIBLDFLAGS) -h $(DESTDIR)$(SHLIBDIR)/$@ solist1 " " > Concat(down/lib,cmd) 	@@\
  	echo -n solist2 " " >> Concat(down/lib,cmd)			@@\
  	echo -n solist3  >> Concat(down/lib,cmd)			@@\
  	(cd down; $(SHELL) Concat(./lib,cmd))				@@\
*** motif.orig/config/cf/sequent.cf	Fri Apr 28 11:04:02 2000
--- motif/config/cf/sequent.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: sequent.cf /main/5 1999/05/19 16:59:58 mgreess $
  /*
   * SET VERSION NUMBERS BEFORE MAKING MAKEFILES; also, you'll need to install
   * util/scripts/bsdinstall.sh before doing a "make install"
--- 1,4 ----
! XCOMM platform:  $XConsortium: sequent.cf /main/4 1996/12/04 10:10:49 swick $
  /*
   * SET VERSION NUMBERS BEFORE MAKING MAKEFILES; also, you'll need to install
   * util/scripts/bsdinstall.sh before doing a "make install"
***************
*** 77,87 ****
  #define BuildServer		NO
  #define BuildXInputLib		NO
  #define BuildPexClients		NO
- 
- #define BuildMotifConfig	NO
- #define BuildMotifDemos		NO
- #define BuildWMLTable		NO
- 
  
  #define LnCmd			ln -s
  
--- 77,82 ----
*** motif.orig/config/cf/ServerLib.tmpl	Fri Jul  7 15:22:07 2000
--- motif/config/cf/ServerLib.tmpl	Sat Jun  3 18:49:34 2000
***************
*** 0 ****
--- 1,141 ----
+ XCOMM $XFree86: xc/config/cf/ServerLib.tmpl,v 3.0 1996/10/03 08:28:07 dawes Exp $
+ /*
+  * Server Library imakefile info - this contains any special
+  * redefinitions, etc. that Imakefiles in the various server library 
+  * subtrees will need.
+  *
+  * Before including this, you must set the following boolean variables:
+  * DoSharedLib, DoNormalLib, DoDebugLib, DoProfileLib
+  *
+  */
+ 
+ #ifndef DoNormalLib
+ #define DoNormalLib 	YES
+ #endif
+ 
+ #ifndef LibraryDefines
+ #define LibraryDefines StandardDefines
+ #endif
+ #ifndef LibraryCDebugFlags
+ #define LibraryCDebugFlags DefaultCDebugFlags
+ #endif
+ #ifndef SeparateSharedCompile
+ #define SeparateSharedCompile YES
+ #endif
+ #ifndef SharedServerLibraryDef
+ #define SharedServerLibraryDef $(__NOOP__)
+ #endif
+ 
+ #ifndef LibraryCcCmd
+ #if DoSharedLib && defined(SharedLibraryCcCmd)
+ #define LibraryCcCmd SharedLibraryCcCmd
+ #else
+ #define LibraryCcCmd CcCmd
+ #endif
+ #endif
+ #ifndef LibraryCCOptions
+ #if DoSharedLib && defined(SharedLibraryCCOptions)
+ #define LibraryCCOptions SharedLibraryCCOptions
+ #else
+ #define LibraryCCOptions DefaultCCOptions
+ #endif
+ #endif
+ 
+ #if DoDebugLib
+ #define _DebuggedLibMkdir() LibMkdir(debugger)
+ #define _DebuggedObjCompile(options) DebuggedLibObjCompile(options)
+ #define _DebuggedCleanDir() LibCleanDir(debugger)
+ #else
+ #define _DebuggedLibMkdir() $(_NULLCMD_)
+ #define _DebuggedObjCompile(options) $(_NULLCMD_)
+ #define _DebuggedCleanDir() $(_NULLCMD_)
+ #endif
+ 
+ #if DoProfileLib
+ #define _ProfiledLibMkdir() LibMkdir(profiled)
+ #define _ProfiledObjCompile(options) ProfiledLibObjCompile(options)
+ #define _ProfiledCleanDir() LibCleanDir(profiled)
+ #else
+ #define _ProfiledLibMkdir() $(_NULLCMD_)
+ #define _ProfiledObjCompile(options) $(_NULLCMD_)
+ #define _ProfiledCleanDir() $(_NULLCMD_)
+ #endif
+ 
+ #if !DoNormalLib
+ #define _NormalLibMkdir() $(_NULLCMD_)
+ #define _NormalObjCompile(options) $(_NULLCMD_)
+ #define _NormalCleanDir() $(_NULLCMD_)
+ #else
+ #if DoSharedLib && SeparateSharedCompile
+ #define _NormalLibMkdir() LibMkdir(unshared)
+ #define _NormalObjCompile(options) UnsharedLibObjCompile(options)
+ #define _NormalCleanDir() LibCleanDir(unshared)
+ #else
+ #define _NormalLibMkdir() $(_NULLCMD_)
+ #define _NormalObjCompile(options) NormalLibObjCompile(options)
+ #define _NormalCleanDir() $(_NULLCMD_)
+ #endif
+ #endif
+ 
+ #if !DoSharedLib || (DoNormalLib && !SeparateSharedCompile)
+ #define _SharedObjCompile(options) $(_NULLCMD_)
+ #else
+ #if SeparateSharedCompile
+ #define _SharedObjCompile(options) NormalSharedLibObjCompile(options)
+ #else
+ #define _SharedObjCompile(options) NormalLibObjCompile(options)
+ #endif
+ #endif
+ 
+ #define SRCsuf c
+ 
+ #ifndef LibraryObjectRule
+ #define LibraryObjectRule()						@@\
+ all::									@@\
+ 	_DebuggedLibMkdir()						@@\
+ 	_ProfiledLibMkdir()						@@\
+ 	_NormalLibMkdir()						@@\
+ 									@@\
+ includes::								@@\
+ 	_DebuggedLibMkdir()						@@\
+ 	_ProfiledLibMkdir()						@@\
+ 	_NormalLibMkdir()						@@\
+ 									@@\
+ .SRCsuf.Osuf:								@@\
+ 	_DebuggedObjCompile($(_NOOP_))					@@\
+ 	_ProfiledObjCompile($(_NOOP_))					@@\
+ 	_NormalObjCompile($(_NOOP_))					@@\
+ 	_SharedObjCompile(SharedServerLibraryDef)			@@\
+ 									@@\
+ clean::									@@\
+ 	_DebuggedCleanDir()						@@\
+ 	_ProfiledCleanDir()						@@\
+ 	_NormalCleanDir()						@@\
+ 
+ #endif /* LibraryObjectRule */
+ 
+ #ifndef SpecialLibObjectRule
+ #define SpecialLibObjectRule(objs,depends,options)			@@\
+ objs: depends								@@\
+ 	_DebuggedObjCompile(options)					@@\
+ 	_ProfiledObjCompile(options)					@@\
+ 	_NormalObjCompile(options)					@@\
+ 	_SharedObjCompile(options)					@@\
+ 
+ #endif /* SpecialLibObjectRule */
+ 
+ #ifndef SpecialCLibObjectRule
+ #define SpecialCLibObjectRule(basename,depends,options)			@@\
+ SpecialLibObjectRule(basename.Osuf,basename.SRCsuf depends,options)	@@\
+ 									@@\
+ basename.i: basename.SRCsuf depends					@@\
+ 	CPPOnlyCompile(basename.SRCsuf,options)				@@\
+ 									@@\
+ CenterLoadTarget(debug_src,basename.SRCsuf,NullParameter,$(ALLDEFINES) options)
+ #endif /* SpecialCLibObjectRule */
+ 
+ #if DoSharedLib
+ LibraryObjectRule()
+ #else
+ NormalLibraryObjectRule()
+ #endif
*** motif.orig/config/cf/Server.tmpl	Fri Apr 28 11:03:59 2000
--- motif/config/cf/Server.tmpl	Sat Jun  3 18:49:34 2000
***************
*** 3,9 ****
   * that Imakefiles in the server subtree will need.
   */
  
! XCOMM $TOG: Server.tmpl /main/15 1997/07/16 14:43:38 kaleb $
  
  #define PassCDebugFlags CDEBUGFLAGS="$(CDEBUGFLAGS)" LDSTRIPFLAGS="$(LDSTRIPFLAGS)"
  
--- 3,10 ----
   * that Imakefiles in the server subtree will need.
   */
  
! XCOMM $XConsortium: Server.tmpl /main/14 1996/04/30 14:37:27 mw $
! XCOMM $XFree86: xc/config/cf/Server.tmpl,v 3.3.2.3 1998/02/07 00:54:21 dawes Exp $
  
  #define PassCDebugFlags CDEBUGFLAGS="$(CDEBUGFLAGS)" LDSTRIPFLAGS="$(LDSTRIPFLAGS)"
  
***************
*** 22,29 ****
  #ifndef DoThreadedServer
  #define DoThreadedServer NO
  #endif
  #ifndef InstallServerSetUID
! #define InstallServerSetUID NO
  #endif
  
  /*
--- 23,36 ----
  #ifndef DoThreadedServer
  #define DoThreadedServer NO
  #endif
+ #ifndef XserverNeedsSetUID
+ #define XserverNeedsSetUID NO
+ #endif
+ #ifndef UseXserverWrapper
+ #define UseXserverWrapper XserverNeedsSetUID
+ #endif
  #ifndef InstallServerSetUID
! #define InstallServerSetUID (XserverNeedsSetUID && !UseXserverWrapper)
  #endif
  
  /*
***************
*** 38,43 ****
--- 45,74 ----
  #endif
  #endif /* SetUIDServerTarget */
  
+ /*
+  * BuildDynamicLoading - dynamic module support
+  */
+ #ifndef BuildDynamicLoading
+ #define BuildDynamicLoading		NO
+ #endif
+ 
+ /*
+  * ExtensionsDynamicModules - compile server extensions as dynamic modules
+  */
+ #ifndef ExtensionsDynamicModules
+ #define ExtensionsDynamicModules	BuildDynamicLoading
+ #endif
+ 
+ #ifndef PexDynamicModule
+ #define PexDynamicModule	ExtensionsDynamicModules
+ #endif
+ #ifndef XieDynamicModule
+ #define XieDynamicModule	ExtensionsDynamicModules
+ #endif
+ #ifndef GlxModule
+ #define GlxModule	ExtensionsDynamicModules
+ #endif
+ 
           CC = ServerCcCmd
    CCOPTIONS = ServerCCOptions
  #if DoThreadedServer
***************
*** 47,49 ****
--- 78,95 ----
  CDEBUGFLAGS = ServerCDebugFlags
  EXT_DEFINES = ExtensionDefines
  
+ #if GlxModule | DoLoadableServer
+ GLX_DEFINES = GlxDefines -DGLX_MODULE
+ #else
+ GLX_DEFINES = GlxDefines
+ #endif
+ 
+ #ifndef GlxStaticServerLib
+ #define GlxStubLib	YES
+ #else
+ #define GlxStubLib	NO
+ #endif
+ 
+ #ifdef XFree86Version
+ #include <xf86.tmpl>
+ #endif
*** motif.orig/config/cf/sgi.cf	Fri Apr 28 11:04:02 2000
--- motif/config/cf/sgi.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: sgi.cf /main/49 1998/02/26 09:12:19 barstow $
  
  #ifndef OSName
  # define OSName		DefaultOSName
--- 1,7 ----
! XCOMM platform:  $TOG: sgi.cf /main/45 1997/06/18 18:01:03 kaleb $
! XCOMM
! XCOMM
! XCOMM $XFree86: xc/config/cf/sgi.cf,v 1.1.1.5.2.4 1999/06/18 13:47:28 hohndel Exp $
  
  #ifndef OSName
  # define OSName		DefaultOSName
***************
*** 67,72 ****
--- 70,76 ----
  # define BuildLibPathVar	_RLD_ROOT=/dev/null LD_LIBRARYN32_PATH
  # define SystemBuildLibPath	/usr/lib32:/lib32
  # define LdCmd			ld -n32
+ # define AsCmd			as -n32
  #else
  # define BuildLibPathVar	_RLD_ROOT=/dev/null LD_LIBRARY_PATH
  # define SystemBuildLibPath	/usr/lib:/lib
***************
*** 109,115 ****
  # if OSMajorVersion < 6
  #  define sgiCCOptions -xansi
  # else
! #  define CppCmd cc -E -cckr
  #  ifdef Mips64Architecture
  /* set Mips64Architecture in host.def. Usually don't need it but we
   * (the X Consortium) want a  64-bit big-endian machine to test on. */
--- 113,119 ----
  # if OSMajorVersion < 6
  #  define sgiCCOptions -xansi
  # else
! #  define CppCmd cc -E
  #  ifdef Mips64Architecture
  /* set Mips64Architecture in host.def. Usually don't need it but we
   * (the X Consortium) want a  64-bit big-endian machine to test on. */
***************
*** 121,127 ****
  #  else
  #   define sgiCCOptions -xansi
  #  endif
! #  if OSMinorVersion == 2
  /* if you haven't installed patch 1361, 1403, or 1645 on IRIX 6.2 then you
   * must add "#define HasPosixThreads NO" in your site.def or host.def file
   */
--- 125,131 ----
  #  else
  #   define sgiCCOptions -xansi
  #  endif
! #  if OSMinorVersion > 1
  /* if you haven't installed patch 1361, 1403, or 1645 on IRIX 6.2 then you
   * must add "#define HasPosixThreads NO" in your site.def or host.def file
   */
***************
*** 131,141 ****
  #   define ThreadedX HasPosixThreads
  #   define ThreadsLibraries -lpthread
  /* 
!  * Add "#define HasSgiThreadsPatch1403 YES" to your site.def or host.def if 
   * that's which patch you have.
   */
  #   ifndef HasSgiThreadsPatch1403
! #    define HasSgiThreadsPatch1403 NO
  #   endif
  #   if (HasSgiThreadsPatch1403) 
  #    define SystemMTDefines -D_POSIX_THREAD_SAFE_FUNCTIONS
--- 135,145 ----
  #   define ThreadedX HasPosixThreads
  #   define ThreadsLibraries -lpthread
  /* 
!  * Add "#define HasSgiThreadsPatch1403 NO" to your site.def or host.def if 
   * that's which patch you have.
   */
  #   ifndef HasSgiThreadsPatch1403
! #    define HasSgiThreadsPatch1403 YES
  #   endif
  #   if (HasSgiThreadsPatch1403) 
  #    define SystemMTDefines -D_POSIX_THREAD_SAFE_FUNCTIONS
***************
*** 226,258 ****
  dst::  src deplist							@@\
  	RemoveFile($@)							@@\
  	ClearmakeOSName \
! 	$(CPP) CppNoLineInfoOption defs src 2>/dev/null | CppSedMagic >$@; @@\
  									@@\
  clean::									@@\
  	RemoveFiles(dst)
  #endif /* CppFileTarget */
- 
- #ifndef CppScriptTarget
- #if ExecableScripts		/* can use #! instead of colon */
- #define CppScriptTarget(dst,src,defs,deplist)				@@\
- dst::	src deplist							@@\
- 	RemoveFile($@)							@@\
- 	ClearmakeOSName \
- 	$(CPP) CppNoLineInfoOption defs src | CppSedMagic >$@		@@\
- 	chmod a+x $@							@@\
- 									@@\
- clean::									@@\
- 	RemoveFiles(dst)
- #else
- #define CppScriptTarget(dst,src,defs,deplist)				@@\
- dst::  src deplist							@@\
- 	RemoveFile($@)							@@\
- 	ClearmakeOSName \
- 	echo \: >$@							@@\
- 	sed '1d' src | $(CPP) CppNoLineInfoOption defs | CppSedMagic >>$@	@@\
- 	chmod a+x $@							@@\
- 									@@\
- clean::									@@\
- 	RemoveFile(dst)
- #endif /* ExecableScripts */
- #endif /* CppScriptTarget */
--- 230,237 ----
  dst::  src deplist							@@\
  	RemoveFile($@)							@@\
  	ClearmakeOSName \
! 	$(CPP) CppNoLineInfoOption defs src | CppSedMagic >$@; 		@@\
  									@@\
  clean::									@@\
  	RemoveFiles(dst)
  #endif /* CppFileTarget */
*** motif.orig/config/cf/site.def	Fri Apr 28 11:03:58 2000
--- motif/config/cf/site.def	Sat Jun  3 18:43:51 2000
***************
*** 1,34 ****
! XCOMM site:  $TOG: site.def /main/12 1997/07/02 17:52:18 samborn $
  
  /***************************************************************************
   *                                                                         *
!  *		  X Consortium In-House Build Parameters                   *
!  *			Use at Your Own Risk				   *
   *                                                                         *
   ***************************************************************************/
  
  #ifndef SiteIConfigFiles
! # define SiteIConfigFiles $(IRULESRC)/host.def
! # define LocalConfigFiles host.def
  #endif
  
  #ifdef BeforeVendorCF
  
! # include <host.def>
  
! /* We will import x11. */
! # define ImportX11		YES
  
! # ifndef TopLevelProject
! #  define TopLevelProject	Motif
! # endif
  
  /* On systems where cpp doesn't expand correctly macros in include directives
!  * the two following macros need to be defined directly (accordingly to the
!  * TopLevelProject macro defined above).
   */
! # if defined(SunArchitecture) || defined(AIXArchitecture) \
!      || defined(USLArchitecture) || defined(UXPArchitecture)
  #  ifndef ProjectRulesFile
  #   define ProjectRulesFile	<Motif.rules>
  #  endif
--- 1,58 ----
! XCOMM site:  $XConsortium: site.def /main/revisionist/4 1996/12/31 08:02:07 kaleb $
! XCOMM site:  $XFree86: xc/config/cf/site.def,v 3.17.2.1 1997/06/22 10:32:21 dawes Exp $
  
  /***************************************************************************
   *                                                                         *
!  *			   SITE-SPECIFIC DEFINITIONS                       *
!  *                                                                         *
!  * This file contains two halves, one included before the vendor-specific  *
!  * configuration file (.cf file), and one included after the .cf file.     *
!  * The before-half should be protected by #ifdef BeforeVendorCF, and the   *
!  * after-half should be protected by #ifdef AfterVendorCF.                 *
!  *                                                                         *
!  * The before-half should only set things that the .cf file depends on.    *
!  * For the .cf files shipped in this release, the main variables in this   *
!  * category are HasGcc, HasGcc2, HasCplusplus, OSMajorVersion,             *
!  * OSMinorVersion, and OSTeenyVersion.                                     *
!  *                                                                         *
!  * The after-half should contain all other definitions.  For example,      *
!  * place your ProjectRoot definition here.                                 *
!  *                                                                         *
!  * OS Major and Minor version numbers should be changed directly in the    *
!  * .cf file, not overridden in site.def.                                   *
   *                                                                         *
   ***************************************************************************/
  
+ /* if you want host-specific customization, this is one way to do it */
+ /*
  #ifndef SiteIConfigFiles
! #define SiteIConfigFiles $(IRULESRC)/host.def
! #define LocalConfigFiles host.def
  #endif
+ */
+ 
  
  #ifdef BeforeVendorCF
  
! /*
!  * Include this for easy XFree86 customisations
!  */
! #ifndef SiteIConfigFiles
! #define SiteIConfigFiles $(IRULESRC)/xf86site.def $(IRULESRC)/host.def
! #endif
  
! #include <host.def>
  
! #include <xf86site.def>
  
  /* On systems where cpp doesn't expand correctly macros in include directives
!  * the two following macros need to be defined directly (where "X11" is
!  * really whatever the TopLevelProject macro is defined to be).
   */
! # if defined(AIXArchitecture) || defined(SVR4Architecture) || \
!      defined(SCOArchitecture) || defined(Win32Architecture) || \
!      defined(UXPArchitecture) || defined(SunArchitecture) || \
!      defined(i386IscArchitecture)
  #  ifndef ProjectRulesFile
  #   define ProjectRulesFile	<Motif.rules>
  #  endif
***************
*** 37,72 ****
  #  endif
  # endif
  
! # ifdef AlphaArchitecture
! #  define HasDECCplusplus	YES
! # endif
  
! # ifdef HPArchitecture
! #  define HasHPCplusplus	YES
! # endif
  
! # if defined(SGIArchitecture)
! #  define MipsN32Architecture	YES
! # endif
  
! # ifdef SunArchitecture
! #  define HasSunCplusplus	YES
! # endif
  
! # if defined(UXPArchitecture) || defined(USLArchitecture) \
!      || defined(AIXArchitecture)
! #  define HasCplusplus		YES
! # endif
  
! #endif /* BeforeVendorCF */
  
! #ifdef AfterVendorCF
  
! # define X11ProjectRoot	/X11
! # define ProjectRoot	/usr/dt
! # define VirtualBindingsPath /usr/dt/lib/bindings
  
! # undef DefaultUserPath
! # define DefaultUserPath /bin:/usr/bin:$(BINDIR):/usr/ucb:/usr/local/bin:/usr/local/bin/mh:/site/local/scripts
  
  #endif /* AfterVendorCF */
--- 61,134 ----
  #  endif
  # endif
  
! /*
! #ifndef HasGcc2
! #define HasGcc2 YES
! #endif
! */
  
! #endif /* BeforeVendorCF */
  
! #ifdef AfterVendorCF
  
! #ifndef ProjectRoot
! #define ProjectRoot /usr/X11R6
! #endif
  
! /* Only set HasXdmAuth to YES if you have a Wraphelp.c file. */
! /* #define HasXdmAuth YES */
  
! /* #define PreIncDir DefaultGccIncludeDir */
  
! /*
! #if defined(SunArchitecture) && defined(SparcArchitecture)
! #define HasCodeCenter	YES
! #ifndef SVR4Architecture
! #define HasTestCenter	YES
! #endif
! #endif
! */
  
! /*
! #ifdef __hp9000s800
! #define HasCodeCenter	YES
! #endif
! */
! 
! /*
! #if defined(SunArchitecture) && defined(SparcArchitecture) && !defined(SVR4Architecture)
! #define HasPurify	YES
! #endif
! */
! 
! /*
! #define HasSentinel	YES
! */
! 
! /*
! #undef DefaultUserPath
! #define DefaultUserPath /bin:/usr/bin:$(BINDIR):/usr/ucb:/usr/local/bin
! */
! 
! 
! /* You do NOT need SetUID if you only run the server under xdm */
! /* You MAY need SetUID if users run the server by hand or under xinit */
! /* Consult your system administrator before making the X server setuid */
! /*
! #if defined(SunArchitecture) && OSMajorVersion > 4
! #define InstallXserverSetUID YES
! #endif
! */
! 
! /* You do NOT need SetUID if you only run the server under xdm */
! /* You MAY need SetUID if users run the server by hand or under xinit */
! /* Consult your system administrator before making the X server setuid */
! /*
! #ifdef XFree86Version
! #define InstallXserverSetUID YES
! #endif
! */
  
! #include <host.def>
  
  #endif /* AfterVendorCF */
*** motif.orig/config/cf/sun.cf	Fri Apr 28 11:04:02 2000
--- motif/config/cf/sun.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: sun.cf /main/176 1997/12/09 17:27:51 kaleb $
  
  #ifndef OSName
  # define OSName		DefaultOSName
--- 1,9 ----
! XCOMM platform:  $TOG: sun.cf /main/163 1997/06/08 20:08:23 kaleb $
! 
! 
! 
! 
! XCOMM platform:  $XFree86: xc/config/cf/sun.cf,v 3.31.2.10 1999/09/02 11:34:12 dawes Exp $
  
  #ifndef OSName
  # define OSName		DefaultOSName
***************
*** 29,34 ****
--- 34,43 ----
   *    provide appropriate values for the various compiler related
   *    configuration varibles used here.
   * 
+  * If you say you have the SunPro C compiler, we assume you have 
+  * version 2.0.x of the compiler.  If you have version 3.0.x instead, 
+  * define CCompilerMajorVersion as 3 in site.def
+  *
   * If you don't tell us which C compiler you have, we assume you have 
   * the SunPro C compiler under Solaris 2.x, and the bundled /bin/cc 
   * under SunOS 4.1.x
***************
*** 50,55 ****
--- 59,71 ----
   *
   */
  
+ #ifndef HasGcc2
+ #define HasGcc2 NO
+ #endif
+ #ifndef HasGcc
+ #define HasGcc HasGcc2
+ #endif
+ 
  #ifndef HasSunC
  # if (HasCenterLineC || HasGcc || HasGcc2 || OSMajorVersion < 5)
  #  define HasSunC NO
***************
*** 60,92 ****
  
  #if HasSunC 
  # ifndef CCompilerMajorVersion
! #  define CCompilerMajorVersion DefaultSunProCCompilerMajorVersion
! # endif
! # ifndef CCompilerMinorVersion
! #  define CCompilerMinorVersion DefaultSunProCCompilerMinorVersion
  # endif
- XCOMM SunPro C CCompilerMajorVersion./**/CCompilerMinorVersion
  #endif
  
  #if HasSunCplusplus
  # ifndef HasCplusplus
  #  define HasCplusplus YES
  # endif
  # ifndef CplusplusCompilerMajorVersion
! #  ifdef DefaultSunProCplusplusCompilerMajorVersion
! #   define CplusplusCompilerMajorVersion DefaultSunProCplusplusCompilerMajorVersion
! #  else
! #   define CplusplusCompilerMajorVersion 3
! #  endif
! # endif
! # ifndef CplusplusCompilerMinorVersion
! #  ifdef DefaultSunProCplusplusCompilerMinorVersion
! #   define CplusplusCompilerMinorVersion DefaultSunProCplusplusCompilerMinorVersion
! #  else
! #   define CplusplusCompilerMinorVersion 0
! #  endif
  # endif
- XCOMM SunPro C++ CplusplusCompilerMajorVersion./**/CplusplusCompilerMinorVersion
  #endif
  
  #if HasCenterLineC
--- 76,95 ----
  
  #if HasSunC 
  # ifndef CCompilerMajorVersion
! #  define CCompilerMajorVersion 3
! #  define DefaultCDebugFlags	-xO3
! #  define OptimizedCDebugFlags	-xO3
  # endif
  #endif
  
  #if HasSunCplusplus
  # ifndef HasCplusplus
  #  define HasCplusplus YES
+ #  define OptimizedCplusplusDebugFlags	-xO3
  # endif
  # ifndef CplusplusCompilerMajorVersion
! #  define CplusplusCompilerMajorVersion	4
  # endif
  #endif
  
  #if HasCenterLineC
***************
*** 107,112 ****
--- 110,116 ----
  # endif
  #endif
  
+ 
  #if OSMajorVersion < 4 || (OSMajorVersion == 4 && OSMinorVersion < 1)
  /* We do not guarantee this will work */
  # define BootstrapCFlags	-DNOSTDHDRS
***************
*** 126,168 ****
  
  #ifdef i386Architecture
  # if OSMajorVersion > 4
! #  define ServerExtraDefines	AllocateLocalDefines XFree86ServerDefines
! #  define ServerOSDefines	XFree86ServerOSDefines
  # else
  #  define ServerExtraDefines AllocateLocalDefines
! #  define ServerOSDefines	-DDDXOSINIT
  # endif
  #else
  # define ServerExtraDefines AllocateLocalDefines
! # define ServerOSDefines	-DDDXOSINIT
! # define HasPlugin		YES
  #endif
  
  #define XkbServerDefines  -DXKB_ALWAYS_USES_SOFT_REPEAT
  
  #if OSMajorVersion > 4
- #define ConnectionFlags		-DTCPCONN -DUNIXCONN -DLOCALCONN
  #if HasSunC
  /* 
   * Assume /opt/SUNWspro/bin/ contains symlinks to the appropriate tools
   */
  #ifndef  CcCmd
! # define CcCmd			/opt/SUNWspro/bin/cc
  #endif
  #ifndef  CplusplusCmd
! # define CplusplusCmd		/opt/SUNWspro/bin/CC
  #endif
  #ifndef  CplusplusFilt
! #  define CplusplusFilt 	/opt/SUNWspro/bin/c++filt
  #endif
  #ifndef  CplusplusDependIncludes
- #if CplusplusCompilerMajorVersion > 3
- # define CplusplusDependIncludes	-I/opt/SUNWspro/SC4.0/include/CC
- #elif CplusplusCompilerMajorVersion > 2
  # define CplusplusDependIncludes	-I/opt/SUNWspro/SC3.0/include/CC
- #else
- # define CplusplusDependIncludes	-I/opt/SUNWspro/SC2.0.1/include/CC
- #endif
  #endif
  #endif
  
--- 130,164 ----
  
  #ifdef i386Architecture
  # if OSMajorVersion > 4
! #  define ServerExtraDefines AllocateLocalDefines XFree86ServerDefines -D__EXTENSIONS__
! #  define ServerOSDefines    XFree86ServerOSDefines
  # else
  #  define ServerExtraDefines AllocateLocalDefines
! #  define ServerOSDefines   -DDDXOSINIT
  # endif
  #else
  # define ServerExtraDefines AllocateLocalDefines
! # define ServerOSDefines   -DDDXOSINIT
  #endif
  
  #define XkbServerDefines  -DXKB_ALWAYS_USES_SOFT_REPEAT
  
  #if OSMajorVersion > 4
  #if HasSunC
  /* 
   * Assume /opt/SUNWspro/bin/ contains symlinks to the appropriate tools
   */
  #ifndef  CcCmd
! # define CcCmd		/opt/SUNWspro/bin/cc
  #endif
  #ifndef  CplusplusCmd
! # define CplusplusCmd	/opt/SUNWspro/bin/CC
  #endif
  #ifndef  CplusplusFilt
! # define CplusplusFilt	/opt/SUNWspro/bin/c++filt
  #endif
  #ifndef  CplusplusDependIncludes
  # define CplusplusDependIncludes	-I/opt/SUNWspro/SC3.0/include/CC
  #endif
  #endif
  
***************
*** 187,192 ****
--- 183,189 ----
  # else
  #  define StandardDefines	  -Dsun -DSVR4
  #  define ToolkitStringsABIOptions	-sparcabi
+ #  define HasPlugin         YES
  # endif
  # define ExtraLibraries    -lsocket -lnsl
  # if OSMinorVersion > 1
***************
*** 206,212 ****
  #  endif
  # endif 		/* OSMinorVersion > 1 */
  # ifndef UseExportLists
! #  define UseExportLists YES
  # endif
  # define HasVFork          NO
  # define InstKmemFlags	  -g sys -m 2711
--- 203,216 ----
  #  endif
  # endif 		/* OSMinorVersion > 1 */
  # ifndef UseExportLists
! #  if OSMinorVersion > 4
! #   define UseExportLists YES
! #  else
! #   define UseExportLists NO
! #  endif
! # endif
! # if OSMinorVersion > 5
! #  define HasSnprintf YES
  # endif
  # define HasVFork          NO
  # define InstKmemFlags	  -g sys -m 2711
***************
*** 244,261 ****
  # ifndef XsunMonoServer
  #  define XsunMonoServer	  NO		/* monochrome only */
  # endif
  #endif /* not i386Architecture */
  
! #if HasGcc || HasGcc2
  # if OSMajorVersion > 4 && defined(i386Architecture)
  #  ifndef DefaultCCOptions
  #    define DefaultCCOptions -DNO_ASM
  #  endif
  # endif
  # if HasGcc2
  #  ifndef OptimizedCDebugFlags
  #   ifdef i386Architecture
! #    define OptimizedCDebugFlags -m486 DefaultGcc2i386Opt
  #   else
  #    define OptimizedCDebugFlags -O2
  #   endif
--- 248,284 ----
  # ifndef XsunMonoServer
  #  define XsunMonoServer	  NO		/* monochrome only */
  # endif
+ # ifndef BuildPexExt
+ #  define BuildPexExt	  (XsunServer || Xsun24Server)
+ # endif
  #endif /* not i386Architecture */
  
! #if (OSMajorVersion > 4) && defined(i386Architecture)
! #ifndef HasSolx86ApertureDriver
! #define HasSolx86ApertureDriver	YES
! #endif
! #endif
! 
! #if HasGcc
  # if OSMajorVersion > 4 && defined(i386Architecture)
  #  ifndef DefaultCCOptions
+ #   if UseInstalled
  #    define DefaultCCOptions -DNO_ASM
+ #   else
+ #    if OSMinorVersion > 6
+ #     define DefaultCCOptions -DNO_ASM -D__EXTENSIONS__
+ #    elif OSMinorVersion > 3
+ #     define DefaultCCOptions -ansi -pedantic -DNO_ASM -D__EXTENSIONS__
+ #    else
+ #     define DefaultCCOptions -DNO_ASM
+ #    endif
+ #   endif
  #  endif
  # endif
  # if HasGcc2
  #  ifndef OptimizedCDebugFlags
  #   ifdef i386Architecture
! #    define OptimizedCDebugFlags DefaultGcc2i386Opt
  #   else
  #    define OptimizedCDebugFlags -O2
  #   endif
***************
*** 270,276 ****
  
  # endif /* HasGcc2 (else) */
  
! #else /* not HasGcc, not HasGcc2 */
  
  # define AllocateLocalDefines -DINCLUDE_ALLOCA_H
  
--- 293,299 ----
  
  # endif /* HasGcc2 (else) */
  
! #else /* not HasGcc */
  
  # define AllocateLocalDefines -DINCLUDE_ALLOCA_H
  
***************
*** 314,320 ****
  
  # define PexCCOptions DefaultCCOptions
  
! #endif /* HasGcc || HasGcc2 (else) */
  
  #if OSMajorVersion < 5
  # define SharedAllocateLocalDefines -DINCLUDE_ALLOCA_H
--- 337,343 ----
  
  # define PexCCOptions DefaultCCOptions
  
! #endif /* HasGcc (else) */
  
  #if OSMajorVersion < 5
  # define SharedAllocateLocalDefines -DINCLUDE_ALLOCA_H
*** motif.orig/config/cf/sunLib.tmpl	Fri Apr 28 11:04:03 2000
--- motif/config/cf/sunLib.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM $TOG: sunLib.tmpl /main/47 1997/12/12 14:53:33 kaleb $
  
  /*
   * SunOS shared library template
--- 1,9 ----
! XCOMM $TOG: sunLib.tmpl /main/45 1997/02/13 13:52:59 kaleb $
! 
! 
! 
! 
! XCOMM $XFree86: xc/config/cf/sunLib.tmpl,v 3.7.2.1 1997/05/03 09:43:09 dawes Exp $
  
  /*
   * SunOS shared library template
***************
*** 26,32 ****
  #define SharedXmuRev 4.20
  #endif
  #ifndef SharedXextRev
! #define SharedXextRev 4.50
  #endif
  #ifndef SharedXiRev
  #define SharedXiRev 4.20
--- 31,37 ----
  #define SharedXmuRev 4.20
  #endif
  #ifndef SharedXextRev
! #define SharedXextRev 4.40
  #endif
  #ifndef SharedXiRev
  #define SharedXiRev 4.20
***************
*** 75,86 ****
  # if HasCplusplus
  #  if HasGcc2ForCplusplus
  UNSHARED_CXXLIB = -static -lC
! #  elif HasSunCplusplus
! #   if CplusplusCompilerMajorVersion > 3
! UNSHARED_CXXLIB = -Bstatic -L/opt/SUNWspro/SC4.0/lib -lC -Bdynamic
! #   else
  UNSHARED_CXXLIB = -Bstatic -lC -Bdynamic -lm -lc -Bstatic
- #   endif
  #  endif
  # endif
  
--- 80,87 ----
  # if HasCplusplus
  #  if HasGcc2ForCplusplus
  UNSHARED_CXXLIB = -static -lC
! #  else
  UNSHARED_CXXLIB = -Bstatic -lC -Bdynamic -lm -lc -Bstatic
  #  endif
  # endif
  
*** motif.orig/config/cf/sv3Lib.rules	Fri Apr 28 11:04:06 2000
--- motif/config/cf/sv3Lib.rules	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM $XFree86: xc/config/cf/sv3Lib.rules,v 3.0 1994/05/21 23:39:31 dawes Exp $
  /*
   * SVR3 shared library rules
   * Copyright (c) 1992, 1993 by Thomas Wolfram, Berlin, Germany
--- 2,8 ----
  
  
  
! XCOMM $XFree86: xc/config/cf/sv3Lib.rules,v 3.1 1996/12/27 06:50:27 dawes Exp $
  /*
   * SVR3 shared library rules
   * Copyright (c) 1992, 1993 by Thomas Wolfram, Berlin, Germany
*** motif.orig/config/cf/sv3Lib.tmpl	Fri Apr 28 11:04:06 2000
--- motif/config/cf/sv3Lib.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM $XFree86: xc/config/cf/sv3Lib.tmpl,v 3.0 1994/05/21 23:39:32 dawes Exp $
  /*
   * SVR3 shared library template
   * Copyright (c) 1992, 1993 by Thomas Wolfram, Berlin, Germany
--- 2,8 ----
  
  
  
! XCOMM $XFree86: xc/config/cf/sv3Lib.tmpl,v 3.1 1996/12/27 06:50:28 dawes Exp $
  /*
   * SVR3 shared library template
   * Copyright (c) 1992, 1993 by Thomas Wolfram, Berlin, Germany
*** motif.orig/config/cf/sv4Lib.rules	Fri Apr 28 11:04:03 2000
--- motif/config/cf/sv4Lib.rules	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM $TOG: sv4Lib.rules /main/19 1999/03/22 16:26:02 mgreess $
  
  /*
   * SVR4 shared library rules
--- 1,5 ----
! XCOMM $XConsortium: sv4Lib.rules /main/18 1996/09/28 16:13:29 rws $
! XCOMM $XFree86: xc/config/cf/sv4Lib.rules,v 3.4 1996/12/23 05:50:34 dawes Exp $
  
  /*
   * SVR4 shared library rules
***************
*** 24,30 ****
  #endif
  #ifndef PositionIndependentCFlags
  # if HasGcc2
! #  define PositionIndependentCFlags -fPIC
  # else
  #  define PositionIndependentCFlags -K PIC
  # endif
--- 25,31 ----
  #endif
  #ifndef PositionIndependentCFlags
  # if HasGcc2
! #  define PositionIndependentCFlags -fpic
  # else
  #  define PositionIndependentCFlags -K PIC
  # endif
***************
*** 44,55 ****
--- 45,66 ----
   * InstallSharedLibrary - generate rules to install the shared library.
   */
  #ifndef InstallSharedLibrary
+ #if StripInstalledPrograms
  # define InstallSharedLibrary(libname,rev,dest)				@@\
  install:: Concat(lib,libname.so.rev) 					@@\
  	MakeDir($(DESTDIR)dest)						@@\
  	$(INSTALL) $(INSTALLFLAGS) $(INSTLIBFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
+ 	mcs -d Concat($(DESTDIR)dest/lib,libname.so.rev)		@@\
  	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
  	cd $(DESTDIR)dest; $(LN) Concat(lib,libname.so.rev) Concat(lib,libname.so)
+ #else
+ # define InstallSharedLibrary(libname,rev,dest)				@@\
+ install:: Concat(lib,libname.so.rev) 					@@\
+ 	MakeDir($(DESTDIR)dest)						@@\
+ 	$(INSTALL) $(INSTALLFLAGS) $(INSTLIBFLAGS) Concat(lib,libname.so.rev) $(DESTDIR)dest @@\
+ 	$(RM) Concat($(DESTDIR)dest/lib,libname.so)			@@\
+ 	cd $(DESTDIR)dest; $(LN) Concat(lib,libname.so.rev) Concat(lib,libname.so)
+ #endif
  
  #endif /* InstallSharedLibrary */
  
***************
*** 100,105 ****
--- 111,133 ----
  	$(RM) Concat(lib,libname.so.rev) Concat(lib,libname.so)
  
  #endif /* SharedLibraryTarget */
+ 
+ 
+ #ifndef SharedDepModuleTarget
+ #define SharedDepModuleTarget(name,deps,solist)				@@\
+ AllTarget(name)								@@\
+ 									@@\
+ name: deps								@@\
+ 	$(RM) $@~							@@\
+ 	$(LD) -o $@~ $(SHLIBLDFLAGS) solist $(REQUIREDLIBS)		@@\
+ 	$(RM) $@							@@\
+ 	$(MV) $@~ $@							@@\
+ 									@@\
+ clean::									@@\
+ 	$(RM) name
+ 
+ #endif /* SharedDepModuleTarget */
+ 
  
  /*
   * SharedLibraryDataTarget - generate rules to create shlib data file;
*** motif.orig/config/cf/sv4Lib.tmpl	Fri Apr 28 11:04:05 2000
--- motif/config/cf/sv4Lib.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 4,9 ****
--- 4,11 ----
   * SVR4 shared library template
   */
  
+ XCOMM $XFree86: xc/config/cf/sv4Lib.tmpl,v 3.3 1996/12/30 13:57:39 dawes Exp $
+ 
  /* SVR4 shared libraries are deficient in link semantics */
  XMULIBONLY = -lXmu
  #ifndef FixupLibReferences
***************
*** 14,21 ****
--- 16,26 ----
  # define XawClientLibs $(XAWLIB) $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
  #endif
  
+ #if 0
+ /* This causes problems on SVR4.0 */
  #ifndef SharedICEReqs
  # define SharedICEReqs -lsocket
+ #endif
  #endif
  
  #if ThreadedX
*** motif.orig/config/cf/svr3.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/svr3.cf	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM $XFree86: xc/config/cf/svr3.cf,v 3.8 1995/09/22 07:06:34 dawes Exp $
  
  #ifndef HasGcc
  #define HasGcc      YES
--- 2,8 ----
  
  
  
! XCOMM $XFree86: xc/config/cf/svr3.cf,v 3.9.2.1 1997/05/24 13:38:09 dawes Exp $
  
  #ifndef HasGcc
  #define HasGcc      YES
***************
*** 22,28 ****
  
  #ifndef Gcc2MOption
  # if HasGcc2
! #  define Gcc2MOption -m486
  # else
  #  define Gcc2MOption /* */
  # endif
--- 22,28 ----
  
  #ifndef Gcc2MOption
  # if HasGcc2
! #  define Gcc2MOption /* */
  # else
  #  define Gcc2MOption /* */
  # endif
*** motif.orig/config/cf/svr4.cf	Fri Apr 28 11:04:05 2000
--- motif/config/cf/svr4.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
--- 1,5 ----
  XCOMM $TOG: svr4.cf /main/17 1997/06/08 20:08:31 kaleb $
+ XCOMM $XFree86: xc/config/cf/svr4.cf,v 3.25.2.2 1997/07/05 15:55:30 dawes Exp $
  /*
   * A default OS name
   */
***************
*** 78,110 ****
  #ifndef YaccCmd
  #define	YaccCmd	/usr/ccs/bin/yacc
  #endif
  
  #if (OSMinorVersion == 0)
  #ifndef XawI18nDefines
  #define XawI18nDefines		-DUSE_XWCHAR_STRING
  #endif
  #endif
  
  #ifdef i386Architecture
  #ifndef StandardDefines
  #define StandardDefines		-DSVR4 -Di386
  #endif
  #ifndef ToolkitStringsABIOptions
! #define ToolkitStringsABIOptions -intelabi
  #endif
  #ifndef DefaultCCOptions
! #if HasGcc2
! #if !defined(SunArchitecture)
! #define DefaultCCOptions -ansi
! #endif
! #else
  #define DefaultCCOptions -Xa -Dasm=__asm
  #endif
  #endif
  #ifndef DefaultCDebugFlags
  #if HasGcc2
! #ifdef i386Architecture
! #define DefaultCDebugFlags -m486 DefaultGcc2i386Opt
  #else
  #define DefaultCDebugFlags -O2
  #endif
--- 79,170 ----
  #ifndef YaccCmd
  #define	YaccCmd	/usr/ccs/bin/yacc
  #endif
+ #ifndef MkdirHierCmd
+ #define MkdirHierCmd mkdir -p
+ #endif
+ 
+ #ifndef SunArchitecture
+ /*
+  * These come from usl.cf, and at least some are required by other
+  * SVR4 versions
+  */
+ #ifndef UseLocalRegex
+ #define UseLocalRegex		YES
+ #endif
+ #ifndef XmDefines
+ #define XmDefines		\
+ 	-DNO_REGCOMP -DNEED_STRCASECMP \
+ 	-DSUPPORT_ZERO_WIDTH -DHAS_WIDECHAR_FUNCTIONS
+ #endif
+ #ifndef DtSvcDefines
+ #define DtSvcDefines		-DXK_MISCELLANY -DMULTIBYTE -DNO_REGCOMP
+ #endif
+ #ifndef DtSearchDefines
+ #define DtSearchDefines		-DI18N_MSG DtSvcDefines
+ #endif
+ #ifndef DtWidgetDefines
+ #define DtWidgetDefines		DtSearchDefines
+ #endif
+ #ifndef DtPrintDefines
+ #define DtPrintDefines		DtSearchDefines
+ #endif
+ #ifndef HasStrcasecmp
+ #define HasStrcasecmp		NO
+ #endif
+ #endif
  
+ #ifndef SunArchitecture
  #if (OSMinorVersion == 0)
  #ifndef XawI18nDefines
  #define XawI18nDefines		-DUSE_XWCHAR_STRING
  #endif
  #endif
+ #endif
+ 
+ #ifndef HasGcc2
+ #define HasGcc2 NO
+ #endif
+ #ifndef HasGcc
+ #define HasGcc HasGcc2
+ #endif
  
  #ifdef i386Architecture
+ #ifndef SunArchitecture
+ #if (OSMinorVersion > 2) || ((OSMinorVersion == 2) && (OSTeenyVersion >= 2))
+ #ifndef StandardDefines
+ #define StandardDefines		-DSVR4 -DSVR42MP -Di386
+ #endif
+ #ifndef HasParallelMake
+ #define HasParallelMake		YES
+ #endif
+ #if HasParallelMake
+ #define ParallelDefines		-P -B
+ #define MutexDirective		.MUTEX
+ #endif
+ #else /* SVR4 < 4.2.2 */
  #ifndef StandardDefines
  #define StandardDefines		-DSVR4 -Di386
  #endif
+ #endif
+ #endif
  #ifndef ToolkitStringsABIOptions
! #define ToolkitStringsABIOptions -intelabi -earlyR6bc
  #endif
  #ifndef DefaultCCOptions
! #if !HasGcc
  #define DefaultCCOptions -Xa -Dasm=__asm
+ #else
+ #ifdef UseInstalled
+ #define DefaultCCOptions /**/
+ #else
+ #define DefaultCCOptions -ansi -pedantic
+ #endif
  #endif
  #endif
  #ifndef DefaultCDebugFlags
+ #if HasGcc
  #if HasGcc2
! #define DefaultCDebugFlags DefaultGcc2i386Opt
  #else
  #define DefaultCDebugFlags -O2
  #endif
***************
*** 115,120 ****
--- 175,186 ----
  #ifndef ServerOSDefines
  #define ServerOSDefines -DDDXTIME XFree86ServerOSDefines
  #endif
+ #ifndef BuildDynamicLoading
+ #define BuildDynamicLoading NO
+ #endif
+ #if BuildDynamicLoading
+ #define ServerExtraSysLibs -ldl
+ #endif
  #endif
  
  /*
***************
*** 136,141 ****
--- 202,213 ----
  #endif
  #ifndef FileManSuffix
  #define FileManSuffix           4
+ #endif
+ 
+ #ifndef StaticLibrary
+ #if !HasGcc
+ #define StaticLibrary(libpath,libname) -B static Concat(-L,libpath) Concat(-l,libname) -B dynamic
+ #endif
  #endif
  
  #ifdef i386Architecture
*** motif.orig/config/cf/Threads.tmpl	Fri Apr 28 11:03:59 2000
--- motif/config/cf/Threads.tmpl	Sat Jun  3 18:49:34 2000
***************
*** 1,4 ****
--- 1,5 ----
  XCOMM $XConsortium: Threads.tmpl /main/11 1996/09/28 16:07:06 rws $
+ XCOMM $XFree86: xc/config/cf/Threads.tmpl,v 3.2 1996/12/23 05:50:12 dawes Exp $
  
  /*
   * For a multi-threaded application or library,
***************
*** 50,69 ****
  #define ThreadPreStdAPIDefines /* nominally for POSIX P1003.4a (Draft 4) API */
  #endif
  #ifndef CplusplusSystemMTDefines
! #define CplusplusSystemMTDefines /**/
  #endif
  #ifndef ThreadsCompileFlags
  #define ThreadsCompileFlags /**/
  #endif
  #ifndef ThreadsCplusplusCompileFlags
! #define ThreadsCplusplusCompileFlags /**/
  #endif
  
  #ifndef ThreadsLibraries
  #define ThreadsLibraries /**/
  #endif
  #ifndef ThreadsCplusplusLibraries
! #define ThreadsCplusplusLibraries /**/
  #endif
  #ifndef ThreadsLoadFlags
  #define ThreadsLoadFlags ThreadsCompileFlags
--- 51,82 ----
  #define ThreadPreStdAPIDefines /* nominally for POSIX P1003.4a (Draft 4) API */
  #endif
  #ifndef CplusplusSystemMTDefines
! # ifdef SystemMTDefines
! #  define CplusplusSystemMTDefines SystemMTDefines
! # else
! #  define CplusplusSystemMTDefines /**/
! # endif
  #endif
  #ifndef ThreadsCompileFlags
  #define ThreadsCompileFlags /**/
  #endif
  #ifndef ThreadsCplusplusCompileFlags
! # ifdef ThreadsCompileFlags
! #  define ThreadsCplusplusCompileFlags ThreadsCompileFlags
! # else
! #  define ThreadsCplusplusCompileFlags /**/
! # endif
  #endif
  
  #ifndef ThreadsLibraries
  #define ThreadsLibraries /**/
  #endif
  #ifndef ThreadsCplusplusLibraries
! # ifdef ThreadsLibraries
! #  define ThreadsCplusplusLibraries ThreadsLibraries
! # else
! #  define ThreadsCplusplusLibraries /**/
! # endif
  #endif
  #ifndef ThreadsLoadFlags
  #define ThreadsLoadFlags ThreadsCompileFlags
*** motif.orig/config/cf/usl.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/usl.cf	Sat Jun  3 18:49:35 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: usl.cf /main/51 1998/03/23 12:27:39 mgreess $
  
  #ifndef OSName
  # define OSName		DefaultOSName
--- 1,9 ----
! XCOMM platform:  $TOG: usl.cf /main/50 1997/04/17 14:11:39 barstow $
! 
! 
! 
! 
! XCOMM platform:  $XFree86: xc/config/cf/usl.cf,v 3.13.2.1 1997/05/03 09:43:10 dawes Exp $
  
  #ifndef OSName
  # define OSName		DefaultOSName
***************
*** 38,60 ****
  #else
  #define XawI18nDefines		-DHAS_WCHAR_H -DHAS_ISW_FUNCS
  #endif
! 
! #if OSMajorVersion == 2
! #  if OSMinorVersion == 0
! #    define ExtraLibraries	-lsocket -lnsl -lgen -lw
! #  else
! #    define ExtraLibraries	-lsocket -lnsl -L/usr/ccs/lib -lgen
! #  endif
! 
! #  define ThreadedX		YES
! #  define HasThreadSafeAPI	NO
!    /* UnixWare does not have MT-safe pwd routines. */
! #  define MTSafeAPIDefines	-DXUSE_MTSAFE_API -DXNO_MTSAFE_PWDAPI \
! 				-DXNO_MTSAFE_GRPAPI
! #  define SystemMTDefines	-D_REENTRANT
! #  define ThreadsLibraries	-lthread
! #  define ThreadsCplusplusLibraries	-lthread
! #  define DefaultCCOptions	-W0,-2A -Xa -Dasm=__asm
  #endif
  #define BuildLibPathVar	  LD_LIBRARY_PATH
  
--- 43,59 ----
  #else
  #define XawI18nDefines		-DHAS_WCHAR_H -DHAS_ISW_FUNCS
  #endif
! #if OSTeenyVersion > 1
! # define ExtraLibraries		-lsocket -lnsl -lgen -lw
! # define ThreadedX		YES
! # define HasThreadSafeAPI	NO
! /* UnixWare does not have MT-safe pwd routines. */
! # define MTSafeAPIDefines	\
! -DXUSE_MTSAFE_API -DXNO_MTSAFE_PWDAPI -DXNO_MTSAFE_GRPAPI
! # define SystemMTDefines	-D_REENTRANT
! # define ThreadsLibraries	-lthread
! # define ThreadsCplusplusLibraries	-lthread
! # define DefaultCCOptions	-W0,-2A -Xa -Dasm=__asm
  #endif
  #define BuildLibPathVar	  LD_LIBRARY_PATH
  
***************
*** 100,116 ****
  
  /* Remove -lc because select.o is not relocatable. */
  /* Remove -lgen (and set UseLocalRegex) because no shared library exists. */
! #if OSMajorVersion == 2
! #  if OSMinorVersion == 0
! #    define SharedXmReqs $(LDPRELIBS) SharedXReqs -lsocket -lnsl -lw
! #    define SharedMrmReqs $(LDPRELIBS) $(XMLIB) SharedXReqs -lsocket -lnsl -lw
! #    define SharedUilReqs $(LDPRELIBS) $(MRESOURCELIB) $(XMLIB) SharedXReqs -lsocket -lnsl -lw
! #  else
! #    define SharedXmReqs $(LDPRELIBS) SharedXReqs -lsocket -lnsl
! #    define SharedMrmReqs $(LDPRELIBS) $(XMLIB) SharedXReqs -lsocket -lnsl
! #    define SharedUilReqs $(LDPRELIBS) $(MRESOURCELIB) $(XMLIB) SharedXReqs -lsocket -lnsl
! #  endif
! #endif
    
  /* <X11/Xos_r.h> requires process locking for missing _r functions */
  #define TtClientLibs $(TTLIB) $(XTOOLLIB) $(XLIB)
--- 99,107 ----
  
  /* Remove -lc because select.o is not relocatable. */
  /* Remove -lgen (and set UseLocalRegex) because no shared library exists. */
! #define SharedXmReqs $(LDPRELIBS) SharedXReqs -lsocket -lnsl -lw
! #define SharedMrmReqs $(LDPRELIBS) $(XMLIB) SharedXReqs -lsocket -lnsl -lw
! #define SharedUilReqs $(LDPRELIBS) $(MRESOURCELIB) $(XMLIB) SharedXReqs -lsocket -lnsl -lw
    
  /* <X11/Xos_r.h> requires process locking for missing _r functions */
  #define TtClientLibs $(TTLIB) $(XTOOLLIB) $(XLIB)
*** motif.orig/config/cf/Win32.cf	Fri Apr 28 11:03:59 2000
--- motif/config/cf/Win32.cf	Sat Jun  3 18:49:34 2000
***************
*** 1,18 ****
! XCOMM platform:  $TOG: Win32.cf /main/57 1997/12/04 11:03:33 kaleb $
  
  #ifndef OSName
! #define OSName DefaultOSName
  #endif
  #ifndef OSMajorVersion
! #define OSMajorVersion	DefaultOSMajorVersion	
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion	DefaultOSMinorVersion
  #endif
  #ifndef OSTeenyVersion
! #define OSTeenyVersion	DefaultOSTeenyVersion
  #endif
- XCOMM operating system:  OSName OSMajorVersion./**/OSMinorVersion
  
  #ifndef CompilerMajorVersion
  /* 0 == NT 3.1 Win32 SDK, 2 == MSVC++ 2, 4 == MSVC 4 */
--- 1,18 ----
! XCOMM platform:  $XConsortium: Win32.cf /main/51 1996/12/19 14:20:08 lehors $
  
  #ifndef OSName
! #define OSName			Microsoft Windows NT 4.0
  #endif
+ XCOMM operating system:  OSName
  #ifndef OSMajorVersion
! #define OSMajorVersion		4
  #endif
  #ifndef OSMinorVersion
! #define OSMinorVersion		0
  #endif
  #ifndef OSTeenyVersion
! #define OSTeenyVersion		0
  #endif
  
  #ifndef CompilerMajorVersion
  /* 0 == NT 3.1 Win32 SDK, 2 == MSVC++ 2, 4 == MSVC 4 */
***************
*** 42,54 ****
  #define MvCmd ren
  #define RmCmd del
  #ifndef RmTreeCmd
! XCOMM choices here include:
! XCOMM   o `del /q /s` and live with pressing the "any" key
! XCOMM   o `deltree, copied from MS-DOS 5
! XCOMM   o `rm -rfx` from the SDK Subscription (MSTOOLS in your Path)
! XCOMM   o `rm -rf` from the GNU file utilities
! XCOMM We're using the GNU file utilities
! #define RmTreeCmd rm -rf
  #endif
  #define CcCmd cl
  #define HasCplusplus		YES
--- 42,49 ----
  #define MvCmd ren
  #define RmCmd del
  #ifndef RmTreeCmd
! /*#define RmTreeCmd del /q /s */
! #define RmTreeCmd rm -rfx
  #endif
  #define CcCmd cl
  #define HasCplusplus		YES
***************
*** 69,75 ****
  #endif
  #define ArCmd ArCmdBase
  #define CplusplusCmd cl
! #define MkdirHierCmd $(CONFIGSRC:/=\)\util\mkdirhier
  #define InstallCmd copy
  #define InstPgmFlags /**/
  #define InstBinFlags /**/
--- 64,70 ----
  #endif
  #define ArCmd ArCmdBase
  #define CplusplusCmd cl
! #define MkdirHierCmd mkdir
  #define InstallCmd copy
  #define InstPgmFlags /**/
  #define InstBinFlags /**/
*** motif.orig/config/cf/Win32.rules	Fri Apr 28 11:03:59 2000
--- motif/config/cf/Win32.rules	Sat Jun  3 18:49:34 2000
***************
*** 1,4 ****
! XCOMM platform:  $TOG: Win32.rules /main/51 1997/12/02 14:48:29 kaleb $
  
  #define HasSharedLibraries YES
  #define NeedLibInsideFlag YES
--- 1,4 ----
! XCOMM platform:  $XConsortium: Win32.rules /main/49 1996/12/02 14:12:47 kaleb $
  
  #define HasSharedLibraries YES
  #define NeedLibInsideFlag YES
***************
*** 414,420 ****
  #define	InstallSharedLibraryData(libname,rev,dest)
  
  #define MakeDLL(libname,solist) $(LD) @<<				@@\
! $(SHLIBLDFLAGS) -out:libname.dll libname.exp solist			@@\
  <<
  
  #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
--- 414,420 ----
  #define	InstallSharedLibraryData(libname,rev,dest)
  
  #define MakeDLL(libname,solist) $(LD) @<<				@@\
! SharedLibraryLoadFlags -out:libname.dll libname.exp solist		@@\
  <<
  
  #define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
***************
*** 428,433 ****
--- 428,436 ----
  	RemoveFile($@)							@@\
  	MakeLibrary($@,-def:libname.def $(XVARuse0:.o=.obj))		@@\
  	LinkBuildLibrary($@)						@@\
+ 	RemoveFile(libname.dll)						@@\
+ 	MakeDLL(libname,$(XVARuse0:.o=.obj) $(REQUIREDLIBS) $(EXTRA_LIBRARIES)) @@\
+ 	LinkBuildDLL(libname.dll)					@@\
  									@@\
  libname.dll: LibraryTargetName(libname) $(EXTRALIBRARYDEPS)		@@\
  	RemoveFile(libname.dll)						@@\
*** motif.orig/config/cf/X11.rules	Fri Apr 28 11:03:59 2000
--- motif/config/cf/X11.rules	Sat Jun  3 18:49:34 2000
***************
*** 1,4 ****
--- 1,10 ----
  XCOMM $TOG: X11.rules /main/4 1997/04/30 15:23:24 kaleb $
+ XCOMM
+ XCOMM
+ XCOMM
+ XCOMM $XFree86: xc/config/cf/X11.rules,v 1.1.1.1.2.4 1999/04/21 07:20:58 hohndel Exp $
+ 
+ 
  
  /* Note whether we are the top level project. */
  #ifndef SeenTopLevelProject
***************
*** 69,75 ****
  #elif !UseInstalledX11
  # define TopXInclude	-I$(TOP)/exports/include
  #else
! # define TopXInclude	-I$(XPROJECTROOT)/include
  #endif
  #ifdef TopIncludes
  # undef TopIncludes
--- 75,85 ----
  #elif !UseInstalledX11
  # define TopXInclude	-I$(TOP)/exports/include
  #else
! # ifdef X11ProjectRoot
! #  define TopXInclude	-I$(XPROJECTROOT)/include
! # else
! #  define TopXInclude	/**/
! # endif
  #endif
  #ifdef TopIncludes
  # undef TopIncludes
*** motif.orig/config/cf/X11.tmpl	Fri Apr 28 11:03:59 2000
--- motif/config/cf/X11.tmpl	Sat Jun  3 18:49:34 2000
***************
*** 1,6 ****
  XCOMM ----------------------------------------------------------------------
  XCOMM X Window System Build Parameters and Rules
! XCOMM $TOG: X11.tmpl /main/308 1998/06/16 15:14:24 msr $
  
  /***************************************************************************
   *                                                                         *
--- 1,11 ----
  XCOMM ----------------------------------------------------------------------
  XCOMM X Window System Build Parameters and Rules
! XCOMM $TOG: X11.tmpl /main/292 1997/05/20 10:05:59 kaleb $
! XCOMM
! XCOMM
! XCOMM
! XCOMM
! XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.8.2.9 1998/12/30 10:04:09 dawes Exp $
  
  /***************************************************************************
   *                                                                         *
***************
*** 11,17 ****
   *                                                                         *
   **************************************************************************/
  
! #define ProjectX		604	/* do *not* change this line */
  
  /* The following project-specific rules are defined at the end of this file:
   *
--- 16,22 ----
   *                                                                         *
   **************************************************************************/
  
! #define ProjectX		603	/* do *not* change this line */
  
  /* The following project-specific rules are defined at the end of this file:
   *
***************
*** 41,52 ****
--- 46,78 ----
  #ifndef BuildServer
  #define BuildServer		HasXServer
  #endif
+ #ifndef BuildServersOnly
+ #define BuildServersOnly	NO
+ #endif
  #ifndef BuildFontServer
  #define BuildFontServer		YES
  #endif
  #ifndef BuildFonts
  #define BuildFonts		(BuildServer | BuildFontServer)
  #endif
+ #ifndef Build75DpiFonts
+ #define Build75DpiFonts		YES
+ #endif
+ #ifndef Build100DpiFonts
+ #define Build100DpiFonts	YES
+ #endif
+ #ifndef BuildSpeedoFonts
+ #define BuildSpeedoFonts	YES
+ #endif
+ #ifndef BuildType1Fonts
+ #define BuildType1Fonts		YES
+ #endif
+ #ifndef BuildCyrillicFonts
+ #define BuildCyrillicFonts	NO
+ #endif
+ #ifndef UseKoi8RForCyrillic
+ #define UseKoi8RForCyrillic	NO
+ #endif
  #ifndef HasXAudio
  #define HasXAudio		NO
  #endif
***************
*** 59,64 ****
--- 85,108 ----
  #ifndef BuildXAServer
  #define BuildXAServer		(HasXAServer & HasCplusplus)
  #endif
+ #ifndef BuildMITMiscExt
+ #define BuildMITMiscExt		YES
+ #endif
+ #ifndef BuildTestExt
+ #define BuildTestExt		YES
+ #endif
+ #ifndef BuildSyncExt
+ #define BuildSyncExt		YES
+ #endif
+ #ifndef BuildXCMiscExt
+ #define BuildXCMiscExt		YES
+ #endif
+ #ifndef BuildShapeExt
+ #define BuildShapeExt		YES
+ #endif
+ #ifndef BuildBigReqsExt
+ #define BuildBigReqsExt		YES
+ #endif
  #ifndef BuildPhigs
  #define BuildPhigs		NO
  #endif
***************
*** 68,107 ****
  #ifndef BuildXInputExt
  #define BuildXInputExt		NO
  #endif
- #ifndef BuildEVI
- #define BuildEVI		YES
- #endif
- #ifndef BuildDBE
- #define BuildDBE		YES
- #endif
  #ifndef BuildDIS
  #define BuildDIS		NO
  #endif
- #ifndef BuildDPMS
- #define BuildDPMS		YES
- #endif
- #ifndef BuildLowMem
- #define BuildLowMem		NO
- #endif
- #ifndef BuildLBX
- #define BuildLBX		YES
- #endif
  #ifndef BuildXIE
- 	/*
- 	 * Turn off building XIE if you are building for low memory
- 	 * footprint
- 	 */
- #if BuildLowMem
- #define BuildXIE		NO
- #else
  #define BuildXIE		YES
  #endif
  #endif
  #ifndef BuildXKB
  #define BuildXKB		YES
  #endif
  #ifndef BuildXKBlib
! #define BuildXKBlib		YES
  #endif
  	/*
  	 * WARNING: Setting UseXKBInClients to YES cause incompatibilities
--- 112,134 ----
  #ifndef BuildXInputExt
  #define BuildXInputExt		NO
  #endif
  #ifndef BuildDIS
  #define BuildDIS		NO
  #endif
  #ifndef BuildXIE
  #define BuildXIE		YES
  #endif
+ #ifndef BuildXIElib
+ #define BuildXIElib		BuildXIE
  #endif
  #ifndef BuildXKB
  #define BuildXKB		YES
  #endif
  #ifndef BuildXKBlib
! #define BuildXKBlib		BuildXKB
! #endif
! #ifndef BuildXKBuilib
! #define BuildXKBuilib		BuildXKB
  #endif
  	/*
  	 * WARNING: Setting UseXKBInClients to YES cause incompatibilities
***************
*** 111,124 ****
  #ifndef UseXKBInClients
  #define	UseXKBInClients		NO	/* use XKB in "normal" clients? */
  #endif
  #ifndef BuildMultibuffer
  #define BuildMultibuffer	NO
  #endif
  #ifndef BuildRECORD
  #define BuildRECORD		YES
  #endif
! #ifndef BuildXinerama
! #define BuildXinerama		NO
  #endif
  #ifndef BuildXCSecurity
  #define BuildXCSecurity		YES
--- 138,160 ----
  #ifndef UseXKBInClients
  #define	UseXKBInClients		NO	/* use XKB in "normal" clients? */
  #endif
+ #ifndef BuildDBE
+ #define BuildDBE		YES
+ #endif
+ #ifndef BuildDBElib
+ #define BuildDBElib		BuildDBE
+ #endif
  #ifndef BuildMultibuffer
  #define BuildMultibuffer	NO
  #endif
  #ifndef BuildRECORD
  #define BuildRECORD		YES
  #endif
! #ifndef BuildRECORDlib
! #define BuildRECORDlib		BuildRECORD
! #endif
! #ifndef BuildLBX
! #define BuildLBX		YES
  #endif
  #ifndef BuildXCSecurity
  #define BuildXCSecurity		YES
***************
*** 126,141 ****
  #ifndef BuildAppgroup
  #define BuildAppgroup		YES
  #endif
- #ifndef BuildCup
- #define BuildCup		YES
- #endif
- 	/*
- 	 * Turn off building PEX if you are building for low memory
- 	 * footprint
- 	 */
- #if BuildLowMem
- #define BuildPexExt		NO
- #endif
  #ifndef HasPlugin
  #define HasPlugin		NO
  #endif
--- 162,167 ----
***************
*** 152,157 ****
--- 178,224 ----
  #define BuildXprint		NO
  #endif
  #endif
+ #ifndef BuildScreenSaverExt
+ #define BuildScreenSaverExt	NO
+ #endif
+ #ifndef BuildScreenSaverLibrary
+ #define BuildScreenSaverLibrary	BuildScreenSaverExt
+ #endif
+ #ifndef BuildXF86VidModeExt
+ #define BuildXF86VidModeExt	NO
+ #endif
+ #ifndef BuildXF86VidModeLibrary
+ #define BuildXF86VidModeLibrary BuildXF86VidModeExt
+ #endif
+ #ifndef BuildXF86MiscExt
+ #define BuildXF86MiscExt	NO
+ #endif
+ #ifndef BuildXF86MiscLibrary
+ #define BuildXF86MiscLibrary	BuildXF86MiscExt
+ #endif
+ #ifndef BuildXF86DGA
+ #define BuildXF86DGA		NO
+ #endif
+ #ifndef BuildXF86DGALibrary
+ #define BuildXF86DGALibrary	BuildXF86DGA
+ #endif
+ #ifndef BuildDPMSExt
+ #define BuildDPMSExt		NO
+ #endif
+ #ifndef BuildDPMSLibrary
+ #define BuildDPMSLibrary	BuildDPMSExt
+ #endif
+ 
+ #ifndef BuildMiscDocs
+ #define BuildMiscDocs		NO
+ #endif
+ #ifndef BuildSpecsDocs
+ #define BuildSpecsDocs		NO
+ #endif
+ #ifndef BuildAllSpecsDocs
+ #define BuildAllSpecsDocs	NO
+ #endif
+ 
  #ifndef InstallLibManPages
  #define InstallLibManPages	YES
  #endif
***************
*** 177,182 ****
--- 244,252 ----
  #ifndef InstallAppDefFiles
  #define InstallAppDefFiles	YES	/* install application defaults */
  #endif
+ #ifndef CompressAllFonts
+ #define CompressAllFonts	NO
+ #endif
  #ifndef ThreadedX
  #if HasPosixThreads || HasCThreads
  #define ThreadedX		YES	/* multi-threaded libraries */
***************
*** 197,239 ****
  #define PrimaryScreenResolution 72		/* a common resolution */
  #endif
  #ifndef DefaultFontPath
- 	/*
- 	 * Turn off building Speedo and Type1 fonts if you are building for
- 	 * low memory footprint
- 	 */
- #if BuildLowMem
- #define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
- #else
  #if PrimaryScreenResolution < 88		/* (75 + 100) / 2 */
  #define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
  #else
  #define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
  #endif
  #endif
- #endif
- #ifndef DefaultFSFontPath
- 	/*
- 	 * Define a default fontpath for Font Server independent of that
-          * for X server if building the X server for low memory footprint
-          */
- #if BuildLowMem
- #if PrimaryScreenResolution < 88                /* (75 + 100) / 2 */
- #define DefaultFSFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,
- $(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
- #else
- #define DefaultFSFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,
- $(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
- #endif
- #else
- #define DefaultFSFontPath DefaultFontPath
- #endif
- #endif
  #ifndef DefaultRGBDatabase
  #define DefaultRGBDatabase $(LIBDIR)/rgb
  #endif
  #ifndef UseRgbTxt
  #define UseRgbTxt		NO	/* default is to compile with dbm */
  #endif
  #ifndef FontCompilerFlags
  #define FontCompilerFlags -t
  #endif
--- 267,293 ----
  #define PrimaryScreenResolution 72		/* a common resolution */
  #endif
  #ifndef DefaultFontPath
  #if PrimaryScreenResolution < 88		/* (75 + 100) / 2 */
  #define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/75dpi/,$(FONTDIR)/100dpi/
  #else
  #define DefaultFontPath $(FONTDIR)/misc/,$(FONTDIR)/Speedo/,$(FONTDIR)/Type1/,$(FONTDIR)/100dpi/,$(FONTDIR)/75dpi/
  #endif
  #endif
  #ifndef DefaultRGBDatabase
  #define DefaultRGBDatabase $(LIBDIR)/rgb
  #endif
  #ifndef UseRgbTxt
  #define UseRgbTxt		NO	/* default is to compile with dbm */
  #endif
+ #ifndef UseMemLeak
+ #define UseMemLeak		NO
+ #endif
+ #ifndef SpecialMalloc
+ #define SpecialMalloc		NO
+ #endif
+ #ifndef UseInternalMalloc
+ #define UseInternalMalloc	NO
+ #endif
  #ifndef FontCompilerFlags
  #define FontCompilerFlags -t
  #endif
***************
*** 248,253 ****
--- 302,315 ----
  #endif
  #endif
  #endif
+ #ifndef ExtraConnectionDefs
+ #if HasStickyDirBit
+ #define ExtraConnectionDefs -DHAS_STICKY_DIR_BIT
+ #else
+ #define ExtraConnectionDefs /**/
+ #endif
+ #endif
+ CONNECTION_FLAGS = ConnectionFlags ExtraConnectionDefs
  #ifndef ProjectThreadsDefines
  #define ProjectThreadsDefines -DXTHREADS
  #endif
***************
*** 275,281 ****
--- 337,379 ----
  #ifndef ExtensionOSDefines
  #define ExtensionOSDefines /**/
  #endif
+ 
  #ifndef ExtensionDefines
+ #ifndef MITMiscDefines
+ #if BuildMITMiscExt
+ #define MITMiscDefines -DMITMISC
+ #else
+ #define MITMiscDefines /**/
+ #endif
+ #endif
+ #ifndef XTestDefines
+ #if BuildTestExt
+ #define XTestDefines -DXTEST
+ #else
+ #define XTestDefines /**/
+ #endif
+ #endif
+ #ifndef XSyncDefines
+ #if BuildSyncExt
+ #define XSyncDefines -DXSYNC
+ #else
+ #define XSyncDefines /**/
+ #endif
+ #endif
+ #ifndef XCMiscDefines
+ #if BuildXCMiscExt
+ #define XCMiscDefines -DXCMISC
+ #else
+ #define XCMiscDefines /**/
+ #endif
+ #endif
+ #ifndef ShapeDefines
+ #if BuildShapeExt
+ #define ShapeDefines -DSHAPE
+ #else
+ #define ShapeDefines /**/
+ #endif
+ #endif
  #ifndef PexDefines
  #if BuildPexExt
  #define PexDefines -DPEXEXT
***************
*** 283,288 ****
--- 381,393 ----
  #define PexDefines /**/
  #endif
  #endif
+ #ifndef GlxDefines
+ #if BuildGlxExt
+ #define GlxDefines -DGLXEXT
+ #else
+ #define GlxDefines /**/
+ #endif
+ #endif
  #ifndef ShmDefines
  #if HasShm
  #define ShmDefines -DMITSHM
***************
*** 297,309 ****
  #define XInputDefines /**/
  #endif
  #endif
- #ifndef XineramaDefines
- #if BuildXinerama
- #define XineramaDefines -DPANORAMIX
- #else
- #define XineramaDefines /**/
- #endif
- #endif
  #ifndef XieDefines
  #if BuildXIE
  #define XieDefines -DXIE
--- 402,407 ----
***************
*** 350,363 ****
  #endif
  #endif
  #ifndef BigReqDefines
  #define BigReqDefines -DBIGREQS
- #endif
- 
- #ifndef EVIDefines
- #if BuildEVI
- #define EVIDefines -DEVI
  #else
! #define EVIDefines /**/
  #endif
  #endif
  
--- 448,457 ----
  #endif
  #endif
  #ifndef BigReqDefines
+ #if BuildBigReqsExt
  #define BigReqDefines -DBIGREQS
  #else
! #define BigReqDefines /**/
  #endif
  #endif
  
***************
*** 381,389 ****
--- 475,509 ----
  #endif
  #endif
  
+ #ifndef ScreenSaverExtensionDefines
+ #if BuildScreenSaverExt
+ #define ScreenSaverExtensionDefines -DSCREENSAVER
+ #else
+ #define ScreenSaverExtensionDefines /**/
+ #endif
+ #endif
  #ifndef VidTuneExtensionDefines
+ #if BuildXF86VidModeExt
+ #define VidTuneExtensionDefines -DXF86VIDMODE
+ #else
  #define VidTuneExtensionDefines /**/
  #endif
+ #endif
+ #ifndef XF86MiscExtensionDefines
+ #if BuildXF86MiscExt
+ #define XF86MiscExtensionDefines -DXF86MISC
+ #else
+ #define XF86MiscExtensionDefines /**/
+ #endif
+ #endif
+ 
+ #ifndef DPMSExtensionDefines
+ #if BuildDPMSExt
+ #define DPMSExtensionDefines -DDPMSExtension
+ #else
+ #define DPMSExtensionDefines /**/
+ #endif
+ #endif
  
  #ifndef RECORDDefines
  #if BuildRECORD
***************
*** 409,455 ****
  #endif
  #endif
  
- #ifndef CupDefines
- #if BuildCup
- #define CupDefines -DTOGCUP
- #else
- #define CupDefines /**/
- #endif
- #endif
- 
- #ifndef LowMemDefines
- #if BuildLowMem
- #define LowMemDefines -DLOWMEMFTPT
- #else
- #define LowMemDefines /**/
- #endif
- #endif
- 
- #ifndef DPMSDefines
- #if BuildDPMS
- #define DPMSDefines -DDPMSExtension
- #else
- #define DPMSDefines /**/
- #endif
- #endif
- 
  #ifndef SitePervasiveExtensionDefines
  #define SitePervasiveExtensionDefines /**/
  #endif
  #ifndef PervasiveExtensionDefines
! #define PervasiveExtensionDefines \
! 	-DSHAPE XInputDefines XkbDefines LbxDefines AppgroupDefines \
! 	XCSecurityDefines CupDefines PervasiveDBEDefines DPMSDefines \
! 	LowMemDefines XprintDefines XineramaDefines SitePervasiveExtensionDefines
  #endif
  #ifndef SiteExtensionDefines
  #define SiteExtensionDefines /**/
  #endif
  #ifndef BaseExtensionDefines
! #define BaseExtensionDefines \
! 	MultibufferDefines -DMITMISC -DXTEST -DXSYNC -DXCMISC RECORDDefines \
! 	PexDefines ShmDefines XieDefines BigReqDefines VidTuneExtensionDefines \
! 	DBEDefines DPMSDefines EVIDefines SiteExtensionDefines
  #endif
  #define ExtensionDefines BaseExtensionDefines ExtensionOSDefines
  #endif /* ExtensionDefines */
--- 529,554 ----
  #endif
  #endif
  
  #ifndef SitePervasiveExtensionDefines
  #define SitePervasiveExtensionDefines /**/
  #endif
  #ifndef PervasiveExtensionDefines
! #define PervasiveExtensionDefines ShapeDefines XInputDefines XkbDefines \
! 				  LbxDefines AppgroupDefines \
! 				  XCSecurityDefines PervasiveDBEDefines \
! 				  DPMSExtensionDefines \
! 				  XprintDefines SitePervasiveExtensionDefines
  #endif
  #ifndef SiteExtensionDefines
  #define SiteExtensionDefines /**/
  #endif
  #ifndef BaseExtensionDefines
! #define BaseExtensionDefines MultibufferDefines MITMiscDefines XTestDefines \
! 			     XSyncDefines XCMiscDefines RECORDDefines \
! 			     PexDefines GlxDefines ShmDefines XieDefines BigReqDefines \
! 			     VidTuneExtensionDefines XF86MiscExtensionDefines \
! 			     DBEDefines ScreenSaverExtensionDefines \
! 			     SiteExtensionDefines
  #endif
  #define ExtensionDefines BaseExtensionDefines ExtensionOSDefines
  #endif /* ExtensionDefines */
***************
*** 584,589 ****
--- 683,697 ----
  #ifndef ConfigDir
  #define ConfigDir $(LIBDIR)/config
  #endif
+ #ifndef DocDir
+ #define DocDir $(LIBDIR)/doc
+ #endif
+ #ifndef DocHtmlDir
+ #define DocHtmlDir $(DOCDIR)/html
+ #endif
+ #ifndef DocPsDir
+ #define DocPsDir $(DOCDIR)/PostScript
+ #endif
  #ifndef FontDir
  #define FontDir $(LIBDIR)/fonts
  #endif
***************
*** 596,601 ****
--- 704,715 ----
  #ifndef XdmDir
  #define XdmDir $(LIBDIR)/xdm
  #endif
+ #ifndef XdmVarDir
+ #define XdmVarDir $(VARLIBDIR)/xdm
+ #endif
+ #ifndef XdmAuthDir
+ #define XdmAuthDir $(LIBDIR)/xdm
+ #endif
  #ifndef XdmConfigurationSubdirectory		/* under xdm sources */
  #define XdmConfigurationSubdirectory config
  #endif
***************
*** 623,634 ****
  #ifndef ProxyManagerDir
  #define ProxyManagerDir $(LIBDIR)/proxymngr
  #endif
  #ifndef ServerConfigDir
  #define ServerConfigDir $(LIBDIR)/xserver
  #endif
- #ifndef XPrintDir
- #define XPrintDir ServerConfigDir
- #endif
  #ifndef VarDirectory
  #define VarDirectory /var/X11
  #endif
--- 737,748 ----
  #ifndef ProxyManagerDir
  #define ProxyManagerDir $(LIBDIR)/proxymngr
  #endif
+ #ifndef XPrintDir
+ #define XPrintDir $(LIBDIR)
+ #endif
  #ifndef ServerConfigDir
  #define ServerConfigDir $(LIBDIR)/xserver
  #endif
  #ifndef VarDirectory
  #define VarDirectory /var/X11
  #endif
***************
*** 685,696 ****
  #define ForceNormalLib (HasGcc && !HasGcc2)
  #endif
  
! #ifndef ResourceConfigurationManagement 
! #define ResourceConfigurationManagement YES
! #endif
! 
! #ifndef XtPopdownConformance 
! #define XtPopdownConformance YES
  #endif
  
  XCOMM -----------------------------------------------------------------------
--- 799,806 ----
  #define ForceNormalLib (HasGcc && !HasGcc2)
  #endif
  
! #ifndef XkbComp
! #define XkbComp xkbcomp
  #endif
  
  XCOMM -----------------------------------------------------------------------
***************
*** 721,729 ****
--- 831,844 ----
  #ifdef VarDirectory
             VARDIR = VarDirectory
  #endif
+ 
+            DOCDIR = DocDir
+        DOCHTMLDIR = DocHtmlDir
+          DOCPSDIR = DocPsDir
            FONTDIR = FontDir		/* font directories */
           XINITDIR = XinitDir		/* xinit config files */
             XDMDIR = XdmDir		/* xdm config files */
+         XDMVARDIR = XdmVarDir		/* xdm config files */
             TWMDIR = TwmDir		/* twm config files */
             XSMDIR = XsmDir		/* xsm config files */
             NLSDIR = NlsDir		/* nls files */
***************
*** 738,746 ****
       INSTAPPFLAGS = $(INSTDATFLAGS)	/* XXX - this should go away - XXX */
  
  #if UseInstalledX11
!               RGB = $(BINDIR)/rgb
!             FONTC = $(BINDIR)/bdftopcf
!         MKFONTDIR = $(BINDIR)/mkfontdir
  #else
                RGB = $(CLIENTENVSETUP) $(XBUILDBINDIR)/rgb
              FONTC = $(CLIENTENVSETUP) $(XBUILDBINDIR)/bdftopcf
--- 853,861 ----
       INSTAPPFLAGS = $(INSTDATFLAGS)	/* XXX - this should go away - XXX */
  
  #if UseInstalledX11
!               RGB = rgb			/* assume BINDIR in path */
!             FONTC = bdftopcf		/* assume BINDIR in path */
!         MKFONTDIR = mkfontdir		/* assume BINDIR in path */
  #else
                RGB = $(CLIENTENVSETUP) $(XBUILDBINDIR)/rgb
              FONTC = $(CLIENTENVSETUP) $(XBUILDBINDIR)/bdftopcf
***************
*** 748,753 ****
--- 863,870 ----
  #endif
  
         DOCUTILSRC = $(XTOP)/doc/util
+         CLIENTSRC = $(TOP)/clients
+           DEMOSRC = $(TOP)/demos
         XDOCMACROS = $(DOCUTILSRC)/macros.t
         XIDXMACROS = $(DOCUTILSRC)/indexmacros.t
         PROGRAMSRC = $(TOP)/programs
***************
*** 770,775 ****
--- 887,899 ----
  #ifdef X11ProjectRoot
       XPROJECTROOT = X11ProjectRoot
  #endif
+ #if HasSharedLibraries
+ #ifndef DontUseLibPathVar
+ #ifndef BuildLibPathVar
+ #define BuildLibPathVar LD_LIBRARY_PATH
+ #endif
+ #endif
+ #endif
  #ifdef BuildLibPathVar
  # ifdef SystemBuildLibPath
    SYSTEMENVLIBDIR = SystemBuildLibPath
***************
*** 814,819 ****
--- 938,1042 ----
  #endif
           XLIBONLY = $(XONLYLIB)
  
+ #if BuildThreadStubLibrary
+ #ifndef SharedLibXThrStub
+ #define SharedLibXThrStub YES
+ #endif
+ #ifndef NormalLibXThrStub
+ #define NormalLibXThrStub NO
+ #endif
+ #ifndef DebugLibXThrStub
+ #define DebugLibXThrStub NO
+ #endif
+ #ifndef ProfileLibXThrStub
+ #define ProfileLibXThrStub NO
+ #endif
+    XTHRSTUBLIBSRC = $(LIBSRC)/XThrStub
+ #if SharedLibXThrStub
+ #ifndef SharedXThrStubRev
+ #define SharedXThrStubRev 6.0
+ #endif
+ SharedLibReferences(XTHRSTUB,XThrStub,$(XTHRSTUBLIBSRC),SOXTHRSTUBREV,SharedXThrStubRev)
+ #else
+ ProjectUnsharedLibReferences(XTHRSTUB,XThrStub,$(XTHRSTUBSRC),XBuildLibDir)
+ #endif
+ #endif
+ 
+ #if BuildScreenSaverLibrary
+ #ifndef SharedLibXss
+ #define SharedLibXss	NO
+ #endif
+ #ifndef NormalLibXss
+ #define NormalLibXss	YES
+ #endif
+ #ifndef DebugLibXss
+ #define DebugLibXss	NO
+ #endif
+ #ifndef ProfileLibXss
+ #define ProfileLibXss	NO
+ #endif
+ #endif
+ 
+ #if BuildXF86MiscLibrary
+ #ifndef SharedLibXxf86misc
+ #define SharedLibXxf86misc	NO
+ #endif
+ #ifndef NormalLibXxf86misc
+ #define NormalLibXxf86misc	YES
+ #endif
+ #ifndef DebugLibXxf86misc
+ #define DebugLibXxf86misc	NO
+ #endif
+ #ifndef ProfileLibXxf86misc
+ #define ProfileLibXxf86misc	NO
+ #endif
+ #endif
+ 
+ #if BuildXF86VidModeLibrary
+ #ifndef SharedLibXxf86vm
+ #define SharedLibXxf86vm	NO
+ #endif
+ #ifndef NormalLibXxf86vm
+ #define NormalLibXxf86vm	YES
+ #endif
+ #ifndef DebugLibXxf86vm
+ #define DebugLibXxf86vm		NO
+ #endif
+ #ifndef ProfileLibXxf86vm
+ #define ProfileLibXxf86vm	NO
+ #endif
+ #endif
+ 
+ #if BuildXF86DGALibrary
+ #ifndef SharedLibXxf86dga
+ #define SharedLibXxf86dga	NO
+ #endif
+ #ifndef NormalLibXxf86dga
+ #define NormalLibXxf86dga	YES
+ #endif
+ #ifndef DebugLibXxf86dga
+ #define DebugLibXxf86dga	NO
+ #endif
+ #ifndef ProfileLibXxf86dga
+ #define ProfileLibXxf86dga	NO
+ #endif
+ #endif
+ 
+ #if BuildDPMSLibrary
+ #ifndef SharedLibXdpms
+ #define SharedLibXdpms		NO
+ #endif
+ #ifndef NormalLibXdpms
+ #define NormalLibXdpms		YES
+ #endif
+ #ifndef DebugLibXdpms
+ #define DebugLibXdpms		NO
+ #endif
+ #ifndef ProfileLibXdpms
+ #define ProfileLibXdpms		NO
+ #endif
+ #endif
+ 
  #ifndef SharedLibXext
  #define SharedLibXext HasSharedLibraries
  #endif
***************
*** 829,835 ****
        XEXTLIBSRC = $(LIBSRC)/Xext
  #if SharedLibXext
  #ifndef SharedXextRev
! #define SharedXextRev 6.4
  #endif
  SharedLibReferences(EXTENSION,Xext,$(XEXTLIBSRC),SOXEXTREV,SharedXextRev)
  #else
--- 1052,1058 ----
        XEXTLIBSRC = $(LIBSRC)/Xext
  #if SharedLibXext
  #ifndef SharedXextRev
! #define SharedXextRev 6.3
  #endif
  SharedLibReferences(EXTENSION,Xext,$(XEXTLIBSRC),SOXEXTREV,SharedXextRev)
  #else
***************
*** 840,845 ****
--- 1063,1128 ----
               XLIB = $(EXTENSIONLIB) $(XONLYLIB)
           LINTXLIB = $(LINTXONLYLIB)
  
+ #if BuildScreenSaverLibrary
+     XSSLIBSRC = $(LIBSRC)/Xss
+ #if SharedLibXss
+ #ifndef SharedXssRev
+ #define SharedXssRev 1.0
+ #endif
+ SharedLibReferences(XSS,Xss,$(XSSLIBSRC),SOXSSREV,SharedXssRev)
+ #else
+ ProjectUnsharedLibReferences(XSS,Xss,$(XSSLIBSRC),XBuildLibDir)
+ #endif
+ #endif
+ 
+ #if BuildXF86MiscLibrary
+     XXF86MISCLIBSRC = $(LIBSRC)/Xxf86misc
+ #if SharedLibXxf86misc
+ #ifndef SharedXxf86miscRev
+ #define SharedXxf86miscRev 1.0
+ #endif
+ SharedLibReferences(XXF86MISC,Xxf86misc,$(XXF86MISCLIBSRC),SOXXF86MISCREV,SharedXxf86miscRev)
+ #else
+ ProjectUnsharedLibReferences(XXF86MISC,Xxf86misc,$(XXF86MISCLIBSRC),XBuildLibDir)
+ #endif
+ #endif
+ 
+ #if BuildXF86VidModeLibrary
+     XXF86VMLIBSRC = $(LIBSRC)/Xxf86vm
+ #if SharedLibXxf86vm
+ #ifndef SharedXxf86vmRev
+ #define SharedXxf86vmRev 1.0
+ #endif
+ SharedLibReferences(XXF86VM,Xxf86vm,$(XXF86VMLIBSRC),SOXXF86VMREV,SharedXxf86vmRev)
+ #else
+ ProjectUnsharedLibReferences(XXF86VM,Xxf86vm,$(XXF86VMLIBSRC),XBuildLibDir)
+ #endif
+ #endif
+ 
+ #if BuildXF86DGALibrary
+     XXF86DGALIBSRC = $(LIBSRC)/Xxf86dga
+ #if SharedLibXxf86dga
+ #ifndef SharedXxf86dgaRev
+ #define SharedXxf86dgaRev 1.0
+ #endif
+ SharedLibReferences(XXF86DGA,Xxf86dga,$(XXF86DGALIBSRC),SOXXF86DGAREV,SharedXxf86dgaRev)
+ #else
+ ProjectUnsharedLibReferences(XXF86DGA,Xxf86dga,$(XXF86DGALIBSRC),XBuildLibDir)
+ #endif
+ #endif
+ 
+ #if BuildDPMSLibrary
+     XDPMSLIBSRC = $(LIBSRC)/Xdpms
+ #if SharedLibXdpms
+ #ifndef SharedXdpmsRev
+ #define SharedXdpmsRev 1.0
+ #endif
+ SharedLibReferences(XDPMS,Xdpms,$(XDPMSLIBSRC),SOXDPMSREV,SharedXdpmsRev)
+ #else
+ ProjectUnsharedLibReferences(XDPMS,Xdpms,$(XDPMSLIBSRC),XBuildLibDir)
+ #endif
+ #endif
+ 
  #ifndef SharedLibXau
  #define SharedLibXau NO		/* don't need shared form */
  #endif
***************
*** 1217,1222 ****
--- 1500,1519 ----
           FONTLIBSRC = $(LIBSRC)/font
  ProjectUnsharedLibReferences(FONT,font,$(FONTLIBSRC),XBuildLibDir)
  
+           XPMLIBSRC = $(LIBSRC)/Xpm
+ #if SharedLibXpm
+ #ifndef SharedXpmRev
+ #define SharedXpmRev 4.8
+ #endif
+ SharedLibReferences(XPM,Xpm,$(XPMLIBSRC),SOXPMREV,SharedXpmRev)
+ #else
+ ProjectUnsharedLibReferences(XPM,Xpm,$(XPMLIBSRC),XBuildLibDir)
+ #endif
+ 
+ #ifndef LdLibraryPath
+ #define LdLibraryPath LD_LIBRARY_PATH
+ #endif
+ 
  #ifdef BuildXKBlib
      XKBFILELIBSRC = $(LIBSRC)/xkbfile
  ProjectUnsharedLibReferences(XKBFILE,xkbfile,$(XKBFILELIBSRC),XBuildLibDir)
***************
*** 1234,1244 ****
  #define XkbClientLibs /**/
  #endif
  #endif
! #ifdef UseInstalled
!      XKBCOMPCMD = $(BINDIR)/xkbcomp
  #else
       XKBCOMPSRC = $(PROGRAMSRC)/xkbcomp
!      XKBCOMPCMD = $(CLIENTENVSETUP) $(XBUILDBINDIR)/xkbcomp
  #endif
  #else /* !BuildXKBlib */
  #ifndef XkbClientDepLibs
--- 1531,1541 ----
  #define XkbClientLibs /**/
  #endif
  #endif
! #if defined(UseInstalled) || defined(OS2Architecture)
!      XKBCOMPCMD = XkbComp                       /* assume BINDIR in path */
  #else
       XKBCOMPSRC = $(PROGRAMSRC)/xkbcomp
!      XKBCOMPCMD = $(CLIENTENVSETUP) $(XKBCOMPSRC)/xkbcomp
  #endif
  #else /* !BuildXKBlib */
  #ifndef XkbClientDepLibs
***************
*** 1249,1254 ****
--- 1546,1569 ----
  #endif
  #endif /* BuildXKBlib */
  
+ #ifdef BuildXKBuilib
+     XKBUILIBSRC = $(LIBSRC)/xkbui
+ ProjectUnsharedLibReferences(XKBUI,xkbui,$(XKBUILIBSRC),XBuildLibDir)
+ #ifndef XkbuiLibs
+ #define	XkbuiLibs $(XKBUILIB)
+ #endif
+ #ifndef XkbuiDepLibs
+ #define	XkbuiDepLibs $(DEPXKBFILELIB)
+ #endif
+ #else /* !BuildXKBuilib */
+ #ifndef XkbuiLibs
+ #define	XkbuiLibs
+ #endif
+ #ifndef XkbuiDepLibs
+ #define	XkbuiDepLibs
+ #endif
+ #endif /* BuildXKBuilib */
+ 
  #ifndef XawClientDepLibs
  #define XawClientDepLibs $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
  #endif
***************
*** 1406,1412 ****
  #endif
  #endif /* CompressedFontTarget */
  
! #ifdef CompressAllFonts
  #define FontTarget(basename) CompressedFontTarget(basename)
  #if GzipFontCompression
  #define FontObj(basename) FontBaseObj(basename).gz
--- 1721,1728 ----
  #endif
  #endif /* CompressedFontTarget */
  
! #if !defined(FontTarget) && !defined(FontObj)
! #if CompressAllFonts
  #define FontTarget(basename) CompressedFontTarget(basename)
  #if GzipFontCompression
  #define FontObj(basename) FontBaseObj(basename).gz
***************
*** 1417,1422 ****
--- 1733,1739 ----
  #define FontTarget(basename) UncompressedFontTarget(basename)
  #define FontObj(basename) FontBaseObj(basename)
  #endif /* CompressAllFonts */
+ #endif
  
  /*
   * MakeXkbDir
***************
*** 1426,1437 ****
  all::   Concat(subdir,.dir)						@@\
  									@@\
  Concat(subdir,.dir):							@@\
  	$(XKBCOMPCMD) -lfhlpR -o Concat(subdir,.dir) '*'		@@\
  									@@\
- InstallTarget(install,Concat(subdir,.dir),$(INSTDATFLAGS),basedir)	@@\
- 									@@\
  clean::									@@\
! 	$(RM) Concat(subdir,.dir)
  #endif
  
  /*
--- 1743,1755 ----
  all::   Concat(subdir,.dir)						@@\
  									@@\
  Concat(subdir,.dir):							@@\
+ 	RemoveFile(Concat(subdir,.dir))					@@\
  	$(XKBCOMPCMD) -lfhlpR -o Concat(subdir,.dir) '*'		@@\
  									@@\
  clean::									@@\
! 	RemoveFile(Concat(subdir,.dir))					@@\
! 									@@\
! InstallTarget(install,Concat(subdir,.dir),$(INSTDATFLAGS),basedir)
  #endif
  
  /*
***************
*** 1450,1459 ****
  file.PS: srcs								@@\
  	-$(TROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw > file.nPS \@@\
  	&& PostProcessTroffPS(file.nPS,$@)				@@\
! 	@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? = 1; fi @@\
  									@@\
  file.txt: srcs								@@\
! 	$(NROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw > $@	@@\
  									@@\
  clean::									@@\
  	$(RM) index.raw file.nPS file.PS file.txt
--- 1768,1777 ----
  file.PS: srcs								@@\
  	-$(TROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw > file.nPS \@@\
  	&& PostProcessTroffPS(file.nPS,$@)				@@\
! 	@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? -le 1; fi @@\
  									@@\
  file.txt: srcs								@@\
! 	$(NROFF) $(MSMACROS) $(XDOCMACROS) srcs 2> index.raw | $(COL) $(COLFLAGS) > $@ @@\
  									@@\
  clean::									@@\
  	$(RM) index.raw file.nPS file.PS file.txt
***************
*** 1467,1476 ****
  file.PS: srcs								@@\
  	-$(TBL) $(XDOCMACROS) srcs | $(TROFF) $(MSMACROS) 2> index.raw > file.nPS \@@\
  	&& PostProcessTroffPS(file.nPS,$@)				@@\
! 	@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? = 1; fi @@\
  									@@\
  file.txt: srcs								@@\
! 	$(TBL) $(XDOCMACROS) srcs | $(NROFF) $(MSMACROS) 2> index.raw | $(COL) > $@	@@\
  									@@\
  clean::									@@\
  	$(RM) index.raw file.nPS file.PS file.txt
--- 1785,1794 ----
  file.PS: srcs								@@\
  	-$(TBL) $(XDOCMACROS) srcs | $(TROFF) $(MSMACROS) 2> index.raw > file.nPS \@@\
  	&& PostProcessTroffPS(file.nPS,$@)				@@\
! 	@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? -le 1; fi @@\
  									@@\
  file.txt: srcs								@@\
! 	$(TBL) $(XDOCMACROS) srcs | $(NROFF) $(MSMACROS) 2> index.raw | $(COL) $(COLFLAGS) > $@	@@\
  									@@\
  clean::									@@\
  	$(RM) index.raw file.nPS file.PS file.txt
***************
*** 1484,1493 ****
  file.PS: srcs								@@\
  	-$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(TROFF) $(MSMACROS) 2> index.raw > file.nPS \@@\
  	&& PostProcessTroffPS(file.nPS,$@)				@@\
! 	@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? = 1; fi @@\
  									@@\
  file.txt: srcs								@@\
! 	$(TBL) $(XDOCMACROS) srcs | $(NEQN) | $(NROFF) $(MSMACROS) 2> index.raw | $(COL) > $@ @@\
  									@@\
  clean::									@@\
  	$(RM) index.raw file.nPS file.PS file.txt
--- 1802,1811 ----
  file.PS: srcs								@@\
  	-$(TBL) $(XDOCMACROS) srcs | $(EQN) | $(TROFF) $(MSMACROS) 2> index.raw > file.nPS \@@\
  	&& PostProcessTroffPS(file.nPS,$@)				@@\
! 	@if grep '^[^1-9.]' index.raw; then exit 1; else test $$? -le 1; fi @@\
  									@@\
  file.txt: srcs								@@\
! 	$(TBL) $(XDOCMACROS) srcs | $(NEQN) | $(NROFF) $(MSMACROS) 2> index.raw | $(COL) $(COLFLAGS) > $@ @@\
  									@@\
  clean::									@@\
  	$(RM) index.raw file.nPS file.PS file.txt
***************
*** 1529,1531 ****
--- 1847,1866 ----
  	@echo "cannot make file.PS: no latex on this system"; exit 1
  #endif /* HasLatex (else) */
  #endif /* MakeLatexDoc */
+ 
+ #ifndef InstallDoc
+ #define InstallDoc(name,deps)					@@\
+ install:: deps								@@\
+ 	MakeDir($(DESTDIR)$(DOCPSDIR))					@@\
+ 	@if [ -f name.PS ]; then set -x; \				@@\
+ 	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.PS $(DESTDIR)$(DOCPSDIR); \ @@\
+ 	fi								@@\
+ 	MakeDir($(DESTDIR)$(DOCDIR))					@@\
+ 	@if [ -f name.txt ]; then set -x; \				@@\
+ 	  $(INSTALL) $(INSTALLFLAGS) $(INSTDATFLAGS) name.txt $(DESTDIR)$(DOCDIR)/name.TXT; \ @@\
+ 	fi
+ #endif
+ 
+ #ifndef InstallRoffDoc
+ #define InstallRoffDoc(name) InstallDoc(name,name.PS name.txt)
+ #endif
*** motif.orig/config/cf/x386.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/x386.cf	Sat Jun  3 18:49:35 2000
***************
*** 52,65 ****
  #define PosixLibraries		/**/
  #endif
  
- #ifdef SCO
- #define OSDefines		-DSCO -DBROKEN_FTOL -DNO_PROTOTYPE -D_SVID
- #define OSVendor		"Santa Cruz Operation Ltd."
- #define LocalLibraries		-lpt
- #define SocketLibraries		-lsocket 
- #define PosixLibraries		/**/
- #endif
- 
  #ifdef ATT
  #define OSDefines		-DATT
  #define OSVendor		"AT&T"
--- 52,57 ----
*** motif.orig/config/cf/xf86.rules	Fri Apr 28 11:04:06 2000
--- motif/config/cf/xf86.rules	Sat Jun  3 18:49:35 2000
***************
*** 1,5 ****
  XCOMM $XConsortium: xf86.rules /main/9 1996/10/31 14:54:26 kaleb $
! XCOMM $XFree86: xc/config/cf/xf86.rules,v 3.15 1996/09/24 13:48:46 dawes Exp $
  
  /*
   * These rules are needed to build the Xfree86 X Servers
--- 1,5 ----
  XCOMM $XConsortium: xf86.rules /main/9 1996/10/31 14:54:26 kaleb $
! XCOMM $XFree86: xc/config/cf/xf86.rules,v 3.16.2.3 1999/09/04 07:08:46 dawes Exp $
  
  /*
   * These rules are needed to build the Xfree86 X Servers
***************
*** 13,18 ****
--- 13,19 ----
  
  #ifndef AssembleObject
  #define AssembleObject(flags) CPPOnlyAsm($*,flags)			@@\
+ 	RemoveFile($*.o)						@@\
  	$(AS) -o $*.o $*.i						@@\
  	RemoveFile($*.i)
  #endif
***************
*** 51,57 ****
  	AssembleObject(flags)						@@\
  									@@\
  src.i:  src.s								@@\
! 	CPPOnlyAsm(dst,flags)						@@\
  									@@\
  depend:: src.s
  #endif
--- 52,58 ----
  	AssembleObject(flags)						@@\
  									@@\
  src.i:  src.s								@@\
! 	CPPOnlyAsm(src,flags)						@@\
  									@@\
  depend:: src.s
  #endif
***************
*** 161,166 ****
--- 162,168 ----
  /*
   * DynamicModuleTarget - build a module to be dynamically loaded
   */
+ #if !UseElfFormat
  #ifndef DynamicModuleTarget
  #define DynamicModuleTarget(module,modlist)				@@\
  AllTarget(module)							@@\
***************
*** 172,178 ****
  clean::									@@\
  	RemoveFile(module)
  #endif /* DynamicModuleTarget */
! 
  /*
   * InstallDynamicModule - install a dynamic module
   */
--- 174,192 ----
  clean::									@@\
  	RemoveFile(module)
  #endif /* DynamicModuleTarget */
! #else
! #ifndef DynamicModuleTarget
! #define DynamicModuleTarget(module,modlist)				@@\
! AllTarget(module)							@@\
! 									@@\
! module: modlist								@@\
! 	RemoveFile($@)							@@\
! 	$(CC) -o $@ $(SHLIBLDFLAGS) modlist				@@\
! 									@@\
! clean::									@@\
! 	RemoveFile(module)
! #endif /* DynamicModuleTarget */
! #endif
  /*
   * InstallDynamicModule - install a dynamic module
   */
*** motif.orig/config/cf/xf86site.def	Fri Jul  7 15:22:07 2000
--- motif/config/cf/xf86site.def	Sat Jun  3 18:49:35 2000
***************
*** 0 ****
--- 1,614 ----
+ XCOMM $XFree86: xc/config/cf/xf86site.def,v 3.101.2.36 1999/12/28 12:13:34 hohndel Exp $
+ /******************************************************************************/
+ /*
+  * This file is to provide a quick method for most people to change the
+  * behaviour of their XFree86 installation without having to fully
+  * understand the workings of site.def and all the various '.cf' files.
+  *
+  * These are the most common settings you would choose for compiling and
+  * installing XFree86 on the systems supported by it.
+  *
+  * A good way to use this file is to copy it to host.def, and make the
+  * changes there.  That way, future patches to this file won't fail.
+  * The host.def file will never be patched.
+  *
+  * The distributed version of this file should contain no uncommented
+  * definitions.  Such default definitions belong in xfree86.cf.
+  */
+ /******************************************************************************/
+ 
+ /*
+  * If you have build-specific modifications in your host.def file, but
+  * want an empty host.def file installed when doing 'make install',
+  * uncomment the following
+  *
+ #define InstallEmptyHostDef
+  */
+ 
+ /*
+  * If using GCC 2.x on a system where it isn't the default, uncomment
+  * the following
+  *
+ #define HasGcc2		YES
+ #define HasGcc		YES
+  */
+ 
+ /*
+  * If using GCC 2.x with C++ on a system where it isn't the default, uncomment
+  * the following.
+  *
+ #define HasGcc2ForCplusplus	YES
+  */
+ 
+ /*
+  * The default optimisation flags for GCC 2.x.  -fno-strength-reduce is
+  * here to work around a bug in -O2 for GCC 2.x on i386 platforms.
+  * If you are using a version that doesn't have this bug, you can
+  * uncomment the following line, and remove '-fno-strength-reduce'
+  * If you are building binaries for a 486, it may be beneficial to add
+  * -m486
+  *
+ #define DefaultGcc2i386Opt	-O2 -fno-strength-reduce
+  */
+ 
+ /*
+  * For Linux, this should match the Binutils version you have.  This example
+  * is for 2.6.0.7.  See linux.cf for the default setting.
+  *
+  * This should automatically get set correctly by imake.
+  *
+ #define LinuxBinUtilsMajorVersion	26
+  */
+ 
+ /*
+  * For Linux, these should match the libc version you have.  This example
+  * is for libc.5.4.x.  See linux.cf for the default setting.
+  *
+  * This should automatically get set correctly by imake.
+  *
+ #define LinuxCLibMajorVersion	5
+ #define LinuxClibMinorVersion	4
+  */
+ 
+ /*
+  * If you want to use the GNU malloc library, uncomment this
+  *
+ #define UseGnuMalloc		YES
+  */
+ 
+ /*
+  * Set this to whatever is required to access the GNU malloc library.
+  * The default is '-lgmalloc' unless is specified in the OS's .cf file.
+  *
+ #define GnuMallocLibrary	-L/usr/local/lib -lgmalloc
+  */
+ 
+ /*
+  * To disable the internal Xserver malloc, set this to NO
+  *
+ #define UseInternalMalloc	YES
+  */
+ 
+ /*
+  * Some Linux releases don't have a libtermcap.  In this case you may need
+  * to uncomment the following
+  *
+ #define TermcapLibrary		-lncurses
+  */
+ 
+ /*
+  * If you have Tk (which is required to build XF86Setup), uncomment this
+  * Note: version 4.0 or 4.1 is required, and XF86Setup links it statically by
+  * default.
+  *
+ #define HasTk			YES
+  */
+ 
+ /*
+  * Set the paths and names for your Tk library if they don't match the
+  * defaults (check your OS .cf file or Imake.tmpl for the defaults).
+  *
+  * Common values for TkLibName are tk4.0, tk4.1, etc.
+  *
+  * Some Linux releases need TkIncDir set to /usr/include/tcl, and some
+  * need it set to /usr/X11R6/include.
+  *
+  * Some Linux releases need TkLibDir set to /usr/X11R6/lib
+  *
+ #define TkLibDir		/usr/local/lib
+ #define TkIncDir		/usr/local/include
+ #define TkLibName		tk
+  */
+ 
+ /*
+  * By default, XF86Setup is linked with a static Tk library.  To change
+  * that, uncomment the following line.
+  *
+ #define XF86SetupUsesStaticTk	NO
+  */
+ 
+ /*
+  * If you have Tcl (which is required to build XF86Setup), uncomment this
+  * Note: version 7.4 or 7.5 is required, and XF86Setup links it statically by
+  * default.
+  *
+ #define HasTcl			YES
+  */
+ 
+ /*
+  * Set the paths and names for your Tcl library if they don't match the
+  * defaults (check your OS .cf file or Imake.tmpl for the defaults).
+  *
+  * Common values for TclLibName are tcl7.4, tcl7.5, etc.
+  *
+  * Some Linux releases need TclIncDir set to /usr/include/tcl.
+  *
+ #define TclLibDir		/usr/local/lib
+ #define TclIncDir		/usr/local/include
+ #define TclLibName		tcl
+  */
+ 
+ /*
+  * By default, XF86Setup is linked with a static Tcl library.  To change
+  * that, uncomment the following line.
+  *
+ #define XF86SetupUsesStaticTcl	NO
+  */
+ 
+ /*
+  * Which servers do you wish to build, you can save a lot of disk space
+  * by only compiling the server you will be using.  It will also save you
+  * considerable compile time. The default is to build all servers supported
+  * on your platform.
+  *
+  * The following servers are supported in Intel x86 platforms
+  *
+ #define XF86SVGAServer          NO
+ #define XF86VGA16Server         NO
+ #define XF86VGA16DualServer	NO
+ #define XF86MonoServer          NO
+ #define XF86MonoDualServer	NO
+ #define XF86S3Server            NO
+ #define XF86S3VServer           NO
+ #define XF86I8514Server         NO
+ #define XF86Mach8Server         NO
+ #define XF86Mach32Server        NO
+ #define XF86Mach64Server        NO
+ #define XF86P9000Server		NO
+ #define XF86AGXServer		NO
+ #define XF86W32Server		NO
+ #define XF86I128Server		NO
+ #define XF86GLINTServer		NO
+ #define XF86FBDevServer		NO
+  */
+ 
+ /*
+  * Which servers do you wish to build, you can save a lot of disk space
+  * by only compiling the server you will be using.  It will also save you
+  * considerable compile time.
+  *
+  * The following servers are supported on Digital Alpha platforms:
+  *
+ #define XF86SVGAServer          NO
+ #define XF86MonoServer          NO
+ #define XF86S3Server            NO
+ #define XF86S3VServer           NO
+ #define XF86P9000Server		NO
+ #define XF86TGAServer		NO
+ #define XF86GLINTServer		NO
+ #define XF86Mach64Server	NO
+ #define XF86I128Server		NO
+  */
+ 
+ /*
+  * Which servers do you wish to build, you can save a lot of disk space
+  * by only compiling the server you will be using.  It will also save you
+  * considerable compile time.
+  *
+  * The following server is supported on Mips/Arc platforms:
+  *
+ #define XF86S3Server            NO
+  */
+ 
+ /*
+  * PC98 X servers
+  *
+  * Uncommenting the following automatically enables all PC98 servers
+  *
+ #define BuildPC98Servers	YES
+  */
+ 
+ /*
+  * To enable/disable individual PC98 servers, use these
+  *
+ #define XF98EGCServer		YES
+ #define XF98GANBWAPServer	YES
+ #define XF98NEC480Server	YES
+ #define XF98NKVNECServer	YES
+ #define XF98WABSServer		YES
+ #define XF98WABEPServer		YES
+ #define XF98WSNAServer		YES
+ #define XF98TGUIServer		YES
+ #define XF98MGAServer		YES
+ #define XF98SVGAServer		YES
+ #define XF98NECS3Server		YES
+ #define XF98PWSKBServer		YES
+ #define XF98PWLBServer		YES
+ #define XF98GA968Server		YES
+  */
+ 
+ /*
+  * The following server is supported on Motorola 68k platforms:
+  *
+ #define XF68FBDevServer		NO
+  */
+ 
+ /*
+  * To disable building the Xnest server, uncomment this.
+  *
+ #define XnestServer		NO
+  */
+ 
+ /*
+  * To disable building Xvfb, uncomment this.
+  *
+ #define XVirtualFramebufferServer	NO
+  */
+ 
+ /*
+  * Set the default server (ie the one that gets the sym-link to "X")
+  *
+ #define ServerToInstall		XF86_S3
+  */
+ 
+ 
+ /*
+  * Server configuration parameters.  The defaults are shown here:
+  */
+ 
+ /*
+  * SVGA server:
+  *
+ #define XF86SvgaDrivers		nv et4000 et3000 pvga1 gvga r128 ati sis tvga8900 \
+ 				cirrus ncr77c22 compaq mga oak al2101 ali \
+ 				cl64xx video7 ark mx realtek apm s3_savage \
+ 				s3v s3_svga neo chips cyrix rendition p9x00 \
+ 				spc8110 i740 tdfx i810 smi generic
+  */
+ 
+ /*
+  * VGA16 server:
+  *
+ #define XF86Vga16Drivers	et4000 et3000 ncr77c22 ati sis tvga8900 oak \
+ 				cl64xx generic 
+  */
+ 
+ /*
+  * VGA2 driver in Mono server:
+  *
+ #define XF86Vga2Drivers		et4000 et3000 pvga1 gvga ati sis tvga8900 \
+ 				cirrus ncr77c22 oak cl64xx generic
+  */
+ 
+ /*
+  * Mono driver in Mono or VGA16 server:
+  *
+ #define XF86MonoDrivers		hgc1280 sigma apollo hercules
+  */
+ 
+ /*
+  * ET4000/W32 server:
+  *
+ #define XF86W32Drivers		et4000w32
+  */
+ 
+ /*
+  * BSD Console driver support (for FreeBSD and NetBSD).
+  *
+  * By default, support is included for pccons and pcvt for NetBSD, and
+  * pccons, syscons and pcvt for FreeBSD.
+  *
+  * To change the list of supported drivers, set the following parameter.
+  * Possible values are -DPCCONS_SUPPORT, -DSYSCONS_SUPPORT, -DPCVT_SUPPORT,
+  * -DCODRV_SUPPORT.  The following example includes support for syscons and
+  * pcvt only.
+  *
+ #define XFree86ConsoleDefines	-DSYSCONS_SUPPORT -DPCVT_SUPPORT
+  */
+ 
+ /*
+  * The X servers need to run as root on most OSs.  We're now using a
+  * wrapper in that case, but we still need to make it known that the
+  * servers need SetUID.  When only using xdm, this (and the wrapper)
+  * are not required.  Disabling this automatically disables use of the
+  * wrapper.
+  *
+  * If you're only starting the Xservers with xdm set this to NO
+  *
+ #define XserverNeedsSetUID	NO
+  */
+ 
+ /*
+  * To disable building the font server, uncomment this.
+  *
+ #define BuildFontServer		NO
+  */
+ 
+ /*
+  * Do you want to Build Fonts (Usually you only want to build and install
+  * fonts once, if this is a first time install you will want to build the
+  * fonts)
+  *
+ #define BuildFonts		NO
+  */
+ 
+ /*
+  * To not build/install the 75dpi fonts, uncomment the following
+  *
+ #define Build75DpiFonts		NO
+  */
+ 
+ /*
+  * To not build/install the 100dpi fonts, uncomment the following
+  *
+ #define Build100DpiFonts	NO
+  */
+ 
+ /*
+  * To not build/install the Speedo fonts, uncomment the following
+  *
+ #define BuildSpeedoFonts	NO
+  */
+ 
+ /*
+  * To not build/install the Type1 fonts, uncomment the following
+  *
+ #define BuildType1Fonts		NO
+  */
+ 
+ /*
+  * To not build/install the Cyrillic fonts, uncomment the following
+  *
+ #define BuildCyrillicFonts	NO
+  */
+ 
+ /*
+  * To not install the local font directory, uncomment the following
+  *
+ #define MakeLocalFontDir	NO
+  */
+ 
+ /*
+  * To build only the servers with a cut-down source tree, uncomment
+  * this.
+  *
+ #define BuildServersOnly	YES
+  */
+ 
+ /*
+  * To disable building XInput support, uncomment this
+  *
+ #define BuildXInputExt		NO
+  */
+ 
+ /*
+  * Select the XInput devices you want by setting them to YES.       
+  *
+  * Note: Joystick support is only included for Linux and FreeBSD at the
+  * moment.  For Linux it requires the Joystick module to be installed (it
+  * isn't part of the standard kernel distribution).  For FreeBSD, a kernel
+  * will need to be built with the Joystick driver in order to be able to
+  * use this.
+  *
+ #define JoystickSupport		NO
+ #define WacomSupport		YES
+ #define MicroTouchSupport	YES 
+ #define ElographicsSupport	YES 
+ #define DynaproSupport		YES 
+ #define SummaSketchSupport	YES
+ #define AceCadSupport		YES
+ #define DialBoxSupport		YES
+ #define CalcompSupport		YES
+  */
+ 
+ /*
+  * if your system supports dynamic loading of modules using
+  * dlopen set this to YES.
+  *
+ #define BuildDynamicLoading	YES
+  */
+ 
+ /*
+  * To disable the ScreenSaver Extension, uncomment this line.
+  *
+ #define BuildScreenSaverExt	NO
+  */
+ 
+ /*
+  * If you don't want to build PEX, uncomment this.
+  *
+ #define BuildPexExt		NO
+  */
+ 
+ /*
+  * If you don't want to build XIE, uncomment this.
+  *
+ #define BuildXIE		NO
+  */
+ 
+ /*
+  * If you don't want to build support for an external GLX server module or
+  * library, uncomment this.
+  *
+  * NOTE: XFree86 3.3 does not include GLX server source, module, or
+  *       functional libraries. Building in support does not require
+  *       availability of a GLX package, but will allow it to be used
+  *       when released (by dynamic load or relinking).  
+  *
+ #define BuildGlxExt             NO
+  */
+ 
+ /*
+  * If you aren't building with support for loadable modules and wish
+  * to statically link external GLX server libs instead of the default
+  * non-functional stub library, uncomment the following define and
+  * specify the space-seperated pathnames of those libraries here.
+  *
+ #define GlxStaticServerLib	/full/path/name/to/glx/servGL/libServerGlx.a \
+ 				/full/path/name/to/glx/servGL/libMesaGlx.a
+  */ 
+ 
+ /*
+  * If you want to build only the DIS (Document Imaging Subset of XIE)
+  * uncomment this line.  This option is only relevant when XIE is built.
+  *
+ #define BuildDIS		YES
+  */
+ 
+ /*
+  * By default, the sample config files for xinit, xdm and xfs are installed
+  * only when there is no pre-existing version installed.  Uncommenting the
+  * following lines will force the sample versions to be installed even if
+  * it means over-writing existing versions.
+  *
+ #define InstallXinitConfig	YES
+ #define InstallXdmConfig	YES
+ #define InstallFSConfig		YES
+  */
+ 
+ /*
+  * By default the application defaults files are always installed.
+  * Uncommenting the the following will prevent exising application
+  * defaults files from being over-written.
+  *
+ #define InstallAppDefFiles	NO
+  */
+ 
+ /*
+  * If you are running Solaris x86, and want to disable building support
+  * for the aperture driver, uncomment this.
+  *
+ #define HasSolx86ApertureDriver	NO
+  */
+ 
+ /*
+  * If you are running NetBSD 0.9C or later, or OpenBSD and want to disable
+  * building support for the NetBSD aperture driver, uncomment this.
+  *
+ #define HasNetBSDApertureDriver NO
+  */
+ 
+ /*
+  * If you are running SVR3 and have the mmap driver installed (for linear
+  * framebuffer access) uncomment this.
+  *
+ #define HasSVR3mmapDrv	YES
+  */
+ 
+ /*
+  * If you are using an SVR3 (like ISC 4.x) which supports long file names,
+  * you can * uncomment this to have manual pages installed under their
+  * full names
+  *
+ #define ExpandManNames		YES
+  */
+ 
+ /*
+  * For a POSIXized build on Interactive uncomment this
+  * Could be used with gcc 'till Version 2.6.3
+  * Should be used with gcc 2.7.2. 
+  *
+ #define UsePosix		YES
+  */
+ 
+ /*
+  * If you want XDMAUTH support (if you have Wraphelp.c), uncomment this.
+  *
+ #define HasXdmAuth		YES
+  */
+ 
+ /*
+  * If you have Linux DECnet support, and want to build XFree86 with support
+  * for connections over DECnet, uncomment this.
+  *
+ #define HasDECnet		YES
+  */
+ 
+ /*
+  * To forceably build static libraries in addition to shared libraries,
+  * uncomment this.
+  *
+ #define ForceNormalLib		YES
+  */
+ 
+ /*
+  * Uncomment this if your default tools (eg, gcc, ld, as, etc) are
+  * not the Linux ELF versions.
+  *
+ #define LinuxElfDefault		NO
+  */
+ 
+ /*
+  * To use ELF format shared libraries for supported OSs, uncomment this.
+  *
+  * For Linux the default setting of this is the same as the setting of
+  * LinuxElfDefault.
+  *
+  * For FreeBSD this should automatically be set correctly by imake.  Only
+  * change it here if you need to override the automatic setting.
+  *
+ #define UseElfFormat		YES
+  */
+ 
+ /*
+  * For FreeBSD/ELF (FreeBSD 3.0) it is possible to also build and install
+  * a.out compatibility libraries.  To enable that, uncomment this.
+  *
+ #define BuildAoutLibraries	YES
+  */
+ 
+ /*
+  * If you have trouble with make bombing out in Xlib, try uncommenting this.
+  * You will not get dependencies as a result, but better than nothing.
+  *
+ #define MakeHashTableBug        YES
+  */
+ 
+ /*
+  * If you do not want your man pages compress under SVR3 systems that
+  * support it, uncomment this.
+  *
+ #define CompressManPages        NO
+  */
+ 
+ /*
+  * LinuxDoc stuff.  Uncomment those of these you want.  Check in
+  * lnxdoc.tmpl for other things you might need to define/change here.
+  *
+ #define HasLinuxDoc		YES
+ #define HasLatex		YES
+ #define HasDvips		YES
+ #define BuildLinuxDocHtml	YES
+ #define BuildAllDocs		YES
+  */
+ 
+ /*
+  * To install Japanese versions of the documentation uncomment this.
+  *
+ #define InstallJapaneseDocs	YES
+  */
+ 
+ /*
+  * By default, XF86Contrib is defined so build only those parts of
+  * of the contrib distribution supported by XFree86.  To prevent this
+  * from being defined, uncomment the following.
+  *
+ #define DontDefineXF86Contrib
+  */
+ 
+ /*
+  * By default, gccmakedep uses mktemp for security reasons.
+  * Uncomment this, if your system lacks mktemp.
+  *
+ #define HasMktemp		NO
+  */
*** motif.orig/config/cf/xf86.tmpl	Fri Apr 28 11:04:06 2000
--- motif/config/cf/xf86.tmpl	Sat Jun  3 18:49:35 2000
***************
*** 2,8 ****
  
  
  
! XCOMM $XFree86: xc/config/cf/xf86.tmpl,v 3.10 1996/08/23 11:01:09 dawes Exp $
  
  #if XF86LinkKit
      TOP_INCLUDES = TopIncludes
--- 2,8 ----
  
  
  
! XCOMM $XFree86: xc/config/cf/xf86.tmpl,v 3.11.2.4 1999/06/17 16:23:45 hohndel Exp $
  
  #if XF86LinkKit
      TOP_INCLUDES = TopIncludes
***************
*** 33,41 ****
--- 33,56 ----
  #ifndef ElographicsSupport
  #define ElographicsSupport	NO
  #endif
+ #ifndef DynaproSupport
+ #define DynaproSupport		NO
+ #endif
+ #ifndef MicroTouchSupport
+ #define MicroTouchSupport	NO
+ #endif
  #ifndef SummaSketchSupport
  #define SummaSketchSupport	NO
  #endif
+ #ifndef AceCadSupport
+ #define AceCadSupport		NO
+ #endif
+ #ifndef DialBoxSupport
+ #define DialBoxSupport		NO
+ #endif
+ #ifndef CalcompSupport
+ #define CalcompSupport		NO
+ #endif
  
  #if BuildDynamicLoading
         MODULEDIR = $(USRLIBDIR)/modules
***************
*** 57,65 ****
--- 72,105 ----
  # else
  #  define ElographicsDefines
  # endif
+ # if DynaproSupport
+ #  define DynaproDefines -DDYNAPRO_SUPPORT
+ # else
+ #  define DynaproDefines
+ # endif
+ # if MicroTouchSupport
+ #  define MicroTouchDefines -DMICROTOUCH_SUPPORT
+ # else
+ #  define MicroTouchDefines
+ # endif
  # if SummaSketchSupport
  #  define SummaSketchDefines -DSUMMASKETCH_SUPPORT
  # else
  #  define SummaSketchDefines
+ # endif
+ # if AceCadSupport
+ #  define AceCadDefines -DACECAD_SUPPORT
+ # else
+ #  define AceCadDefines
+ # endif
+ # if DialBoxSupport
+ #  define DialBoxDefines -DDIALBOX_SUPPORT
+ # else
+ #  define DialBoxDefines
+ # endif
+ # if CalcompSupport
+ #  define CalcompDefines -DCALCOMP_SUPPORT
+ # else
+ #  define CalcompDefines
  # endif
  #endif
*** motif.orig/config/cf/xfree86.cf	Fri Apr 28 11:04:06 2000
--- motif/config/cf/xfree86.cf	Sat Jun  3 18:44:20 2000
***************
*** 1,4 ****
! XCOMM $XFree86: xc/config/cf/xfree86.cf,v 3.117 1996/10/19 15:12:31 dawes Exp $
  /*
   * This configuration file contains all of the configuration
   * information for the XFree86 based X Servers.
--- 1,4 ----
! XCOMM $XFree86: xc/config/cf/xfree86.cf,v 3.129.2.53 1999/12/10 12:38:13 hohndel Exp $
  /*
   * This configuration file contains all of the configuration
   * information for the XFree86 based X Servers.
***************
*** 6,12 ****
   * Most of these settings can be overridden in a vendor.cf or the
   * BeforeVendor part of the site.def file.
   */
! XCOMM $TOG: xfree86.cf /main/38 1997/10/22 13:01:59 kaleb $
  
  /*
   * The LinkKit needs to inherit some settings (from the xc build that
--- 6,12 ----
   * Most of these settings can be overridden in a vendor.cf or the
   * BeforeVendor part of the site.def file.
   */
! XCOMM $XConsortium: xfree86.cf /main/34 1996/12/06 11:45:18 rws $
  
  /*
   * The LinkKit needs to inherit some settings (from the xc build that
***************
*** 22,31 ****
  /*
   * Default settings for which X Servers to build.
   */
  #ifndef XF86SVGAServer
! # define XF86SVGAServer		YES
  #endif
  
  #ifndef XF86VGA16Server
  # define XF86VGA16Server	NO
  # ifndef XF86VGA16DualServer
--- 22,186 ----
  /*
   * Default settings for which X Servers to build.
   */
+ 
+ /*
+  * For Intel x86 platforms, the default is to build all X servers which
+  * are supported on this platform.
+  */
+ #ifdef i386Architecture
  #ifndef XF86SVGAServer
! #define XF86SVGAServer          YES
! #endif
! #ifndef XF86VGA16Server
! #define XF86VGA16Server         YES
! #endif
! #ifndef XF86VGA16DualServer
! #define XF86VGA16DualServer	YES
! #endif
! #ifndef XF86MonoServer
! #define XF86MonoServer          YES
! #endif
! #ifndef XF86MonoDualServer
! #define XF86MonoDualServer	YES
! #endif
! #ifndef XF86S3Server
! #define XF86S3Server            YES
! #endif
! #ifndef XF86S3VServer
! #define XF86S3VServer		YES
! #endif
! #ifndef XF86I8514Server
! #define XF86I8514Server         YES
! #endif
! #ifndef XF86Mach8Server
! #define XF86Mach8Server         YES
! #endif
! #ifndef XF86Mach32Server
! #define XF86Mach32Server        YES
! #endif
! #ifndef XF86Mach64Server
! #define XF86Mach64Server        YES
! #endif
! #ifndef XF86P9000Server
! #define XF86P9000Server		YES
! #endif
! #ifndef XF86AGXServer
! #define XF86AGXServer		YES
! #endif
! #ifndef XF86W32Server
! #define XF86W32Server		YES
! #endif
! #ifndef XF86I128Server
! #define XF86I128Server		YES
! #endif
! #ifndef XF86GLINTServer
! #define XF86GLINTServer		YES
! #endif
! #if defined(LinuxArchitecture)
! #ifndef XF86FBDevServer
! #define XF86FBDevServer		YES
! #endif
! #endif
  #endif
  
+ /*
+  * For Digital Alpha platforms, the default is to build all X servers which
+  * are supported on this platform.
+  */
+ #ifdef AlphaArchitecture
+ #ifndef XF86S3Server
+ #define XF86S3Server		YES
+ #endif
+ #ifndef XF86S3VServer
+ #define XF86S3VServer		YES
+ #endif
+ #ifndef XF86Mach64Server
+ #define XF86Mach64Server	YES
+ #endif
+ #ifndef XF86P9000Server
+ #define XF86P9000Server		YES
+ #endif
+ #ifndef XF86I128Server
+ #define XF86I128Server		YES
+ #endif
+ #ifndef XF86TGAServer
+ #define XF86TGAServer		YES
+ #endif
+ #ifndef XF86SVGAServer
+ #define XF86SVGAServer		YES
+ #endif
+ #ifndef XF86MonoServer
+ #define XF86MonoServer		YES
+ #endif
+ #ifndef XF86GLINTServer
+ #define XF86GLINTServer		YES
+ #endif
+ #if defined(LinuxArchitecture)
+ #ifndef XF86FBDevServer
+ #define XF86FBDevServer                YES
+ #endif
+ #endif
+ #ifndef XF86SvgaDrivers
+ #define XF86SvgaDrivers		mga s3v
+ #endif
+ #ifndef XF86Vga2Drivers
+ #define XF86Vga2Drivers		generic
+ #endif
+ #endif
+ 
+ /*
+  * For Motorola 68k platforms, the default is to build all X servers which
+  * are supported on this platform.
+  */
+ #ifdef Mc68020Architecture
+ #ifndef XF68FBDevServer
+ #define XF68FBDevServer		YES
+ #endif
+ #endif
+ 
+ /* 
+  * For Mips/Arc platforms, the default is to build all X servers which
+  * are supported on this platform. 
+  */
+ #ifdef ArcArchitecture
+ #ifndef XF86S3Server
+ #define XF86S3Server          YES
+ #endif
+ #endif
+ 
+ /* 
+  * For PowerPC platforms, the default is to build all X servers which
+  * are supported on this platform. 
+  */
+ #ifdef PowerPCArchitecture
+ #ifndef XF86SVGAServer
+ #define XF86SVGAServer        NO
+ #endif
+ #ifndef XF86VGA16Server
+ #define XF86VGA16Server       NO
+ #endif
+ #ifndef XF86S3Server
+ #define XF86S3Server          NO
+ #endif
+ #ifndef XF68FBDevServer
+ #define XF68FBDevServer		YES
+ #define XF68FBDevCFB8		YES
+ #define XF68FBDevCFB16		YES
+ #define XF68FBDevCFB24		NO
+ #define XF68FBDevCFB32		YES
+ #define XF68FBDevIPLAN2p2	NO
+ #define XF68FBDevIPLAN2p4	NO
+ #define XF68FBDevIPLAN2p8	NO
+ #define XF68FBDevILBM		NO
+ #define XF68FBDevAFB		YES
+ #define XF68FBDev77C32		YES
+ #define XF68FBDevMach64		YES
+ #define XF68FBDevIMSTT		YES
+ #endif
+ #endif
+ /*
+  * The following disables all X servers not already enabled above
+  */
  #ifndef XF86VGA16Server
  # define XF86VGA16Server	NO
  # ifndef XF86VGA16DualServer
***************
*** 80,85 ****
--- 235,244 ----
  # define XF86I128Server		NO
  #endif
  
+ #ifndef XF86GLINTServer
+ # define XF86GLINTServer	NO
+ #endif
+ 
  #ifndef XF86TGAServer
  # define XF86TGAServer		NO
  #endif
***************
*** 144,193 ****
  # define XF86I128Dir		/**/
  #endif
  
  #if XF86TGAServer
  # define XF86TGADir		tga
  #else
  # define XF86TGADir		/**/
  #endif
  
  #ifndef XF98GANBWAPServer
! # define XF98GANBWAPServer	NO	
  #endif
  
  #ifndef XF98NEC480Server
! # define XF98NEC480Server	NO
  #endif
  
  #ifndef XF98NKVNECServer
! # define XF98NKVNECServer	NO
  #endif
  
  #ifndef XF98WABSServer
! # define XF98WABSServer		NO	
  #endif
  
! #ifndef XF98SVGAServer
! # define XF98SVGAServer		NO	
  #endif
  
  #ifndef XF98TGUIServer
! # define XF98TGUIServer		NO
  #endif
  
  #ifndef XF98EGCServer
! # define XF98EGCServer		NO
  #endif
  
  #ifndef XF98NECS3Server
! # define XF98NECS3Server	NO	
  #endif
  
  #ifndef XF98PWSKBServer
! # define XF98PWSKBServer	NO
  #endif
  
  #ifndef XF98PWLBServer
! #define XF98PWLBServer		NO
  #endif
  
  #if XF98NECS3Server
--- 303,378 ----
  # define XF86I128Dir		/**/
  #endif
  
+ #if XF86GLINTServer
+ # define XF86GLINTDir		glint
+ #else
+ # define XF86GLINTDir		/**/
+ #endif
+ 
  #if XF86TGAServer
  # define XF86TGADir		tga
  #else
  # define XF86TGADir		/**/
  #endif
  
+ #ifndef BuildPC98Servers
+ #define BuildPC98Servers	NO
+ #endif
+ 
  #ifndef XF98GANBWAPServer
! # define XF98GANBWAPServer	BuildPC98Servers
  #endif
  
  #ifndef XF98NEC480Server
! # define XF98NEC480Server	BuildPC98Servers
  #endif
  
  #ifndef XF98NKVNECServer
! # define XF98NKVNECServer	BuildPC98Servers
  #endif
  
  #ifndef XF98WABSServer
! # define XF98WABSServer		BuildPC98Servers
  #endif
  
! #ifndef XF98WABEPServer
! # define XF98WABEPServer	BuildPC98Servers
! #endif
! 
! #ifndef XF98WSNAServer
! # define XF98WSNAServer		BuildPC98Servers
  #endif
  
  #ifndef XF98TGUIServer
! # define XF98TGUIServer		BuildPC98Servers
! #endif
! 
! #ifndef XF98MGAServer
! # define XF98MGAServer		BuildPC98Servers
! #endif
! 
! #ifndef XF98SVGAServer
! # define XF98SVGAServer		BuildPC98Servers
  #endif
  
  #ifndef XF98EGCServer
! # define XF98EGCServer		BuildPC98Servers
  #endif
  
  #ifndef XF98NECS3Server
! # define XF98NECS3Server	BuildPC98Servers
  #endif
  
  #ifndef XF98PWSKBServer
! # define XF98PWSKBServer	BuildPC98Servers
  #endif
  
  #ifndef XF98PWLBServer
! #define XF98PWLBServer		BuildPC98Servers
! #endif
! 
! #ifndef XF98GA968Server
! #define XF98GA968Server		BuildPC98Servers
  #endif
  
  #if XF98NECS3Server
***************
*** 208,233 ****
  # define XF98PWLBDir		/**/
  #endif
  
  #undef XF86AccelServerDirs
  #define XF86AccelServerDirs	XF86S3Dir XF86S3VDir XF86I8514Dir \
  				XF86Mach8Dir XF86Mach32Dir XF86Mach64Dir \
  				XF86P9000Dir XF86AGXDir XF86W32Dir \
! 				XF86I128Dir XF86TGADir
  
  #undef XF86AccelServer
  #if XF86S3Server || XF86S3VServer || XF86I8514Server || XF86Mach8Server || \
      XF86Mach32Server || XF86Mach64Server || XF86P9000Server || \
!     XF86AGXServer || XF86W32Server || XF86I128Server || XF86TGAServer
  # define XF86AccelServer	YES
  #else
  # define XF86AccelServer	NO
  #endif
  
  #undef XF98AccelServerDirs
! #define XF98AccelServerDirs   XF98NECS3Dir XF98PWSKBDir XF98PWLBDir
  
  #undef XF98AccelServer
! #if XF98NECS3Server || XF98PWSKBServer || XF98PWLBServer
  # define XF98AccelServer	YES
  #else
  # define XF98AccelServer	NO
--- 393,425 ----
  # define XF98PWLBDir		/**/
  #endif
  
+ #if XF98GA968Server
+ # define XF98GA968Dir		s3ga968
+ #else
+ # define XF98GA968Dir		/**/
+ #endif
+ 
  #undef XF86AccelServerDirs
  #define XF86AccelServerDirs	XF86S3Dir XF86S3VDir XF86I8514Dir \
  				XF86Mach8Dir XF86Mach32Dir XF86Mach64Dir \
  				XF86P9000Dir XF86AGXDir XF86W32Dir \
! 				XF86I128Dir XF86GLINTDir XF86TGADir
  
  #undef XF86AccelServer
  #if XF86S3Server || XF86S3VServer || XF86I8514Server || XF86Mach8Server || \
      XF86Mach32Server || XF86Mach64Server || XF86P9000Server || \
!     XF86AGXServer || XF86W32Server || XF86I128Server || XF86TGAServer || \
!     XF86GLINTServer
  # define XF86AccelServer	YES
  #else
  # define XF86AccelServer	NO
  #endif
  
  #undef XF98AccelServerDirs
! #define XF98AccelServerDirs   XF98NECS3Dir XF98PWSKBDir XF98PWLBDir XF98GA968Dir
  
  #undef XF98AccelServer
! #if XF98NECS3Server || XF98PWSKBServer || XF98PWLBServer || XF98GA968Server
  # define XF98AccelServer	YES
  #else
  # define XF98AccelServer	NO
***************
*** 237,246 ****
   * Driver list for several of the X Servers.
   */
  #ifndef XF86SvgaDrivers
! # define XF86SvgaDrivers	nv et4000 et3000 pvga1 gvga ati sis tvga8900 \
! 				cirrus ncr77c22 /*compaq*/ mga oak mx al2101 \
! 				ali cl64xx video7 chips ark realtek apm \
! 				s3_svga generic
  #endif
  
  #ifndef XF98SvgaDrivers
--- 429,451 ----
   * Driver list for several of the X Servers.
   */
  #ifndef XF86SvgaDrivers
! # ifdef AlphaArchitecture
! #  define XF86SvgaDrivers	mga tvga8900 s3v
! # else
! #  if defined(LinuxArchitecture)
! #   define XF86SvgaDrivers	nv et4000 et3000 pvga1 gvga r128 ati sis tvga8900 \
! 				cirrus ncr77c22 compaq mga oak al2101 \
! 				ali cl64xx video7 ark mx realtek s3_savage s3v apm \
! 				s3_svga neo chips cyrix rendition p9x00 \
! 				spc8110 i740 tdfx smi generic
! #  else
! #   define XF86SvgaDrivers	nv et4000 et3000 pvga1 gvga r128 ati sis tvga8900 \
! 				cirrus ncr77c22 compaq mga oak al2101 \
! 				ali cl64xx video7 ark mx realtek s3v apm \
! 				s3_svga neo chips cyrix rendition p9x00 \
! 				spc8110 i740 tdfx smi generic
! #  endif
! # endif
  #endif
  
  #ifndef XF98SvgaDrivers
***************
*** 248,255 ****
  #endif
  
  #ifndef XF86Vga16Drivers
! # define XF86Vga16Drivers	et4000 ncr77c22 ati sis tvga8900 oak cl64xx \
! 				generic
  #endif
  
  #ifndef XF98Vga16Drivers
--- 453,460 ----
  #endif
  
  #ifndef XF86Vga16Drivers
! # define XF86Vga16Drivers	et4000 et3000 ncr77c22 ati sis tvga8900 \
! 				oak cl64xx generic
  #endif
  
  #ifndef XF98Vga16Drivers
***************
*** 257,264 ****
  #endif
  
  #ifndef XF86Vga2Drivers
! # define XF86Vga2Drivers	et4000 et3000 pvga1 gvga ati sis tvga8900 \
  				cirrus ncr77c22 /*compaq*/ oak cl64xx generic
  #endif
  
  #ifndef XF86Vga2Banked
--- 462,473 ----
  #endif
  
  #ifndef XF86Vga2Drivers
! # ifdef AlphaArchitecture
! #  define XF86Vga2Drivers	generic
! # else
! #  define XF86Vga2Drivers	et4000 et3000 pvga1 gvga ati sis tvga8900 \
  				cirrus ncr77c22 /*compaq*/ oak cl64xx generic
+ # endif
  #endif
  
  #ifndef XF86Vga2Banked
***************
*** 266,280 ****
  #endif
  
  #ifndef XF86MonoDrivers
! # define XF86MonoDrivers	hgc1280 sigma apollo /*hercules*/
  #endif
  
! /* This doesn't do anything (yet) */
  #ifndef XF86S3Drivers
  # if !defined(AlphaArchitecture)
  #  define XF86S3Drivers		newmmio mmio_928 s3_generic
  # else
! #  define XF86S3Drivers		mmio_928 s3_generic newmmio
  # endif
  #endif
  
--- 475,489 ----
  #endif
  
  #ifndef XF86MonoDrivers
! # define XF86MonoDrivers	hgc1280 sigma apollo hercules
  #endif
  
! /* This doesn't do everything (yet) */
  #ifndef XF86S3Drivers
  # if !defined(AlphaArchitecture)
  #  define XF86S3Drivers		newmmio mmio_928 s3_generic
  # else
! #  define XF86S3Drivers		newmmio mmio_928 s3_generic
  # endif
  #endif
  
***************
*** 286,327 ****
  # define XF86W32Drivers		et4000w32
  #endif
  
! #ifndef XF98S3Drivers
! # define XF98S3Drivers		mmio_928 s3_generic
  #endif
  
  /*
   * By default, build all of the fonts.
   */
! #ifndef Build75Dpi
! #define Build75Dpi		YES
  #endif
! #ifndef Build100Dpi
! #define Build100Dpi		YES
  #endif
! #ifndef BuildSpeedo
! #define BuildSpeedo		YES
  #endif
! #ifndef BuildType1
! #define BuildType1		YES
  #endif
  
  #ifndef BuildScanpci
! #if SystemV || SystemV4 || (defined(LinuxArchitecture) && !defined(Mc68020Architecture)) || defined(i386BsdArchitecture) || defined(LynxOSArchitecture) || defined(OS2Architecture)
  #define BuildScanpci		YES
  #else
  #define BuildScanpci		NO
  #endif
  #endif
  
- #ifndef BuildXF86DGA
- #define BuildXF86DGA		NO
- #endif
- 
  #ifndef CompressAllFonts
  #define CompressAllFonts	YES
  #endif
  
  #ifndef HasLinuxDoc
  #define HasLinuxDoc		NO
  #endif
--- 495,880 ----
  # define XF86W32Drivers		et4000w32
  #endif
  
! #if XF68FBDevServer || XF86FBDevServer
! # ifndef XF68FBDevIPLAN2p2
! #  define XF68FBDevIPLAN2p2	YES
! # endif
! # ifndef XF68FBDevIPLAN2p4
! #  define XF68FBDevIPLAN2p4	YES
! # endif
! # ifndef XF68FBDevIPLAN2p8
! #  define XF68FBDevIPLAN2p8	YES
! # endif
! # ifndef XF68FBDevILBM
! #  define XF68FBDevILBM		YES
! # endif
! # ifndef XF68FBDevAFB
! #  define XF68FBDevAFB		YES
! # endif
! # ifndef XF68FBDevCFB8
! #  define XF68FBDevCFB8		YES
! # endif
! # ifndef XF68FBDevCFB16
! #  define XF68FBDevCFB16	YES
! # endif
! # ifndef XF68FBDevCFB24
! #  ifdef i386Architecture
! #   define XF68FBDevCFB24	YES
! #  else
! #   define XF68FBDevCFB24	NO
! #  endif
! # endif
! # ifndef XF68FBDevCFB32
! #  define XF68FBDevCFB32	YES
! # endif
! /* Accelerated stuff */
! # ifndef XF68FBDev77C32
! #  define XF68FBDev77C32	YES
! # endif
! # ifndef XF68FBDevMach64
! #  define XF68FBDevMach64	YES
! # endif
! # ifndef XF68FBDevIMSTT
! #  define XF68FBDevIMSTT	YES
! # endif
! #else
! # ifndef XF68FBDevIPLAN2p2
! #  define XF68FBDevIPLAN2p2	NO
! # endif
! # ifndef XF68FBDevIPLAN2p4
! #  define XF68FBDevIPLAN2p4	NO
! # endif
! # ifndef XF68FBDevIPLAN2p8
! #  define XF68FBDevIPLAN2p8	NO
! # endif
! # ifndef XF68FBDevILBM
! #  define XF68FBDevILBM		NO
! # endif
! # ifndef XF68FBDevAFB
! #  define XF68FBDevAFB		NO
! # endif
! # ifndef XF68FBDevCFB8
! #  define XF68FBDevCFB8		NO
! # endif
! # ifndef XF68FBDevCFB16
! #  define XF68FBDevCFB16	NO
! # endif
! # ifndef XF68FBDevCFB24
! #  define XF68FBDevCFB24	NO
! # endif
! # ifndef XF68FBDevCFB32
! #  define XF68FBDevCFB32	NO
! # endif
! # ifndef XF68FBDev77C32
! #  define XF68FBDev77C32	NO
! # endif
! # ifndef XF68FBDevMach64
! #  define XF68FBDevMach64	NO
! # endif
! # ifndef XF68FBDevIMSTT
! #  define XF68FBDevIMSTT	NO
! # endif
! #endif
! 
! #ifndef XnestServer
! #define XnestServer		YES
! #endif
! 
! #ifndef XVirtualFramebufferServer
! #define XVirtualFramebufferServer YES
! #endif
! 
! /*
!  * The X servers need to run as root on most OSs.  We're now using a
!  * wrapper in that case, but we still need to make it known that the
!  * servers need SetUID.  When only using xdm, this (and the wrapper)
!  * are not required.  Disabling this automatically disables use of the
!  * wrapper.
!  */
! #if !defined(i386MachArchitecture) && !defined(OS2Architecture)
! #ifndef XserverNeedsSetUID
! #define XserverNeedsSetUID	YES
! #endif
! #endif
! 
! /*
!  * The server-side of PEX is not 64-bit clean.
!  */
! #ifndef BuildPextExt
! #ifdef AlphaArchitecture
! #define BuildPexExt		NO
! #endif
! #endif
! 
! /*
!  * PEX doesn't work for 1-bit and 4-bit servers
!  */
! #if !defined(BuildPexExt) || BuildPexExt
! #undef BuildPexExt
! #if XF86AccelServer || XF86SVGAServer || XF98AccelServer || \
!     XF98GANBWAPServer || XF98NEC480Server || XF98NKVNECServer || \
!     XF98WABSServer || XF98WABEPServer || XF98WSNAServer || XF98TGUIServer || \
!     XF98MGAServer || XF98SVGAServer || XF68FBDevServer || XF86FBDevServer
! #define BuildPexExt		YES
! #else
! #define BuildPexExt		NO
! #endif
! #endif
! 
! /*
!  * Build GLX server interface
!  *   --- Does't work for 1-bit and 4-bit servers
!  */
! #if !defined(BuildGlxExt) || BuildGlxExt
! #  undef BuildGlxExt
! #  if XF86AccelServer || XF86SVGAServer || XF98AccelServer || \
!       XF98GANBWAPServer || XF98NEC480Server || XF98NKVNECServer || \
!       XF98WABSServer || XF98WABEPServer || XF98WSNAServer || XF98TGUIServer || \
!       XF98MGAServer || XF98SVGAServer || XF68FBDevServer || XF86FBDevServer
! #    define BuildGlxExt             YES
! #  else
! #    define BuildGlxExt             NO
! #  endif
! #endif
! 
! /*
!  * XIE doesn't work for our 1-bit and 4-bit servers
!  */
! #if !defined(BuildXIE) || BuildXIE
! #undef BuildXIE
! #if XF86AccelServer || XF86SVGAServer || XF98AccelServer || \
!     XF98GANBWAPServer || XF98NEC480Server || XF98NKVNECServer || \
!     XF98WABSServer || XF98WABEPServer || XF98WSNAServer || XF98TGUIServer || \
!     XF98MGAServer || XF98SVGAServer || XF68FBDevServer || XF86FBDevServer
! #define BuildXIE		YES
! #else
! #define BuildXIE		NO
! #endif
! #endif
! 
! #ifndef BuildXIElib
! #define BuildXIElib	YES
! #endif
! 
! #ifndef BuildDBElib
! #define BuildDBElib	YES
! #endif
! 
! #ifndef BuildRECORDlib
! #define BuildRECORDlib	YES
! #endif
! 
! #ifndef BuildXKBlib
! #define BuildXKBlib	YES
! #endif
! 
! #ifndef BuildScreenSaverExt
! #define BuildScreenSaverExt	YES
! #endif
! 
! /*
!  * Build XInput support
!  */
! #ifndef BuildXInputExt
! #define BuildXInputExt		YES
! #endif
! 
! /*
!  * Include support for these XInput devices
!  */
! #ifndef WacomSupport
! #define WacomSupport		YES
! #endif
! #ifndef ElographicsSupport
! #define ElographicsSupport	YES 
! #endif
! #ifndef DynaproSupport
! #define DynaproSupport		YES 
! #endif
! #ifndef MicroTouchSupport
! #define MicroTouchSupport	YES 
! #endif
! #ifndef SummaSketchSupport
! #define SummaSketchSupport	YES
! #endif
! #ifndef AceCadSupport
! #define AceCadSupport		YES
! #endif
! #ifndef DialBoxSupport
! #if SystemV || SystemV4
! #define DialBoxSupport		NO
! #else
! #define DialBoxSupport		YES
! #endif
! #endif
! #ifndef JoystickSupport
! #define JoystickSupport		NO
! #endif
! #ifndef CalcompSupport
! #define CalcompSupport		YES
! #endif
! 
! /*
!  * Build the extra extension libs even when not including the extra extensions
!  * in the servers
!  */
! #ifndef BuildScreenSaverLibrary
! #define BuildScreenSaverLibrary	YES
! #endif
! #ifndef BuildXF86MiscLibrary
! #define BuildXF86MiscLibrary	YES
! #endif
! #ifndef BuildXF86DGALibrary
! #define BuildXF86DGALibrary	YES
! #endif
! #ifndef BuildXF86VidModeLibrary
! #define BuildXF86VidModeLibrary	YES
! #endif
! #ifndef BuildDPMSLibrary
! #define BuildDPMSLibrary	YES
! #endif
! 
! /*
!  * Build the XFree86-VidMode extension
!  */
! #ifndef BuildXF86VidModeExt
! #define BuildXF86VidModeExt		YES
! #endif
! 
! /*
!  * Build the XFree86-Misc extension
!  */
! #ifndef BuildXF86MiscExt
! #define BuildXF86MiscExt		YES
! #endif
! 
! /*
!  * Build XF86Setup -- needs Tk and Tcl
!  */
! #ifndef BuildXF86Setup
! #if HasTk && HasTcl && BuildXF86VidModeLibrary && BuildXF86MiscLibrary && BuildXKBlib
! #define BuildXF86Setup			YES
! #else
! #define BuildXF86Setup			NO
! #endif
! #endif
! 
! /*
!  * Build Japanese versions of XF86Setup -- needs Japanised Tk and Tcl
!  */
! #ifndef BuildJpXF86Setup
! #if HasJpTk && HasJpTcl && BuildXF86VidModeLibrary && BuildXF86MiscLibrary && BuildXKBlib
! #define BuildJpXF86Setup		YES
! #else
! #define BuildJpXF86Setup		NO
! #endif
! #endif
! 
! #ifndef XF86SetupUsesStaticTk
! #define XF86SetupUsesStaticTk		YES
! #endif
! #ifndef XF86SetupUsesStaticTcl
! #define XF86SetupUsesStaticTcl		YES
! #endif
! 
! /*
!  * Build the XFree86 DGA support
!  */
! #ifndef BuildXF86DGA
! #define BuildXF86DGA			YES
! #endif
! 
! /*
!  * Build the DPMS extension support
!  */
! #ifndef BuildDPMSExt
! #define BuildDPMSExt			YES
! #endif
! 
! #if Malloc0ReturnsNull
! #ifndef XtMalloc0ReturnsNullDefines
! #define XtMalloc0ReturnsNullDefines	Malloc0ReturnsNullDefines -DXTMALLOC_BC
! #endif
! #endif
! 
! #ifndef UseInternalMalloc
! #define UseInternalMalloc	YES
! #endif
! 
! #ifndef HasDlsymBug
! #define HasDlsymBug		NO
! #endif
! 
! /*
!  * The expiry date for beta versions
!  *
!  * 853286400 is Wed Jan 15 00:00:00 1997 GMT
!  * 855964800 is Sat Feb 15 00:00:00 1997 GMT
!  * 866332800 is Sun Jun 15 00:00:00 1997 GMT
!  */
! #ifndef XF86ServerExpiry
! #define XF86ServerExpiry 866332800
! #endif
! 
! /*
!  * Build the font server
!  */
! #ifndef BuildFontServer
! #define BuildFontServer		YES
  #endif
  
  /*
   * By default, build all of the fonts.
   */
! #ifndef Build75DpiFonts
! #define Build75DpiFonts		YES
! #endif
! #ifndef Build100DpiFonts
! #define Build100DpiFonts	YES
  #endif
! #ifndef BuildSpeedoFonts
! #define BuildSpeedoFonts	YES
  #endif
! #ifndef BuildType1Fonts
! #define BuildType1Fonts		YES
  #endif
! #ifndef BuildCyrillicFonts
! #define BuildCyrillicFonts	YES
! #endif
! #ifndef UseKoi8RForCyrillic
! #define UseKoi8RForCyrillic	YES
! #endif
! 
! /*
!  * By default, create the local font directory
!  */
! #ifndef MakeLocalFontDir
! #define MakeLocalFontDir	YES
  #endif
  
+ /*
+  * Build scanpci?
+  */
  #ifndef BuildScanpci
! #if SystemV || SystemV4 || (defined(LinuxArchitecture) && !defined(Mc68020Architecture) && !defined(PowerPCArchitecture)) || defined(i386BsdArchitecture) || defined(LynxOSArchitecture) || defined(OS2Architecture)
  #define BuildScanpci		YES
  #else
  #define BuildScanpci		NO
  #endif
  #endif
  
  #ifndef CompressAllFonts
  #define CompressAllFonts	YES
  #endif
  
+ #ifndef GzipFontCompression
+ #define GzipFontCompression	YES
+ #endif
+ 
+ #ifndef StripInstalledPrograms
+ #define StripInstalledPrograms	YES
+ #endif
+ 
  #ifndef HasLinuxDoc
  #define HasLinuxDoc		NO
  #endif
***************
*** 336,348 ****
  #define XFree86DGADefines	/**/
  #endif
  
  /* Server defines required for all OSs */
  #ifndef XFree86ServerDefines
  #define XFree86ServerDefines	-DSTATIC_COLOR -DAVOID_GLYPHBLT -DPIXPRIV LinkKitDefines XFree86DGADefines
  #endif
  
  #ifndef XFree86ServerOSDefines
! #define XFree86ServerOSDefines	-DDDXOSINIT -DSERVER_LOCK
  #endif
  
  #ifndef XFree86ConsoleDefines
--- 889,909 ----
  #define XFree86DGADefines	/**/
  #endif
  
+ #ifndef MakeHasPosixVariableSubstitutions
+ #if !HasBsdMake
+ #define MakeHasPosixVariableSubstitutions	NO
+ #else
+ #define MakeHasPosixVariableSubstitutions	YES
+ #endif
+ #endif
+ 
  /* Server defines required for all OSs */
  #ifndef XFree86ServerDefines
  #define XFree86ServerDefines	-DSTATIC_COLOR -DAVOID_GLYPHBLT -DPIXPRIV LinkKitDefines XFree86DGADefines
  #endif
  
  #ifndef XFree86ServerOSDefines
! #define XFree86ServerOSDefines	-DDDXOSINIT -DSERVER_LOCK -DDDXOSFATALERROR
  #endif
  
  #ifndef XFree86ConsoleDefines
***************
*** 353,364 ****
  #endif
  #endif
  
! #ifndef UseServerLock
! #define UseServerLock	YES
  #endif
  
! #ifndef XF86LinkKit
! #define XF86LinkKit	NO
  #endif
  
  #if XF86LinkKit
--- 914,930 ----
  #endif
  #endif
  
! /* Support for USB mouse */
! #ifndef UsbMouseSupport
! #define UsbMouseSupport	NO
! #endif
! /* Does this OS has libusb ? */
! #ifndef HasLibUsb
! #define HasLibUsb	NO
  #endif
  
! #ifndef UseServerLock
! #define UseServerLock	YES
  #endif
  
  #if XF86LinkKit
***************
*** 367,401 ****
   * UseInstalled is defined.
   */
  # ifndef HasLdRunPath
! #  define HasLdRunPath        NO
  # endif
  
  # ifndef TopIncludes
  #  ifdef IncRoot
! #   define TopIncludes        -I$(INCROOT)
  #  else
! #   define TopIncludes        /**/
  #  endif
  # endif
  # ifndef ClientLibDir
  #  if defined(UsrLibDir) || HasLdRunPath
! #   define ClientLibDir       /**/
  #  else
! #   define ClientLibDir       -L$(USRLIBDIR)
  #  endif
  # endif
  # ifndef LdPreLib
  #  if defined(LdPostLib) && defined(UsrLibDir) && !HasLdRunPath
! #   define LdPreLib   -L$(USRLIBDIR)
  #  else
! #   define LdPreLib   /**/
  #  endif
  # endif
  # ifndef LdPostLib
  #  if defined(UsrLibDir) && !HasLdRunPath
! #   define LdPostLib  -L$(USRLIBDIR)
  #  else
! #   define LdPostLib  /**/
  #  endif
  # endif
  
--- 933,967 ----
   * UseInstalled is defined.
   */
  # ifndef HasLdRunPath
! #  define HasLdRunPath	NO
  # endif
  
  # ifndef TopIncludes
  #  ifdef IncRoot
! #   define TopIncludes	-I$(INCROOT)
  #  else
! #   define TopIncludes	/**/
  #  endif
  # endif
  # ifndef ClientLibDir
  #  if defined(UsrLibDir) || HasLdRunPath
! #   define ClientLibDir	/**/
  #  else
! #   define ClientLibDir	-L$(USRLIBDIR)
  #  endif
  # endif
  # ifndef LdPreLib
  #  if defined(LdPostLib) && defined(UsrLibDir) && !HasLdRunPath
! #   define LdPreLib	-L$(USRLIBDIR)
  #  else
! #   define LdPreLib	/**/
  #  endif
  # endif
  # ifndef LdPostLib
  #  if defined(UsrLibDir) && !HasLdRunPath
! #   define LdPostLib	-L$(USRLIBDIR)
  #  else
! #   define LdPostLib	/**/
  #  endif
  # endif
  
***************
*** 424,433 ****
  LINKKITDIR = LinkKitDir
  XF98LINKKITDIR = LinkKitDir
  
- #ifndef HasDlsymBug
- #define HasDlsymBug		NO
- #endif
- 
  /*
   * Some commonly refered to directories are defined here.
   */
--- 990,995 ----
***************
*** 470,476 ****
  #ifdef SiteIConfigFiles
  #undef SiteIConfigFiles
  #endif
! #define SiteIConfigFiles $(TOP)/xf86site.def $(TOP)/Imakefile $(IRULESSRC)/host.def
  #else
         XF86SRC = $(SERVERSRC)/hw/xfree86
    XF86ACCELSRC = $(XF86SRC)/accel
--- 1032,1038 ----
  #ifdef SiteIConfigFiles
  #undef SiteIConfigFiles
  #endif
! #define SiteIConfigFiles $(TOP)/xf86site.def $(TOP)/Imakefile $(IRULESRC)/host.def
  #else
         XF86SRC = $(SERVERSRC)/hw/xfree86
    XF86ACCELSRC = $(XF86SRC)/accel
***************
*** 485,490 ****
--- 1047,1057 ----
     S3DRIVERSRC = $(XF86SRC)/accel/s3/drivers
    S3VDRIVERSRC = $(XF86SRC)/accel/s3_virge/drivers
  
+        XF68SRC = $(SERVERSRC)/hw/xfree68
+     XF68COMSRC = $(XF68SRC)/common
+  XF68CONFIGSRC = $(XF68COMSRC)
+      XF68OSSRC = $(XF68SRC)/os-support
+ 
             XF98SRC = $(SERVERSRC)/hw/xfree98
        XF98ACCELSRC = $(XF98SRC)/accel
          XF98COMSRC = $(XF98SRC)/common
***************
*** 493,498 ****
--- 1060,1066 ----
        XF98HWNECSRC = $(XF98SRC)/common_hw/nec
      XF98HWPWSKBSRC = $(XF98SRC)/common_hw/pwskb
       XF98HWPWLBSRC = $(XF98SRC)/common_hw/pwlb
+     XF98HWGA968SRC = $(XF98SRC)/common_hw/ga968
           XF98OSSRC = $(XF98SRC)/os-support
    XF98VGADRIVERSRC = $(XF98SRC)/vga256/drivers
  XF98VGA16DRIVERSRC = $(XF98SRC)/vga16/drivers
***************
*** 501,516 ****
  XF98NECS3DRIVERSRC = $(XF98SRC)/accel/s3nec/drivers
  XF98PWSKBDRIVERSRC = $(XF98SRC)/accel/s3pwskb/drivers
   XF98PWLBDRIVERSRC = $(XF98SRC)/accel/s3pwlb/drivers
  #endif
  
  /*
   * Installed location of the XFree86 documentation
   */
  
!         XFREE86DOCDIR = $(LIBDIR)/doc
!       XFREE86PSDOCDIR = $(XFREE86DOCDIR)/PostScript
!     XFREE86HTMLDOCDIR = $(XFREE86DOCDIR)/html
! XFREE86JAPANESEDOCDIR = $(XFREE86DOCDIR)/Japanese
  
  /*
   * Other stuff used in the X Server source.
--- 1069,1085 ----
  XF98NECS3DRIVERSRC = $(XF98SRC)/accel/s3nec/drivers
  XF98PWSKBDRIVERSRC = $(XF98SRC)/accel/s3pwskb/drivers
   XF98PWLBDRIVERSRC = $(XF98SRC)/accel/s3pwlb/drivers
+ XF98GA968DRIVERSRC = $(XF98SRC)/accel/s3ga968/drivers
  #endif
  
  /*
   * Installed location of the XFree86 documentation
   */
  
!         XFREE86DOCDIR = $(DOCDIR)
!       XFREE86PSDOCDIR = $(DOCPSDIR)
!     XFREE86HTMLDOCDIR = $(DOCHTMLDIR)
! XFREE86JAPANESEDOCDIR = $(DOCDIR)/Japanese
  
  /*
   * Other stuff used in the X Server source.
***************
*** 520,543 ****
  #define AsmDefines /**/
  #endif
  
  #ifndef XFree86Version
! #define XFree86Version	3310
  #endif
  
  #ifndef XVendorString
! #define XVendorString	"The Open Group / The XFree86 Project, Inc"
  #endif
  
- #if 0
  #ifndef XVendorRelease
  #define XVendorRelease	XFree86Version
  #endif
- #endif
  
  #ifndef UseRgbTxt
  #define UseRgbTxt	YES
  #endif
  
  
  /*
   * GNU Compiler stuff
--- 1089,1117 ----
  #define AsmDefines /**/
  #endif
  
+ #ifndef OtherIConfigFiles
+ #define OtherIConfigFiles $(IRULESRC)/xfree86.cf $(IRULESRC)/xf86.rules
+ #endif
+ 
  #ifndef XFree86Version
! #define XFree86Version	3360
  #endif
  
  #ifndef XVendorString
! #define XVendorString	"The XFree86 Project, Inc"
  #endif
  
  #ifndef XVendorRelease
  #define XVendorRelease	XFree86Version
  #endif
  
  #ifndef UseRgbTxt
  #define UseRgbTxt	YES
  #endif
  
+ #ifndef ManSuffix
+ #define ManSuffix	1
+ #endif
  
  /*
   * GNU Compiler stuff
***************
*** 555,563 ****
  #if HasGcc
  #ifndef DefaultCCOptions
  #ifdef UseInstalled
! #define DefaultCCOptions -ansi
  #else
! #define DefaultCCOptions -ansi -pedantic
  #endif
  #endif
  #endif
--- 1129,1142 ----
  #if HasGcc
  #ifndef DefaultCCOptions
  #ifdef UseInstalled
! #define DefaultCCOptions /* -ansi */
  #else
! #define DefaultCCOptions /* -ansi -pedantic */
! #endif
! #endif
! #if defined(UseInstalled) || XF86LinkKit
! #ifndef UseGccMakeDepend
! #define UseGccMakeDepend YES
  #endif
  #endif
  #endif
***************
*** 568,581 ****
  #endif
  #endif
  
! #ifndef BuildLBXCompatible
! #define BuildLBXCompatible NO
  #endif
  
! #if BuildLBXCompatible
! #define LbxDefines -DLBX_COMPAT
  #endif
- 
- #define VidTuneExtensionDefines -DXF86VIDMODE
  
  #include <xf86.rules>
--- 1147,1158 ----
  #endif
  #endif
  
! #ifndef DontDefineXF86Contrib
! #define XF86Contrib
  #endif
  
! #ifndef HasMktemp
! #define HasMktemp	YES
  #endif
  
  #include <xf86.rules>
*** motif.orig/config/imake/ccimake.c	Tue May  2 12:17:52 2000
--- motif/config/imake/ccimake.c	Sat Jun  3 18:34:05 2000
***************
*** 1,41 ****
! /* $TOG: ccimake.c /main/16 1998/02/06 11:02:20 kaleb $ */
  /*
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
!  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
!  
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
!  
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
!  
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
--- 1,28 ----
! /* $XConsortium: ccimake.c /main/15 1996/09/28 16:14:25 rws $ */
  /*
! 
! Copyright (c) 1993, 1994  X Consortium
! 
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
! 
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
! 
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
  
*** motif.orig/config/imake/imake.c	Tue May  2 12:18:40 2000
--- motif/config/imake/imake.c	Sat Jun  3 18:34:05 2000
***************
*** 1,4 ****
! /* $TOG: imake.c /main/104 1998/03/24 12:45:15 kaleb $ */
  
  /***************************************************************************
   *                                                                         *
--- 1,4 ----
! /* $TOG: imake.c /main/97 1997/06/20 20:23:51 kaleb $ */
  
  /***************************************************************************
   *                                                                         *
***************
*** 8,54 ****
   * be passed to the template file.                                         *
   *                                                                         *
   ***************************************************************************/
  
  /*
  
- @OPENGROUP_COPYRIGHT@
- COPYRIGHT NOTICE
- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
- Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
- ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
- the full copyright text.
-  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
-  
- This software is subject to an open license. It may only be
- used on, with or for operating systems which are themselves open
- source systems. You must contact The Open Group for a license
- allowing distribution and sublicensing of this software on, with,
- or for operating systems which are not Open Source programs.
-  
- See http://www.opengroup.org/openmotif/license for full
- details of the license agreement. Any use, reproduction, or
- distribution of the program constitutes recipient's acceptance of
- this agreement.
-  
- EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
- PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
- KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
- WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
- OR FITNESS FOR A PARTICULAR PURPOSE
-  
- EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
- NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
- INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
- AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
- ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
- EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
- POSSIBILITY OF SUCH DAMAGES.
  
!  * 
   * 
   * Original Author:
   *	Todd Brunhoff
--- 8,39 ----
   * be passed to the template file.                                         *
   *                                                                         *
   ***************************************************************************/
+ /* $XFree86: xc/config/imake/imake.c,v 3.13.2.23 1999/12/20 12:55:40 hohndel Exp $ */
  
  /*
+  * 
+ Copyright (c) 1985, 1986, 1987  X Consortium
+ 
+ Permission is hereby granted, free of charge, to any person obtaining a copy
+ of this software and associated documentation files (the "Software"), to deal
+ in the Software without restriction, including without limitation the rights
+ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+ copies of the Software, and to permit persons to whom the Software is
+ furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
   * 
   * Original Author:
   *	Todd Brunhoff
***************
*** 119,124 ****
--- 104,112 ----
   *	- If DEFAULT_OS_TEENY_REV is defined, format the utsname struct
   *	  and call the result <defaultOsTeenyVersion>.  Add:
   *		#define DefaultOSTeenyVersion <defaultOsTeenyVersion>
+  *      - If DEFAULT_MACHINE_ARCITECTURE is defined, format the utsname struct
+  *        and define the corresponding macro. (For example on the amiga,
+  *        this will define amiga in addition to m68k).    
   *	- If the file "localdefines" is readable in the current
   *	  directory, print a warning message to stderr and add: 
   *		#define IMAKE_LOCAL_DEFINES	"localdefines"
***************
*** 157,165 ****
   *	#include INCLUDE_IMAKEFILE
   *	<add any global targets like 'clean' and long dependencies>
   */
  #include <stdio.h>
- #include <ctype.h>
  #include "Xosdefs.h"
  #ifdef WIN32
  # include "Xw32defs.h"
  #endif
--- 145,162 ----
   *	#include INCLUDE_IMAKEFILE
   *	<add any global targets like 'clean' and long dependencies>
   */
+ #if defined(__FreeBSD__) || defined(__NetBSD__)
+ /* This needs to be before _POSIX_SOURCE gets defined */
+ # include <sys/param.h>
+ # include <sys/types.h>
+ # include <sys/sysctl.h>
+ #endif
  #include <stdio.h>
  #include "Xosdefs.h"
+ #ifndef X_NOT_STDC_ENV
+ #include <string.h>
+ #endif
+ #include <ctype.h>
  #ifdef WIN32
  # include "Xw32defs.h"
  #endif
***************
*** 177,182 ****
--- 174,182 ----
  #else
  # include <unistd.h>
  #endif
+ #ifdef ISC
+ # include <unistd.h>
+ #endif
  #if defined(X_NOT_POSIX) || defined(_POSIX_SOURCE)
  # include <signal.h>
  #else
***************
*** 184,192 ****
--- 184,199 ----
  # include <signal.h>
  # undef _POSIX_SOURCE
  #endif
+ #if !defined(SIGCHLD) && defined(SIGCLD)
+ # define SIGCHLD		SIGCLD
+ #endif
  #include <sys/stat.h>
  #ifndef X_NOT_POSIX
  # ifdef _POSIX_SOURCE
+ #  ifdef SCO325
+ #   include <sys/procset.h>
+ #   include <sys/siginfo.h>
+ #  endif
  #  include <sys/wait.h>
  # else
  #  define _POSIX_SOURCE
***************
*** 235,244 ****
  #ifdef X_NOT_STDC_ENV
  extern int	errno;
  #endif
  #ifndef WIN32
  #include <sys/utsname.h>
- #else
- #include <windows.h>
  #endif
  #ifndef SYS_NMLN
  # ifdef _SYS_NMLN
--- 242,259 ----
  #ifdef X_NOT_STDC_ENV
  extern int	errno;
  #endif
+ #ifdef __minix_vmd
+ #define USE_FREOPEN		1
+ #endif
+ 
+ #if !(defined(X_NOT_STDC_ENV) || (defined(sun) && !defined(SVR4)) || defined(macII))
+ #define USE_STRERROR		1
+ #endif
+ #ifdef __EMX__
+ #define USE_STRERROR		1
+ #endif
  #ifndef WIN32
  #include <sys/utsname.h>
  #endif
  #ifndef SYS_NMLN
  # ifdef _SYS_NMLN
***************
*** 250,255 ****
--- 265,274 ----
  #ifdef linux
  #include <limits.h>
  #endif
+ #ifdef __QNX__
+ #include <unix.h>
+ #endif
+ 
  /* 
   * is strstr() in <strings.h> on X_NOT_STDC_ENV? 
   * are there any X_NOT_STDC_ENV machines left in the world?
***************
*** 261,267 ****
   * This define of strerror is copied from (and should be identical to)
   * Xos.h, which we don't want to include here for bootstrapping reasons.
   */
! #if defined(X_NOT_STDC_ENV) || (defined(sun) && !defined(SVR4)) || defined(macII)
  # ifndef strerror
  extern char *sys_errlist[];
  extern int sys_nerr;
--- 280,286 ----
   * This define of strerror is copied from (and should be identical to)
   * Xos.h, which we don't want to include here for bootstrapping reasons.
   */
! #ifndef USE_STRERROR
  # ifndef strerror
  extern char *sys_errlist[];
  extern int sys_nerr;
***************
*** 270,275 ****
--- 289,302 ----
  # endif
  #endif
  
+ #if defined(__NetBSD__)		/* see code clock in init() below */
+ #include <sys/utsname.h>
+ #endif
+ 
+ #if !(defined(Lynx) || defined(__Lynx__) || (defined(SVR4) && !defined(sun)))
+ #define HAS_MKSTEMP
+ #endif
+ 
  #define	TRUE		1
  #define	FALSE		0
  
***************
*** 371,381 ****
  
  	Imakefile = FindImakefile(Imakefile);
  	CheckImakefileC(ImakefileC);
! 	if (Makefile)
! 		tmpMakefile = Makefile;
! 	else {
  		tmpMakefile = Strdup(tmpMakefile);
! 		(void) mktemp(tmpMakefile);
  	}
  	AddMakeArg("-f");
  	AddMakeArg( tmpMakefile );
--- 398,424 ----
  
  	Imakefile = FindImakefile(Imakefile);
  	CheckImakefileC(ImakefileC);
! 	if (Makefile) {
!                 tmpMakefile = Makefile;
!                 if ((tmpfd = fopen(tmpMakefile, "w+")) == NULL)
!                    LogFatal("Cannot create temporary file %s.", tmpMakefile);
! 	} else {
! 	        int fd;
  		tmpMakefile = Strdup(tmpMakefile);
! #ifndef HAS_MKSTEMP
! 		if (mktemp(tmpMakefile) == NULL ||
! 		    (tmpfd = fopen(tmpMakefile, "w+")) == NULL) {
! 		   LogFatal("Cannot create temporary file %s.", tmpMakefile);
! 		}
! #else
! 	        fd = mkstemp(tmpMakefile);
! 	        if (fd == -1 || (tmpfd = fdopen(fd, "w+")) == NULL) {
! 		   if (fd != -1) {
! 		      unlink(tmpMakefile); close(fd);
! 		   }
! 		   LogFatal("Cannot create temporary file %s.", tmpMakefile);
! 		}
! #endif
  	}
  	AddMakeArg("-f");
  	AddMakeArg( tmpMakefile );
***************
*** 384,392 ****
  	sprintf(makefileMacro, "MAKEFILE=%s", Imakefile);
  	AddMakeArg( makefileMacro );
  
- 	if ((tmpfd = fopen(tmpMakefile, "w+")) == NULL)
- 		LogFatal("Cannot create temporary file %s.", tmpMakefile);
- 
  	cleanedImakefile = CleanCppInput(Imakefile);
  	cppit(cleanedImakefile, Template, ImakefileC, tmpfd, tmpMakefile);
  
--- 427,432 ----
***************
*** 451,456 ****
--- 491,517 ----
  	while (cpp_argv[ cpp_argindex ] != NULL)
  		cpp_argindex++;
  
+ #if defined(__NetBSD__)
+ 	{
+ 		struct utsname uts;
+ 		static char argument[512];
+ 
+ 		/*
+ 		 * Sharable imake configurations require a
+ 		 * machine identifier.
+ 		 */
+ 		if (uname(&uts) != 0)
+ 			LogFatal("uname(3) failed; can't tell what %s",
+ 			    "kind of machine you have.");
+ 
+ 		memset(argument, 0, sizeof(argument));
+ 		(void)snprintf(argument, sizeof(argument) - 1,
+ 		    "-D__%s__", uts.machine);
+ 
+ 		AddCppArg(argument);
+ 	}
+ #endif /* __NetBSD__ */
+ 
  	/*
  	 * See if the standard include directory is different than
  	 * the default.  Or if cpp is not the default.  Or if the make
***************
*** 474,479 ****
--- 535,543 ----
  
  	if (signal(SIGINT, SIG_IGN) != SIG_IGN)
  		signal(SIGINT, catch);
+ #ifdef SIGCHLD
+ 	signal(SIGCHLD, SIG_DFL);
+ #endif
  }
  
  void
***************
*** 516,521 ****
--- 580,587 ----
  		    AddCppArg(argv[0]);
  		} else if (argv[0][1] == 'I') {
  		    AddCppArg(argv[0]);
+ 		} else if (argv[0][1] == 'U') {
+ 		    AddCppArg(argv[0]);
  		} else if (argv[0][1] == 'f') {
  		    if (argv[0][2])
  			Imakefile = argv[0]+2;
***************
*** 604,610 ****
  	int i;
  {
  	/*NOSTRICT*/
! 	LogFatal(s, (char *)i);
  }
  
  void
--- 670,676 ----
  	int i;
  {
  	/*NOSTRICT*/
! 	LogFatal(s, (char *)(long)i);
  }
  
  void
***************
*** 825,868 ****
  }
  #endif
  
- #ifdef linux
- static void get_distrib(inFile)
-   FILE* inFile;
- {
-   struct stat sb;
- 
-   static char* yast = "/sbin/YaST";
-   static char* redhat = "/etc/redhat-release";
- 
-   fprintf (inFile, "%s\n", "#define LinuxUnknown    0");
-   fprintf (inFile, "%s\n", "#define LinuxSuSE       1");
-   fprintf (inFile, "%s\n", "#define LinuxCaldera    2");
-   fprintf (inFile, "%s\n", "#define LinuxCraftworks 3");
-   fprintf (inFile, "%s\n", "#define LinuxDebian     4");
-   fprintf (inFile, "%s\n", "#define LinuxInfoMagic  5");
-   fprintf (inFile, "%s\n", "#define LinuxKheops     6");
-   fprintf (inFile, "%s\n", "#define LinuxPro        7");
-   fprintf (inFile, "%s\n", "#define LinuxRedHat     8");
-   fprintf (inFile, "%s\n", "#define LinuxSlackware  9");
-   fprintf (inFile, "%s\n", "#define LinuxTurbo      10");
-   fprintf (inFile, "%s\n", "#define LinuxWare       11");
-   fprintf (inFile, "%s\n", "#define LinuxYggdrasil  12");
- 
-   if (lstat (yast, &sb) == 0) {
-     fprintf (inFile, "%s\n", "#define DefaultLinuxDistribution LinuxSuSE");
-     return;
-   }
-   if (lstat (redhat, &sb) == 0) {
-     fprintf (inFile, "%s\n", "#define DefaultLinuxDistribution LinuxRedHat");
-     return;
-   }
-   /* what's the definitive way to tell what any particular distribution is? */
- 
-   fprintf (inFile, "%s\n", "#define DefaultLinuxDistribution LinuxUnknown");
-   /* would like to know what version of the distribution it is */
- }
  
! static const char *libc_c=
  "#include <stdio.h>\n"
  "#include <ctype.h>\n"
  "\n"
--- 891,899 ----
  }
  #endif
  
  
! #ifdef linux
! const char *libc_c=
  "#include <stdio.h>\n"
  "#include <ctype.h>\n"
  "\n"
***************
*** 930,1000 ****
  static void get_libc_version(inFile)
    FILE* inFile;
  {
!   static char* libcso = "/usr/lib/libc.so";
!   struct stat sb;
!   char buf[PATH_MAX];
!   char* ptr;
!   int libcmajor, libcminor, libcteeny;
! 
!   if (lstat (libcso, &sb) == 0) {
!     if (S_ISLNK (sb.st_mode)) {
!       /* 
!        * /usr/lib/libc.so is a symlink -- this is libc 5.x
!        * we can do this the quick way
!         */
!       if (readlink (libcso, buf, PATH_MAX) >= 0) {
! 	for (ptr = buf; *ptr && !isdigit (*ptr); ptr++);
! 	  (void) sscanf (ptr, "%d.%d.%d", &libcmajor, &libcminor, &libcteeny);
! 	  fprintf(inFile, "#define DefaultLinuxCLibMajorVersion %d\n", libcmajor);    
! 	  fprintf(inFile, "#define DefaultLinuxCLibMinorVersion %d\n", libcminor);    
! 	  fprintf(inFile, "#define DefaultLinuxCLibTeenyVersion %d\n", libcteeny);    
!       }
!     } else {
!       /* 
!        * /usr/lib/libc.so is NOT a symlink -- this is libc 6.x / glibc 2.x
!        * now we have to figure this out the hard way.
!        */
!       char *aout = tmpnam (NULL);
!       FILE *fp;
!       const char *format = "%s -o %s -x c -";
!       char *cc;
!       int len;
!       char *command;
! 
!       cc = getenv ("CC");
!       if (cc == NULL)
! 	cc = "gcc";
!       len = strlen (aout) + strlen (format) + strlen (cc);
!       if (len < 128) len = 128;
!       command = alloca (len);
! 
!       if (snprintf (command , len, format, cc, aout) == len)
! 	abort ();
! 
!       fp = popen (command, "w");
!       if (fp == NULL || fprintf (fp, "%s\n", libc_c) < 0 || pclose (fp) != 0)
! 	abort ();
! 
!       fp = popen (aout, "r");
!       if (fp == NULL)
! 	abort ();
  
!       while (fgets (command, len, fp))
! 	fprintf (inFile, command);
    
!       len = pclose (fp);
!       remove (aout);
!       if (len)
! 	abort ();
!     }
!   }
  }
  
  static void get_ld_version(inFile)
    FILE* inFile;
  {
    FILE* ldprog = popen ("ld -v", "r");
!   char c;
    int ldmajor, ldminor;
  
    if (ldprog) {
--- 961,1006 ----
  static void get_libc_version(inFile)
    FILE* inFile;
  {
!   char *aout = tmpnam (NULL);
!   FILE *fp;
!   const char *format = "%s -o %s -x c -";
!   char *cc;
!   int len;
!   char *command;
! 
!   cc = getenv ("CC");
!   if (cc == NULL)
!     cc = "gcc";
!   len = strlen (aout) + strlen (format) + strlen (cc);
!   if (len < 128) len = 128;
!   command = alloca (len);
! 
!   if (snprintf (command , len, format, cc, aout) == len)
!     abort ();
! 
!   fp = popen (command, "w");
!   if (fp == NULL || fprintf (fp, "%s\n", libc_c) < 0
!       || pclose (fp) != 0)
!     abort ();
! 
!   fp = popen (aout, "r");
!   if (fp == NULL)
!     abort ();
  
!   while (fgets (command, len, fp))
!     fprintf (inFile, command);
    
!   len = pclose (fp);
!   remove (aout);
!   if (len)
!     abort ();
  }
  
  static void get_ld_version(inFile)
    FILE* inFile;
  {
    FILE* ldprog = popen ("ld -v", "r");
!   signed char c;
    int ldmajor, ldminor;
  
    if (ldprog) {
***************
*** 1010,1078 ****
  }
  #endif
  
! #ifndef PATH_MAX
! #define PATH_MAX 1024
! #endif
! 
! #if defined(sun) && defined(__SVR4)
! static void get_sun_compiler_versions (inFile)
!   FILE* inFile;
  {
!   char buf[PATH_MAX];
!   char cmd[PATH_MAX];
!   static char* sunpro_cc = "/opt/SUNWspro/bin/cc";
!   static char* sunpro_CC = "/opt/SUNWspro/bin/CC";
!   int cmajor, cminor;
!   char* vptr;
!   struct stat sb;
!   FILE* ccproc;
  
!   if (lstat (sunpro_cc, &sb) == 0) {
!     strcpy (cmd, sunpro_cc);
!     strcat (cmd, " -V 2>&1");
!     if ((ccproc = popen (cmd, "r")) != NULL) {
!       if (fgets (buf, PATH_MAX, ccproc) != NULL) {
! 	vptr = strrchr (buf, 'C');
! 	for (; !isdigit(*vptr); vptr++);
! 	(void) sscanf (vptr, "%d.%d", &cmajor, &cminor);
! 	fprintf (inFile, 
! 		 "#define DefaultSunProCCompilerMajorVersion %d\n",
! 		 cmajor);
! 	fprintf (inFile, 
! 		 "#define DefaultSunProCCompilerMinorVersion %d\n",
! 		 cminor);
!       }
!       while (fgets (buf, PATH_MAX, ccproc) != NULL) {};
!       pclose (ccproc);
!     }
!   }
!   if (lstat (sunpro_CC, &sb) == 0) {
!     strcpy (cmd, sunpro_CC);
!     strcat (cmd, " -V 2>&1");
!     if ((ccproc = popen (cmd, "r")) != NULL) {
!       if (fgets (buf, PATH_MAX, ccproc) != NULL) {
! 	vptr = strrchr (buf, 'C');
! 	for (; !isdigit(*vptr); vptr++);
! 	(void) sscanf (vptr, "%d.%d", &cmajor, &cminor);
! 	fprintf (inFile, 
! 		 "#define DefaultSunProCplusplusCompilerMajorVersion %d\n",
! 		 cmajor);
! 	fprintf (inFile, 
! 		 "#define DefaultSunProCplusplusCompilerMinorVersion %d\n",
! 		 cminor);
!       }
!       while (fgets (buf, PATH_MAX, ccproc) != NULL) {};
!       pclose (ccproc);
!     }
!   }
  }
  #endif
  
  static void get_gcc_incdir(inFile)
    FILE* inFile;
  {
    static char* gcc_path[] = {
! #ifdef linux
      "/usr/bin/cc",	/* for Linux PostIncDir */
  #endif
      "/usr/local/bin/gcc",
--- 1016,1058 ----
  }
  #endif
  
! #ifdef __FreeBSD__
! static void
! get_binary_format(FILE *inFile)
  {
!   int mib[2];
!   size_t len;
!   int osrel = 0;
!   FILE *objprog = NULL;
!   int iself = 0;
!   char buf[10];
! 
!   mib[0] = CTL_KERN;
!   mib[1] = KERN_OSRELDATE;
!   len = sizeof(osrel);
!   sysctl(mib, 2, &osrel, &len, NULL, 0);
!   if (osrel >= 300004 &&
!       (objprog = popen("objformat", "r")) != NULL &&
!       fgets(buf, sizeof(buf), objprog) != NULL &&
!       strncmp(buf, "elf", 3) == 0)
!     iself = 1;
!   if (objprog)
!     pclose(objprog);
  
!   fprintf(inFile, "#define DefaultToElfFormat %s\n", iself ? "YES" : "NO");
  }
  #endif
  
+ #ifndef PATH_MAX
+ #define PATH_MAX 1024
+ #endif
+ 
+ #ifndef __EMX__
  static void get_gcc_incdir(inFile)
    FILE* inFile;
  {
    static char* gcc_path[] = {
! #if defined(linux) || defined(__OpenBSD__)
      "/usr/bin/cc",	/* for Linux PostIncDir */
  #endif
      "/usr/local/bin/gcc",
***************
*** 1103,1114 ****
    if (buf[0])
      fprintf (inFile, "#define DefaultGccIncludeDir %s\n", buf);
  }
  
  boolean
  define_os_defaults(inFile)
  	FILE	*inFile;
  {
! #ifndef WIN32
  #if (defined(DEFAULT_OS_NAME) || defined(DEFAULT_OS_MAJOR_REV) || \
       defined(DEFAULT_OS_MINOR_REV) || defined(DEFAUL_OS_TEENY_REV))
  	struct utsname name;
--- 1083,1095 ----
    if (buf[0])
      fprintf (inFile, "#define DefaultGccIncludeDir %s\n", buf);
  }
+ #endif
  
  boolean
  define_os_defaults(inFile)
  	FILE	*inFile;
  {
! #if !defined(WIN32) && !defined(__EMX__)
  #if (defined(DEFAULT_OS_NAME) || defined(DEFAULT_OS_MAJOR_REV) || \
       defined(DEFAULT_OS_MINOR_REV) || defined(DEFAUL_OS_TEENY_REV))
  	struct utsname name;
***************
*** 1121,1126 ****
--- 1102,1110 ----
  # ifdef DEFAULT_OS_NAME
  	parse_utsname(&name, DEFAULT_OS_NAME, buf, 
  		      "Bad DEFAULT_OS_NAME syntax %s");
+ #  ifdef DEFAULT_OS_NAME_FROB
+ 	DEFAULT_OS_NAME_FROB(buf, sizeof buf);
+ #  endif
  	if (buf[0] != '\0')
  		fprintf(inFile, "#define DefaultOSName %s\n", buf);
  # endif
***************
*** 1128,1177 ****
  # ifdef DEFAULT_OS_MAJOR_REV
  	parse_utsname(&name, DEFAULT_OS_MAJOR_REV, buf,
  		      "Bad DEFAULT_OS_MAJOR_REV syntax %s");
! 	fprintf(inFile, "#define DefaultOSMajorVersion %s\n", 
  		*buf ? trim_version(buf) : "0");
  # endif
  
  # ifdef DEFAULT_OS_MINOR_REV
  	parse_utsname(&name, DEFAULT_OS_MINOR_REV, buf,
  		      "Bad DEFAULT_OS_MINOR_REV syntax %s");
! 	fprintf(inFile, "#define DefaultOSMinorVersion %s\n", 
  		*buf ? trim_version(buf) : "0");
  # endif
  
  # ifdef DEFAULT_OS_TEENY_REV
  	parse_utsname(&name, DEFAULT_OS_TEENY_REV, buf,
  		      "Bad DEFAULT_OS_TEENY_REV syntax %s");
! 	fprintf(inFile, "#define DefaultOSTeenyVersion %s\n", 
  		*buf ? trim_version(buf) : "0");
  # endif
  #endif
  #ifdef linux
-     get_distrib (inFile);
      get_libc_version (inFile);
      get_ld_version(inFile);
  #endif
      get_gcc_incdir(inFile);
! #if defined (sun) && defined(SVR4)
!     get_sun_compiler_versions (inFile);
  #endif
- #else /* WIN32 */
-    OSVERSIONINFO osvi;
-    static char* os_names[] = { "Win32s", "Windows 95", "Windows NT" };
- 
-    memset(&osvi, 0, sizeof(OSVERSIONINFO));
-    osvi.dwOSVersionInfoSize = sizeof (OSVERSIONINFO);
-    GetVersionEx (&osvi);
- 
-    fprintf (inFile, "#define DefaultOSName Microsoft %s\n", 
- 	    os_names[osvi.dwPlatformId]);
- 
-    fprintf(inFile, "#define DefaultOSMajorVersion %d\n", osvi.dwMajorVersion);
-    fprintf(inFile, "#define DefaultOSMinorVersion %d\n", osvi.dwMinorVersion);
-    fprintf(inFile, "#define DefaultOSTeenyVersion %d\n", 
- 	   osvi.dwBuildNumber & 0xFFFF);
  #endif /* WIN32 */
!    return FALSE;
  }
  
  void
--- 1112,1159 ----
  # ifdef DEFAULT_OS_MAJOR_REV
  	parse_utsname(&name, DEFAULT_OS_MAJOR_REV, buf,
  		      "Bad DEFAULT_OS_MAJOR_REV syntax %s");
! #  ifdef DEFAULT_OS_MAJOR_REV_FROB
! 	DEFAULT_OS_MAJOR_REV_FROB(buf, sizeof buf);
! #  endif
! 	fprintf(inFile, "#define DefaultOSMajorVersion %s\n",
  		*buf ? trim_version(buf) : "0");
  # endif
  
  # ifdef DEFAULT_OS_MINOR_REV
  	parse_utsname(&name, DEFAULT_OS_MINOR_REV, buf,
  		      "Bad DEFAULT_OS_MINOR_REV syntax %s");
! #  ifdef DEFAULT_OS_MINOR_REV_FROB
! 	DEFAULT_OS_MINOR_REV_FROB(buf, sizeof buf);
! #  endif
! 	fprintf(inFile, "#define DefaultOSMinorVersion %s\n",
  		*buf ? trim_version(buf) : "0");
  # endif
  
  # ifdef DEFAULT_OS_TEENY_REV
  	parse_utsname(&name, DEFAULT_OS_TEENY_REV, buf,
  		      "Bad DEFAULT_OS_TEENY_REV syntax %s");
! #  ifdef DEFAULT_OS_TEENY_REV_FROB
! 	DEFAULT_OS_TEENY_REV_FROB(buf, sizeof buf);
! #  endif
! 	fprintf(inFile, "#define DefaultOSTeenyVersion %s\n",
  		*buf ? trim_version(buf) : "0");
  # endif
+ # ifdef DEFAULT_MACHINE_ARCHITECTURE
+ 	parse_utsname(&name, DEFAULT_MACHINE_ARCHITECTURE, buf, 
+ 		      "Bad DEFAULT_MACHINE_ARCHITECTURE %s");
+ 	fprintf(inFile, "#ifndef %s\n# define %s\n#endif\n", buf, buf);
+ # endif
  #endif
  #ifdef linux
      get_libc_version (inFile);
      get_ld_version(inFile);
  #endif
      get_gcc_incdir(inFile);
! #ifdef __FreeBSD__
!     get_binary_format(inFile);
  #endif
  #endif /* WIN32 */
! 	return FALSE;
  }
  
  void
***************
*** 1269,1280 ****
  		    strcmp(ptoken, "pragma") &&
  		    strcmp(ptoken, "undef")) {
  		    if (outFile == NULL) {
  			tmpImakefile = Strdup(tmpImakefile);
! 			(void) mktemp(tmpImakefile);
! 			outFile = fopen(tmpImakefile, "w");
! 			if (outFile == NULL)
  			    LogFatal("Cannot open %s for write.",
  				tmpImakefile);
  		    }
  		    writetmpfile(outFile, punwritten, pbuf-punwritten,
  				 tmpImakefile);
--- 1251,1276 ----
  		    strcmp(ptoken, "pragma") &&
  		    strcmp(ptoken, "undef")) {
  		    if (outFile == NULL) {
+ 		        int fd;
  			tmpImakefile = Strdup(tmpImakefile);
! #ifndef HAS_MKSTEMP
! 			if (mktemp(tmpImakefile) == NULL ||
! 			    (outFile = fopen(tmpImakefile, "w+")) == NULL) {
  			    LogFatal("Cannot open %s for write.",
  				tmpImakefile);
+ 			}
+ #else
+ 			fd=mkstemp(tmpImakefile);
+ 			if (fd != -1)
+ 			    outFile = fdopen(fd, "w");
+ 			if (outFile == NULL) {
+ 			    if (fd != -1) {
+ 			       unlink(tmpImakefile); close(fd);
+ 			    }
+ 			    LogFatal("Cannot open %s for write.",
+ 				tmpImakefile);
+ 			}
+ #endif
  		    }
  		    writetmpfile(outFile, punwritten, pbuf-punwritten,
  				 tmpImakefile);
***************
*** 1436,1442 ****
  		end = buf + total_red;
  		*end = '\0';
  		fseek(tmpfd, 0, 0);
! #if defined(SYSV) || defined(WIN32)
  		tmpfd = freopen(tmpfname, "w+", tmpfd);
  #ifdef WIN32
  		if (! tmpfd) /* if failed try again */
--- 1432,1438 ----
  		end = buf + total_red;
  		*end = '\0';
  		fseek(tmpfd, 0, 0);
! #if defined(SYSV) || defined(WIN32) || defined(USE_FREOPEN)
  		tmpfd = freopen(tmpfname, "w+", tmpfd);
  #ifdef WIN32
  		if (! tmpfd) /* if failed try again */
***************
*** 1450,1456 ****
  		initialized = TRUE;
  	    fprintf (tmpfd, "# Makefile generated by imake - do not edit!\n");
  	    fprintf (tmpfd, "# %s\n",
! 		"$TOG: imake.c /main/104 1998/03/24 12:45:15 kaleb $");
  	}
  
  	for (p1 = pline; p1 < end; p1++) {
--- 1446,1452 ----
  		initialized = TRUE;
  	    fprintf (tmpfd, "# Makefile generated by imake - do not edit!\n");
  	    fprintf (tmpfd, "# %s\n",
! 		"$TOG: imake.c /main/97 1997/06/20 20:23:51 kaleb $");
  	}
  
  	for (p1 = pline; p1 < end; p1++) {
*** motif.orig/config/imake/Imakefile	Fri Apr 28 11:04:06 2000
--- motif/config/imake/Imakefile	Sat Jun  3 18:34:05 2000
***************
*** 1,4 ****
--- 1,9 ----
  XCOMM $TOG: Imakefile /main/10 1997/04/30 15:39:17 kaleb $
+ XCOMM
+ XCOMM
+ XCOMM
+ XCOMM
+ XCOMM $XFree86: xc/config/imake/Imakefile,v 3.6.2.1 1997/06/11 12:08:33 dawes Exp $
  
  XCOMM Some compilers generate fatal errors if an -L directory does
  XCOMM not exist.  Since BUILDLIBDIR may not exist yet suppress its use.
***************
*** 12,18 ****
  CPP_DEFINES = -DCPP_PROGRAM="\"$(CPP_PROGRAM)\""
  DEFINES = $(SIGNAL_DEFINES) $(BOOTSTRAPCFLAGS) $(CPP_DEFINES)
  
! #if defined(MacIIArchitecture) || defined(SequentArchitecture)
  XBSDLIB = /**/
  #endif
  
--- 17,23 ----
  CPP_DEFINES = -DCPP_PROGRAM="\"$(CPP_PROGRAM)\""
  DEFINES = $(SIGNAL_DEFINES) $(BOOTSTRAPCFLAGS) $(CPP_DEFINES)
  
! #if defined(MacIIArchitecture) || defined(SequentArchitecture) || defined(i386ScoArchitecture)
  XBSDLIB = /**/
  #endif
  
***************
*** 25,30 ****
--- 30,36 ----
  #else
  SimpleProgramTarget(imake)
  #endif
+ InstallLinkKitNamedProg(imake,imake,$(LINKKITDIR)/config/imake)
  
  #if HasClearmake
  bootstrapdepend: depend
*** motif.orig/config/imake/imake.man	Tue May  2 12:24:30 2000
--- motif/config/imake/imake.man	Sat Jun  3 18:34:05 2000
***************
*** 1,45 ****
! .\" $TOG: imake.man /main/30 1998/02/06 11:02:42 kaleb $
! .\" @OPENGROUP_COPYRIGHT@
! .\" COPYRIGHT NOTICE
! .\" Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! .\" Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! .\" ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! .\" the full copyright text.
! .\"  
! .\" The above copyright notice and this permission notice shall be included in
! .\" all copies or substantial portions of the Software.
  .\" 
! .\" This software is subject to an open license. It may only be
! .\" used on, with or for operating systems which are themselves open
! .\" source systems. You must contact The Open Group for a license
! .\" allowing distribution and sublicensing of this software on, with,
! .\" or for operating systems which are not Open Source programs.
  .\" 
! .\" See http://www.opengroup.org/openmotif/license for full
! .\" details of the license agreement. Any use, reproduction, or
! .\" distribution of the program constitutes recipient's acceptance of
! .\" this agreement.
  .\" 
! .\" EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! .\" PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! .\" KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! .\" WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! .\" OR FITNESS FOR A PARTICULAR PURPOSE
  .\" 
! .\" EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! .\" NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! .\" INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! .\" DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! .\" AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! .\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! .\" ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! .\" EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! .\" POSSIBILITY OF SUCH DAMAGES.
  .TH IMAKE 1 "Release 6.1" "X Version 11"
  .SH NAME
  imake \- C preprocessor interface to the make utility
  .SH SYNOPSIS
  \fBimake\fP [ \fB\-D\fP\fIdefine\fP ] [ \fB\-I\fP\fIdir\fP ]
  [ \fB\-T\fP\fItemplate\fP ]
  [ \fB\-f\fP \fIfilename\fP ] [ \fB\-C\fP \fIfilename\fP ]
  [ \fB\-s\fP \fIfilename\fP ] [ \fB\-e\fP ]
--- 1,37 ----
! .\" $XConsortium: imake.man /main/29 1996/09/28 16:14:42 rws $
! .\" Copyright (c) 1993, 1994  X Consortium
  .\" 
! .\" Permission is hereby granted, free of charge, to any person obtaining
! .\" a copy of this software and associated documentation files (the
! .\" "Software"), to deal in the Software without restriction, including
! .\" without limitation the rights to use, copy, modify, merge, publish,
! .\" distribute, sublicense, and/or sell copies of the Software, and to
! .\" permit persons to whom the Software is furnished to do so, subject to
! .\" the following conditions:
  .\" 
! .\" The above copyright notice and this permission notice shall be included
! .\" in all copies or substantial portions of the Software.
  .\" 
! .\" THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
! .\" OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
! .\" MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
! .\" IN NO EVENT SHALL THE X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR
! .\" OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
! .\" ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
! .\" OTHER DEALINGS IN THE SOFTWARE.
  .\" 
! .\" Except as contained in this notice, the name of the X Consortium shall
! .\" not be used in advertising or otherwise to promote the sale, use or
! .\" other dealings in this Software without prior written authorization
! .\" from the X Consortium.
! .\" $XFree86: xc/config/imake/imake.man,v 1.1.1.3.2.1 1998/11/06 13:54:19 dawes Exp $
! .\"
  .TH IMAKE 1 "Release 6.1" "X Version 11"
  .SH NAME
  imake \- C preprocessor interface to the make utility
  .SH SYNOPSIS
  \fBimake\fP [ \fB\-D\fP\fIdefine\fP ] [ \fB\-I\fP\fIdir\fP ]
+ [ \fB\-U\fP\fIdefine\fP ] 
  [ \fB\-T\fP\fItemplate\fP ]
  [ \fB\-f\fP \fIfilename\fP ] [ \fB\-C\fP \fIfilename\fP ]
  [ \fB\-s\fP \fIfilename\fP ] [ \fB\-e\fP ]
***************
*** 66,71 ****
--- 58,67 ----
  This option is passed directly to \fIcpp\fP.  It is typically used to 
  indicate the directory in which the \fIimake\fP template and configuration
  files may be found.
+ .TP 8
+ .B \-U\fIdefine\fP
+ This option is passed directly to \fIcpp\fP.  It is typically used to
+ unset variables when debugging \fIimake\fP configuration files.
  .TP 8
  .B \-T\fItemplate\fP
  This option specifies the name of the master template file (which is usually
*** motif.orig/config/imake/imakemdep.h	Tue May  2 12:25:22 2000
--- motif/config/imake/imakemdep.h	Sat Jun  3 18:34:05 2000
***************
*** 1,44 ****
! /* $TOG: imakemdep.h /main/102 1998/02/06 11:02:26 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
! 
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
  
  /* 
--- 1,31 ----
! /* $TOG: imakemdep.h /main/101 1997/06/06 09:13:20 bill $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
! 
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
! 
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
+ /* $XFree86: xc/config/imake/imakemdep.h,v 3.24.2.15 2000/01/06 04:58:58 dawes Exp $ */
  
  
  /* 
***************
*** 54,59 ****
--- 41,50 ----
   *     These will be passed to the compile along with the contents of the
   *     make variable BOOTSTRAPCFLAGS.
   */
+ #if defined(clipper) || defined(__clipper__)
+ #define imake_ccflags "-O -DSYSV -DBOOTSTRAPCFLAGS=-DSYSV"
+ #endif
+ 
  #ifdef hpux
  #ifdef hp9000s800
  #define imake_ccflags "-DSYSV"
***************
*** 79,85 ****
  #ifdef imake_ccflags
  #undef imake_ccflags
  #endif
! #define imake_ccflags "-Dsco"
  #endif
  
  #ifdef sony
--- 70,76 ----
  #ifdef imake_ccflags
  #undef imake_ccflags
  #endif
! #define imake_ccflags "-Dsco -DSYSV"
  #endif
  
  #ifdef sony
***************
*** 182,195 ****
--- 173,198 ----
  #endif
  
  #ifdef  MACH
+ #ifdef __GNU__
+ #define imake_ccflags ""
+ #else
  #define imake_ccflags "-DNOSTDHDRS"
  #endif
+ #endif
  
  /* this is for OS/2 under EMX. This won't work with DOS */
  #if defined(__EMX__)
  #define imake_ccflags "-DBSD43"
  #endif
  
+ #if defined(__QNX__) && !defined(__QNXNTO__)
+ #define imake_ccflags "-D__QNX__ -D_i386"
+ #endif
+ 
+ #if defined(__QNXNTO__)
+ #define imake_ccflags "-D__QNXNTO__"
+ #endif
+ 
  #else /* not CCIMAKE */
  #ifndef MAKEDEPEND
  /*
***************
*** 221,226 ****
--- 224,232 ----
  #define INLINE_SYNTAX
  #define MAGIC_MAKE_VARS
  #endif
+ #ifdef __minix_vmd
+ #define FIXUP_CPP_WHITESPACE
+ #endif
  
  /*
   * Step 4:  USE_CC_E, DEFAULT_CC, DEFAULT_CPP
***************
*** 238,243 ****
--- 244,252 ----
  #ifdef apollo
  #define DEFAULT_CPP "/usr/lib/cpp"
  #endif
+ #if defined(clipper) || defined(__clipper__)
+ #define DEFAULT_CPP "/usr/lib/cpp"
+ #endif
  #if defined(_IBMR2) && !defined(DEFAULT_CPP)
  #define DEFAULT_CPP "/usr/ccs/lib/cpp"
  #endif
***************
*** 256,264 ****
  #ifdef _CRAY
  #define DEFAULT_CPP "/lib/pcpp"
  #endif
! #if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__FreeBSD__)
  #define DEFAULT_CPP "/usr/libexec/cpp"
  #endif
  #if defined(__sgi) && defined(__ANSI_CPP__)
  #define USE_CC_E
  #endif
--- 265,276 ----
  #ifdef _CRAY
  #define DEFAULT_CPP "/lib/pcpp"
  #endif
! #if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
  #define DEFAULT_CPP "/usr/libexec/cpp"
  #endif
+ #if defined(__FreeBSD__)
+ #define USE_CC_E
+ #endif
  #if defined(__sgi) && defined(__ANSI_CPP__)
  #define USE_CC_E
  #endif
***************
*** 272,277 ****
--- 284,304 ----
  /* expects cpp in PATH */
  #define DEFAULT_CPP "cpp"
  #endif
+ #if defined(__GNU__)
+ #define USE_CC_E
+ #endif
+ #if defined (__QNX__)
+ #define DEFAULT_CPP "/usr/X11R6/bin/cpp"
+ #endif 
+ 
+ #if defined(Lynx)
+ /* On LynxOS 2.4.0 imake gets built with the old "legacy"
+  * /bin/cc which has a rather pedantic builtin preprocessor.
+  * Using a macro which is not #defined (as in Step 5
+  * below) flags an *error*
+  */
+ #define __NetBSD_Version__ 0
+ #endif
  
  /*
   * Step 5:  cpp_argv
***************
*** 294,306 ****
  char *cpp_argv[ARGUMENTS] = {
  	"cc",		/* replaced by the actual program to exec */
  	"-I.",		/* add current directory to include path */
  #ifdef unix
  	"-Uunix",	/* remove unix symbol so that filename unix.c okay */
  #endif
! #if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(MACH)
  # ifdef __i386__
  	"-D__i386__",
  # endif
  # ifdef __GNUC__
  	"-traditional",
  # endif
--- 321,341 ----
  char *cpp_argv[ARGUMENTS] = {
  	"cc",		/* replaced by the actual program to exec */
  	"-I.",		/* add current directory to include path */
+ #if !defined(__NetBSD_Version__) || __NetBSD_Version__ < 103080000
  #ifdef unix
  	"-Uunix",	/* remove unix symbol so that filename unix.c okay */
  #endif
! #endif
! #if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(MACH) || defined(linux) || defined(__GNU__)
  # ifdef __i386__
  	"-D__i386__",
  # endif
+ # ifdef __sparc__
+ 	"-D__sparc__",
+ # endif
+ # ifdef __m68k__
+ 	"-D__m68k__",
+ # endif
  # ifdef __GNUC__
  	"-traditional",
  # endif
***************
*** 375,383 ****
  #endif /* MOTOROLA */
  #if defined(M_UNIX) || defined(sco)
  	"-Dsco",
! # if defined(sco324)
! 	"-Dsco324",
! # endif
  #endif
  #ifdef i386
  	"-Di386",
--- 410,416 ----
  #endif /* MOTOROLA */
  #if defined(M_UNIX) || defined(sco)
  	"-Dsco",
! 	"-DSYSV",
  #endif
  #ifdef i386
  	"-Di386",
***************
*** 404,462 ****
  #  endif
  #  ifdef SCO
  	"-DSCO",
! #   ifdef SCO324
! 	"-DSCO324",
  #   endif
  #  endif
! #  ifdef ESIX
  	"-DESIX",
! #  endif
! #  ifdef ATT
  	"-DATT",
! #  endif
! #  ifdef DELL
  	"-DDELL",
- #  endif
  # endif
  #endif
! #ifdef SYSV386		/* System V/386 folks, obsolete */
  	"-Di386",
  # ifdef SVR4
  	"-DSVR4",
  # endif
! # ifdef SYSV
! 	"-DSYSV",
! #  ifdef ISC
  	"-DISC",
! #   ifdef ISC40
  	"-DISC40",       /* ISC 4.0 */
! #   else
! #    ifdef ISC202
  	"-DISC202",      /* ISC 2.0.2 */
! #    else
! #     ifdef ISC30
  	"-DISC30",       /* ISC 3.0 */
! #     else
  	"-DISC22",       /* ISC 2.2.1 */
- #     endif
  #    endif
  #   endif
  #  endif
! #  ifdef SCO
  	"-DSCO",
! #   ifdef SCO324
! 	"-DSCO324",
! #   endif
  #  endif
! #  ifdef ESIX
  	"-DESIX",
! #  endif
! #  ifdef ATT
  	"-DATT",
! #  endif
! #  ifdef DELL
  	"-DDELL",
- #  endif
  # endif
  #endif
  #ifdef __osf__
--- 437,492 ----
  #  endif
  #  ifdef SCO
  	"-DSCO",
! #   ifdef _SCO_DS
!     "-DSCO325 -DSVR4",
  #   endif
  #  endif
! # endif
! # ifdef ESIX
  	"-DESIX",
! # endif
! # ifdef ATT
  	"-DATT",
! # endif
! # ifdef DELL
  	"-DDELL",
  # endif
  #endif
! #ifdef SYSV386           /* System V/386 folks, obsolete */
  	"-Di386",
  # ifdef SVR4
  	"-DSVR4",
  # endif
! # ifdef ISC
  	"-DISC",
! #  ifdef ISC40
  	"-DISC40",       /* ISC 4.0 */
! #  else
! #   ifdef ISC202
  	"-DISC202",      /* ISC 2.0.2 */
! #   else
! #    ifdef ISC30
  	"-DISC30",       /* ISC 3.0 */
! #    else
  	"-DISC22",       /* ISC 2.2.1 */
  #    endif
  #   endif
  #  endif
! # endif
! # ifdef SCO
  	"-DSCO",
! #  ifdef _SCO_DS
! 	"-DSCO325 -DSVR4",
  #  endif
! # endif
! # ifdef ESIX
  	"-DESIX",
! # endif
! # ifdef ATT
  	"-DATT",
! # endif
! # ifdef DELL
  	"-DDELL",
  # endif
  #endif
  #ifdef __osf__
***************
*** 467,472 ****
--- 497,508 ----
  # ifdef __alpha
  	"-D__alpha",
  # endif
+ # ifdef __amiga__
+ 	"-D__amiga__",
+ # endif
+ # ifdef __alpha__
+ 	"-D__alpha__",
+ # endif
  # ifdef __i386__
  	"-D__i386__",
  # endif
***************
*** 511,523 ****
  # ifdef CROSS_COMPILE
  	"-DCROSS_COMPILE",
  #  ifdef CROSS_i80386
! 	"-DCROSS_i80386",
  #  endif
  #  ifdef CROSS_sparc
! 	"-DCROSS_sparc",
  #  endif
  #  ifdef CROSS_mc68000
! 	"-DCROSS_mc68000",
  #  endif
  # else
  #  ifdef i80386
--- 547,559 ----
  # ifdef CROSS_COMPILE
  	"-DCROSS_COMPILE",
  #  ifdef CROSS_i80386
! 	"-Di80386",
  #  endif
  #  ifdef CROSS_sparc
! 	"-Dsparc",
  #  endif
  #  ifdef CROSS_mc68000
! 	"-Dmc68000",
  #  endif
  # else
  #  ifdef i80386
***************
*** 543,548 ****
--- 579,602 ----
  	"-Demxos2",
  #endif
  
+ #if defined (__QNX__) && !defined(__QNXNTO__)
+ 	"-traditional",
+ 	"-D__QNX__",
+ #endif
+ 
+ #if defined(__QNXNTO__)
+ 	"-traditional",
+ 	"-D__QNXNTO__",
+ #if defined(i386)
+ 	"-Di386",
+ #endif
+ #if defined(PPC)
+ 	"-DPPC",
+ #endif
+ #if defined(MIPS)
+ 	"-DMIPS",
+ #endif
+ #endif
  };
  
  
***************
*** 556,561 ****
--- 610,619 ----
   *	Supported uname arguments are "snrvm", and if you specify multiple
   *	arguments they will be separated by spaces.  No more than 5 arguments
   *	may be given.  Unlike uname() order of arguments matters.
+  *
+  *	DEFAULT_OS_MAJOR_REV_FROB, DEFAULT_OS_MINOR_REV_FROB,
+  *	DEFAULT_OS_TEENY_REV_FROB, and DEFAULT_OS_NAME_FROB can be used to
+  *	modify the results of the use of the various strings.
   */
  #if defined(aix)
  /* uname -v returns "x" (e.g. "4"), and uname -r returns "y" (e.g. "1") */
***************
*** 563,569 ****
  # define DEFAULT_OS_MINOR_REV	"r %[0-9]"
  /* No information available to generate default OSTeenyVersion value. */
  # define DEFAULT_OS_NAME	"srvm %[^\n]"
! #elif defined(sun) || defined(sgi) || defined(ultrix) || defined(__uxp__) || defined(linux) || defined(sony)
  /* uname -r returns "x.y[.z]", e.g. "5.4" or "4.1.3" */
  # define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
  # define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
--- 621,627 ----
  # define DEFAULT_OS_MINOR_REV	"r %[0-9]"
  /* No information available to generate default OSTeenyVersion value. */
  # define DEFAULT_OS_NAME	"srvm %[^\n]"
! #elif defined(sun) || defined(sgi) || defined(ultrix) || defined(__uxp__) || defined(sony)
  /* uname -r returns "x.y[.z]", e.g. "5.4" or "4.1.3" */
  # define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
  # define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
***************
*** 592,604 ****
  # define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
  # define DEFAULT_OS_MINOR_REV	"v V%*dL%[0-9]"
  # define DEFAULT_OS_NAME	"srvm %[^\n]"
! #elif defined(__FreeBSD__)
! /* NetBSD, OpenBSD, 386BSD, and BSD/OS too? */
  /* uname -r returns "x.y[.z]-mumble", e.g. "2.1.5-RELEASE" or "2.2-0801SNAP" */
  # define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
  # define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
  # define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
  # define DEFAULT_OS_NAME        "srm %[^\n]"
  #endif
  
  #else /* else MAKEDEPEND */
--- 650,749 ----
  # define DEFAULT_OS_MAJOR_REV	"v V%[0-9]"
  # define DEFAULT_OS_MINOR_REV	"v V%*dL%[0-9]"
  # define DEFAULT_OS_NAME	"srvm %[^\n]"
! #elif defined(linux)
! # define DEFAULT_OS_MAJOR_REV	"r %[0-9]"
! # define DEFAULT_OS_MINOR_REV	"r %*d.%[0-9]"
! # define DEFAULT_OS_TEENY_REV	"r %*d.%*d.%[0-9]"
! # define DEFAULT_OS_NAME	"srm %[^\n]"
! #elif defined(ISC)
! /* ISC all Versions ? */
! /* uname -r returns "x.y", e.g. "3.2" ,uname -v returns "x" e.g. "2" */
! # define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
! # define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
! # define DEFAULT_OS_TEENY_REV   "v %[0-9]" 
! /* # define DEFAULT_OS_NAME        "srm %[^\n]" */ /* Not useful on ISC */
! #elif defined(__FreeBSD__) || defined(__OpenBSD__)
! /* BSD/OS too? */
  /* uname -r returns "x.y[.z]-mumble", e.g. "2.1.5-RELEASE" or "2.2-0801SNAP" */
  # define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
  # define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
  # define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
  # define DEFAULT_OS_NAME        "srm %[^\n]"
+ # if defined(__FreeBSD__)
+ /* Use an alternate way to find the teeny version for -STABLE, -SNAP versions */
+ #  define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
+     do {								\
+ 	if (*buf == 0) {						\
+ 		int __mib[2];						\
+ 		size_t __len;						\
+ 		int __osrel;						\
+ 									\
+ 		__mib[0] = CTL_KERN;					\
+ 		__mib[1] = KERN_OSRELDATE;				\
+ 		__len = sizeof(__osrel);				\
+ 		sysctl(__mib, 2, &__osrel, &__len, NULL, 0);		\
+ 		if (__osrel < 210000) {					\
+ 			if (__osrel < 199607)				\
+ 				buf[0] = '0';				\
+ 			else if (__osrel < 199612)			\
+ 				buf[0] = '5';				\
+ 			else if (__osrel == 199612)			\
+ 				buf[0] = '6';				\
+ 			else						\
+ 				buf[0] = '8'; /* guess */		\
+ 		} else {						\
+ 			buf[0] = ((__osrel / 1000) % 10) + '0';		\
+ 		}							\
+ 		buf[1] = 0;						\
+ 	}								\
+     } while (0)
+ # else
+    /* OpenBSD - Add DEFAULT_MACHINE_ARCHITECTURE */
+ #  define DEFAULT_MACHINE_ARCHITECTURE "m %[^\n]"
+ # endif
+ #elif defined(__NetBSD__)
+ /*
+  * uname -r returns "x.y([ABCD...]|_mumble)", e.g.:
+  *	1.2	1.2_BETA	1.2A	1.2B
+  *
+  * That means that we have to do something special to turn the
+  * TEENY revision into a form that we can use (i.e., a string of
+  * decimal digits).
+  *
+  * We also frob the name DEFAULT_OS_NAME so that it looks like the
+  * 'standard' NetBSD name for the version, e.g. "NetBSD/i386 1.2B" for
+  * NetBSD 1.2B on an i386.
+  */
+ # define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
+ # define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
+ # define DEFAULT_OS_TEENY_REV   "r %*d.%*d%[A-Z]" 
+ # define DEFAULT_OS_TEENY_REV_FROB(buf, size)				\
+     do {								\
+ 	if (*(buf) >= 'A' && *(buf) <= 'Z') /* sanity check */		\
+ 		snprintf((buf), (size), "%d", *(buf) - 'A' + 1);	\
+ 	else								\
+ 	    *(buf) = '\0';						\
+     } while (0)
+ # define DEFAULT_OS_NAME        "smr %[^\n]"
+ # define DEFAULT_OS_NAME_FROB(buf, size)				\
+     do {								\
+ 	char *__sp;							\
+ 	if ((__sp = strchr((buf), ' ')) != NULL)			\
+ 		*__sp = '/';						\
+     } while (0)
+ #elif defined(DGUX)
+ # define DEFAULT_OS_MAJOR_REV	"r R%[0-9]"
+ # define DEFAULT_OS_MINOR_REV	"r R%*d.%[0-9]"
+ # define DEFAULT_OS_TEENY_REV	"r R%*d.%*dMU%[0-9]"
+ # define DEFAULT_OS_NAME	"smr %[^\n]"
+ #else
+ # if defined(__Lynx__) || defined(Lynx)
+ /* Lynx 2.4.0 /bin/cc doesn't like #elif */
+ #  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
+ #  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
+ #  define DEFAULT_OS_TEENY_REV   "r %*d.%*d.%[0-9]" 
+ #  define DEFAULT_OS_NAME        "srm %[^\n]"
+ # endif
  #endif
  
  #else /* else MAKEDEPEND */
***************
*** 612,617 ****
--- 757,768 ----
  #ifdef apollo
  	{"apollo", "1"},
  #endif
+ #if defined(clipper) || defined(__clipper__)
+ 	{"clipper", "1"},
+ 	{"__clipper__", "1"},
+ 	{"clix", "1"},
+ 	{"__clix__", "1"},
+ #endif
  #ifdef ibm032
  	{"ibm032", "1"},
  #endif
***************
*** 726,731 ****
--- 877,885 ----
  #ifdef m68k
          {"m68k", "1"},
  #endif
+ #ifdef __m68k__
+ 	{"__m68k__", "1"},
+ #endif
  #ifdef m88k
          {"m88k", "1"},
  #endif
***************
*** 753,761 ****
--- 907,921 ----
  #ifdef __osf__
  	{"__osf__", "1"},
  #endif
+ #ifdef __amiga__
+ 	{"__amiga__", "1"},
+ #endif
  #ifdef __alpha
  	{"__alpha", "1"},
  #endif
+ #ifdef __alpha__
+ 	{"__alpha__", "1"},
+ #endif
  #ifdef __DECC
  	{"__DECC",  "1"},
  #endif
***************
*** 817,824 ****
--- 977,993 ----
  #ifdef __NetBSD__
  	{"__NetBSD__", "1"},
  #endif
+ #ifdef __ELF__
+ 	{"__ELF__", "1"},
+ #endif
  #ifdef __EMX__
  	{"__EMX__", "1"},
+ #endif
+ #if defined(__QNX__) && !defined(__QNXNTO__)
+ 	{"__QNX__", "1"},
+ #endif
+ #ifdef __QNXNTO__
+ 	{"__QNXNTO__", "1"},
  #endif
  	/* add any additional symbols before this line */
  	{NULL, NULL}
*** motif.orig/config/imake/Makefile.ini	Fri Apr 28 11:04:06 2000
--- motif/config/imake/Makefile.ini	Sat Jun  3 18:34:05 2000
***************
*** 7,12 ****
--- 7,13 ----
  # may be given at the top of the build tree for systems that do not define
  # any machine-specific preprocessor symbols.
  #
+ # $XFree86: xc/config/imake/Makefile.ini,v 3.4.2.1 1997/06/11 12:08:33 dawes Exp $
  
  BOOTSTRAPCFLAGS = 
  CC = cc
***************
*** 25,31 ****
  	@echo "making imake with BOOTSTRAPCFLAGS=$(BOOTSTRAPCFLAGS) in config/imake"
  
  imake:: imake.o
! 	$(CC) -o imake imake.o
  
  imake.o: ccimake imake.c
  	$(CC) -c $(CFLAGS) `./ccimake` imake.c
--- 26,32 ----
  	@echo "making imake with BOOTSTRAPCFLAGS=$(BOOTSTRAPCFLAGS) in config/imake"
  
  imake:: imake.o
! 	$(CC) -o imake $(CFLAGS) imake.o
  
  imake.o: ccimake imake.c
  	$(CC) -c $(CFLAGS) `./ccimake` imake.c
***************
*** 37,43 ****
  .NO_CONFIG_REC: ccimake
  
  bootstrap:
! 	@if [ -d bootstrap ]; then exit 0; else set -x; mkdir bootstrap; fi
  	$(MV) *.o imake bootstrap
  
  relink:
--- 38,44 ----
  .NO_CONFIG_REC: ccimake
  
  bootstrap:
! 	-@if [ -d bootstrap ]; then exit 0; else set -x; mkdir bootstrap; fi
  	$(MV) *.o imake bootstrap
  
  relink:
***************
*** 63,65 ****
--- 64,73 ----
  clean.Win32:
  	if exist imake.exe del imake.exe
  	if exist imake.obj del imake.obj
+ 
+ clean.os2:
+ 	imakesvc 4 imake imake.exe imake.o /imake.exe
+ 
+ imake.os2: imake.c
+ 	$(CC) -DBSD43 $(CFLAGS) -o imake.exe imake.c
+ 	copy imake.exe \\ 
*** motif.orig/config/makedepend/cppsetup.c	Wed May  3 04:30:08 2000
--- motif/config/makedepend/cppsetup.c	Sat Jun  3 18:35:28 2000
***************
*** 1,44 ****
! /* $TOG: cppsetup.c /main/18 1998/02/06 11:09:35 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
! 
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
  #include "def.h"
  
--- 1,31 ----
! /* $XConsortium: cppsetup.c /main/17 1996/09/28 16:15:03 rws $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
! 
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
! 
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
+ /* $XFree86: xc/config/makedepend/cppsetup.c,v 3.2 1996/12/30 13:57:53 dawes Exp $ */
  
  #include "def.h"
  
***************
*** 54,60 ****
  #define QB 16
  #define WB 32
  #define SALT '#'
! #if pdp11 | vax | ns16000 | mc68000 | ibm032
  #define COFF 128
  #else
  #define COFF 0
--- 41,47 ----
  #define QB 16
  #define WB 32
  #define SALT '#'
! #if defined(pdp11) || defined(vax) || defined(ns16000) || defined(mc68000) || defined(ibm032)
  #define COFF 128
  #else
  #define COFF 0
***************
*** 229,235 ****
  }
  
  
! cppsetup(line, filep, inc)
  	register char	*line;
  	register struct filepointer	*filep;
  	register struct inclist		*inc;
--- 216,222 ----
  }
  
  
! int cppsetup(line, filep, inc)
  	register char	*line;
  	register struct filepointer	*filep;
  	register struct inclist		*inc;
*** motif.orig/config/makedepend/def.h	Wed May  3 04:30:32 2000
--- motif/config/makedepend/def.h	Sat Jun  3 18:35:28 2000
***************
*** 1,48 ****
! /* $TOG: def.h /main/32 1998/03/25 08:17:45 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
! 
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
  #include "Xos.h"
  #include "Xfuncproto.h"
  #include <stdio.h>
  #include <ctype.h>
  #ifndef X_NOT_POSIX
  #ifndef _POSIX_SOURCE
--- 1,38 ----
! /* $XConsortium: def.h /main/30 1996/12/04 10:11:12 swick $ */
! /* $XFree86: xc/config/makedepend/def.h,v 3.3 1997/01/12 10:38:17 dawes Exp $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
! 
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
! 
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
  
  #include "Xos.h"
  #include "Xfuncproto.h"
  #include <stdio.h>
+ #ifndef X_NOT_STDC_ENV
+ #include <string.h>
+ #endif
  #include <ctype.h>
  #ifndef X_NOT_POSIX
  #ifndef _POSIX_SOURCE
***************
*** 76,82 ****
  #define SCCS            12
  #define ELIF            13
  #define EJECT           14
! #define WARNING		15
  #define IFFALSE         16     /* pseudo value --- never matched */
  #define ELIFFALSE       17     /* pseudo value --- never matched */
  #define INCLUDEDOT      18     /* pseudo value --- never matched */
--- 66,72 ----
  #define SCCS            12
  #define ELIF            13
  #define EJECT           14
! #define WARNING         15
  #define IFFALSE         16     /* pseudo value --- never matched */
  #define ELIFFALSE       17     /* pseudo value --- never matched */
  #define INCLUDEDOT      18     /* pseudo value --- never matched */
*** motif.orig/config/makedepend/ifparser.c	Fri Apr 28 11:04:07 2000
--- motif/config/makedepend/ifparser.c	Sat Jun  3 18:35:28 2000
***************
*** 1,5 ****
--- 1,6 ----
  /*
   * $XConsortium: ifparser.c /main/10 1996/09/28 16:15:18 rws $
+  * $XFree86: xc/config/makedepend/ifparser.c,v 3.6 1996/12/30 13:57:55 dawes Exp $
   *
   * Copyright 1992 Network Computing Devices, Inc.
   * 
***************
*** 31,40 ****
--- 32,43 ----
   * 
   *     EXPRESSION	:=	VALUE
   * 			 |	VALUE  BINOP	EXPRESSION
+  *			 |	VALUE	'?'	EXPRESSION ':'	EXPRESSION
   * 
   *     VALUE		:=	'('  EXPRESSION  ')'
   * 			 |	'!'  VALUE
   * 			 |	'-'  VALUE
+  *			 |	'~'  VALUE
   * 			 |	'defined'  '('  variable  ')'
   * 			 |	'defined'  variable
   *			 |	# variable '(' variable-list ')'
***************
*** 46,55 ****
   * 			 |	'<<'	|  '>>'
   * 			 |	'<'	|  '>'	|  '<='  |  '>='
   * 			 |	'=='	|  '!='
!  * 			 |	'&'	|  '|'
   * 			 |	'&&'	|  '||'
   * 
!  * The normal C order of precidence is supported.
   * 
   * 
   * External Entry Points:
--- 49,58 ----
   * 			 |	'<<'	|  '>>'
   * 			 |	'<'	|  '>'	|  '<='  |  '>='
   * 			 |	'=='	|  '!='
!  * 			 |	'&'	|  '^'  |  '|'
   * 			 |	'&&'	|  '||'
   * 
!  * The normal C order of precedence is supported.
   * 
   * 
   * External Entry Points:
***************
*** 59,64 ****
--- 62,69 ----
  
  #include "ifparser.h"
  #include <ctype.h>
+ #include <stdlib.h>
+ #include <string.h>
  
  /****************************************************************************
  		   Internal Macros and Utilities for Parser
***************
*** 175,180 ****
--- 180,190 ----
  	*valp = -(*valp);
  	return cp;
  
+       case '~':
+ 	DO (cp = parse_value (g, cp + 1, valp));
+ 	*valp = ~(*valp);
+ 	return cp;
+ 
        case '#':
  	DO (cp = parse_variable (g, cp + 1, &var));
  	SKIPSPACE (cp);
***************
*** 408,414 ****
  
  
  static const char *
! parse_bor (g, cp, valp)
      IfParser *g;
      const char *cp;
      long *valp;
--- 418,424 ----
  
  
  static const char *
! parse_bxor (g, cp, valp)
      IfParser *g;
      const char *cp;
      long *valp;
***************
*** 419,424 ****
--- 429,455 ----
      SKIPSPACE (cp);
  
      switch (*cp) {
+       case '^':
+ 	DO (cp = parse_bxor (g, cp + 1, &rightval));
+ 	*valp = (*valp ^ rightval);
+ 	break;
+     }
+     return cp;
+ }
+ 
+ 
+ static const char *
+ parse_bor (g, cp, valp)
+     IfParser *g;
+     const char *cp;
+     long *valp;
+ {
+     long rightval;
+ 
+     DO (cp = parse_bxor (g, cp, valp));
+     SKIPSPACE (cp);
+ 
+     switch (*cp) {
        case '|':
  	if (cp[1] != '|') {
  	    DO (cp = parse_bor (g, cp + 1, &rightval));
***************
*** 476,481 ****
--- 507,537 ----
  }
  
  
+ static const char *
+ parse_cond(g, cp, valp)
+     IfParser *g;
+     const char *cp;
+     long *valp;
+ {
+     long trueval, falseval;
+ 
+     DO (cp = parse_lor (g, cp, valp));
+     SKIPSPACE (cp);
+ 
+     switch (*cp) {
+       case '?':
+ 	DO (cp = parse_cond (g, cp + 1, &trueval));
+ 	SKIPSPACE (cp);
+ 	if (*cp != ':')
+ 	    return CALLFUNC(g, handle_error) (g, cp, ":");
+ 	DO (cp = parse_cond (g, cp + 1, &falseval));
+ 	*valp = (*valp ? trueval : falseval);
+ 	break;
+     }
+     return cp;
+ }
+ 
+ 
  /****************************************************************************
  			     External Entry Points
   ****************************************************************************/
***************
*** 486,492 ****
      const char *cp;
      long *valp;
  {
!     return parse_lor (g, cp, valp);
  }
- 
- 
--- 542,546 ----
      const char *cp;
      long *valp;
  {
!     return parse_cond (g, cp, valp);
  }
*** motif.orig/config/makedepend/ifparser.h	Fri Apr 28 11:04:07 2000
--- motif/config/makedepend/ifparser.h	Sat Jun  3 18:35:28 2000
***************
*** 31,40 ****
--- 31,42 ----
   * 
   *     EXPRESSION	:=	VALUE
   * 			 |	VALUE  BINOP	EXPRESSION
+  *			 |	VALUE	'?'	EXPRESSION ':'	EXPRESSION
   * 
   *     VALUE		:=	'('  EXPRESSION  ')'
   * 			 |	'!'  VALUE
   * 			 |	'-'  VALUE
+  *			 |	'~'  VALUE
   * 			 |	'defined'  '('  variable  ')'
   * 			 |	variable
   * 			 |	number
***************
*** 44,59 ****
   * 			 |	'<<'	|  '>>'
   * 			 |	'<'	|  '>'	|  '<='  |  '>='
   * 			 |	'=='	|  '!='
!  * 			 |	'&'	|  '|'
   * 			 |	'&&'	|  '||'
   * 
!  * The normal C order of precidence is supported.
   * 
   * 
   * External Entry Points:
   * 
   *     ParseIfExpression		parse a string for #if
   */
  
  #include <stdio.h>
  
--- 46,63 ----
   * 			 |	'<<'	|  '>>'
   * 			 |	'<'	|  '>'	|  '<='  |  '>='
   * 			 |	'=='	|  '!='
!  * 			 |	'&'	|  '^'  |  '|'
   * 			 |	'&&'	|  '||'
   * 
!  * The normal C order of precedence is supported.
   * 
   * 
   * External Entry Points:
   * 
   *     ParseIfExpression		parse a string for #if
   */
+ 
+ /* $XFree86: xc/config/makedepend/ifparser.h,v 3.2 1996/12/30 13:57:56 dawes Exp $ */
  
  #include <stdio.h>
  
*** motif.orig/config/makedepend/Imakefile	Fri Apr 28 11:04:06 2000
--- motif/config/makedepend/Imakefile	Sat Jun  3 18:35:28 2000
***************
*** 1,4 ****
--- 1,9 ----
  XCOMM $TOG: Imakefile /main/27 1997/04/30 15:38:09 kaleb $
+ XCOMM
+ XCOMM
+ XCOMM
+ XCOMM
+ XCOMM $XFree86: xc/config/makedepend/Imakefile,v 3.4.2.1 1997/06/11 12:08:35 dawes Exp $
  
      SRCS = include.c main.c parse.c pr.c cppsetup.c ifparser.c 
      OBJS = include.o main.o parse.o pr.o cppsetup.o ifparser.o 
***************
*** 32,38 ****
  
   DEPLIBS =
  
! #if defined(MacIIArchitecture) || defined(SequentArchitecture)
   XBSDLIB = /**/
  #endif
  
--- 37,43 ----
  
   DEPLIBS =
  
! #if defined(MacIIArchitecture) || defined(SequentArchitecture) || defined(i386ScoArchitecture)
   XBSDLIB = /**/
  #endif
  
***************
*** 78,80 ****
--- 83,92 ----
  SpecialCObjectRule(main,$(ICONFIGFILES),$(MAIN_DEFINES))
  
  InstallManPageLong(mkdepend,$(MANDIR),makedepend)
+ 
+ #ifdef OS2Architecture
+ all::
+ 	$(CP) ProgramTargetName(makedepend) /
+ #endif
+ 
+ InstallLinkKitNamedProg(makedepend,makedepend,$(LINKKITDIR)/config/makedepend)
*** motif.orig/config/makedepend/include.c	Wed May  3 04:31:03 2000
--- motif/config/makedepend/include.c	Sat Jun  3 18:35:28 2000
***************
*** 1,42 ****
! /* $TOG: include.c /main/21 1998/02/06 11:10:06 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
! The above copyright notice and this permission notice shall be included in
! all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
  
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
  
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
  
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
--- 1,28 ----
! /* $XConsortium: include.c /main/20 1996/12/04 10:11:18 swick $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
  
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
  
! The above copyright notice and this permission notice shall be included in
! all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
  
*** motif.orig/config/makedepend/main.c	Wed May  3 04:31:35 2000
--- motif/config/makedepend/main.c	Sat Jun  3 18:35:28 2000
***************
*** 1,42 ****
! /* $TOG: main.c /main/86 1998/03/25 08:17:50 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
! 
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
--- 1,29 ----
! /* $XConsortium: main.c /main/84 1996/12/04 10:11:23 swick $ */
! /* $XFree86: xc/config/makedepend/main.c,v 3.11.2.1 1997/05/11 05:04:07 dawes Exp $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
! 
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
! 
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
  
***************
*** 63,68 ****
--- 50,59 ----
  #include <stdarg.h>
  #endif
  
+ #ifdef MINIX
+ #define USE_CHMOD	1
+ #endif
+ 
  #ifdef DEBUG
  int	_debugmask;
  #endif
***************
*** 131,137 ****
  	fatalerr ("got signal %d\n", sig);
  }
  
! #if defined(USG) || (defined(i386) && defined(SYSV)) || defined(WIN32)
  #define USGISH
  #endif
  
--- 122,128 ----
  	fatalerr ("got signal %d\n", sig);
  }
  
! #if defined(USG) || (defined(i386) && defined(SYSV)) || defined(WIN32) || defined(__EMX__) || defined(Lynx_22)
  #define USGISH
  #endif
  
***************
*** 145,151 ****
  struct sigaction sig_act;
  #endif /* USGISH */
  
! main(argc, argv)
  	int	argc;
  	char	**argv;
  {
--- 136,142 ----
  struct sigaction sig_act;
  #endif /* USGISH */
  
! int main(argc, argv)
  	int	argc;
  	char	**argv;
  {
***************
*** 158,163 ****
--- 149,156 ----
  	struct symtab *psymp = predefs;
  	char *endmarker = NULL;
  	char *defincdir = NULL;
+ 	char **undeflist = NULL;
+ 	int numundefs = 0, i;
  
  	ProgramName = argv[0];
  
***************
*** 252,257 ****
--- 245,264 ----
  				argc--;
  			}
  			break;
+ 		case 'U':
+ 			/* Undef's override all -D's so save them up */
+ 			numundefs++;
+ 			if (numundefs == 1)
+ 			    undeflist = malloc(sizeof(char *));
+ 			else
+ 			    undeflist = realloc(undeflist,
+ 						numundefs * sizeof(char *));
+ 			if (argv[0][2] == '\0') {
+ 				argv++;
+ 				argc--;
+ 			}
+ 			undeflist[numundefs - 1] = argv[0] + 2;
+ 			break;
  		case 'Y':
  			defincdir = argv[0]+2;
  			break;
***************
*** 331,345 ****
--- 338,379 ----
  			warning("ignoring option %s\n", argv[0]);
  		}
  	}
+ 	/* Now do the undefs from the command line */
+ 	for (i = 0; i < numundefs; i++)
+ 	    undefine(undeflist[i], &maininclist);
+ 	if (numundefs > 0)
+ 	    free(undeflist);
+ 
  	if (!defincdir) {
  #ifdef PREINCDIR
  	    if (incp >= includedirs + MAXDIRS)
  		fatalerr("Too many -I flags.\n");
  	    *incp++ = PREINCDIR;
  #endif
+ #ifdef __EMX__
+ 	    {
+ 		char *emxinc = getenv("C_INCLUDE_PATH");
+ 		/* can have more than one component */
+ 		if (emxinc) {
+ 		    char *beg, *end;
+ 		    beg= (char*)strdup(emxinc);
+ 		    for (;;) {
+ 			end = (char*)strchr(beg,';');
+ 			if (end) *end = 0;
+ 		    	if (incp >= includedirs + MAXDIRS)
+ 				fatalerr("Too many include dirs\n");
+ 			*incp++ = beg;
+ 			if (!end) break;
+ 			beg = end+1;
+ 		    }
+ 		}
+ 	    }
+ #else /* !__EMX__, does not use INCLUDEDIR at all */
  	    if (incp >= includedirs + MAXDIRS)
  		fatalerr("Too many -I flags.\n");
  	    *incp++ = INCLUDEDIR;
+ #endif
+ 
  #ifdef POSTINCDIR
  	    if (incp >= includedirs + MAXDIRS)
  		fatalerr("Too many -I flags.\n");
***************
*** 435,440 ****
--- 469,489 ----
  	exit(0);
  }
  
+ #ifdef __EMX__
+ /*
+  * eliminate \r chars from file
+  */
+ static int elim_cr(char *buf, int sz)
+ {
+ 	int i,wp;
+ 	for (i= wp = 0; i<sz; i++) {
+ 		if (buf[i] != '\r')
+ 			buf[wp++] = buf[i];
+ 	}
+ 	return wp;
+ }
+ #endif
+ 
  struct filepointer *getfile(file)
  	char	*file;
  {
***************
*** 455,460 ****
--- 504,512 ----
  		fatalerr("cannot allocate mem\n");
  	if ((st.st_size = read(fd, content->f_base, st.st_size)) < 0)
  		fatalerr("failed to read %s\n", file);
+ #ifdef __EMX__
+ 	st.st_size = elim_cr(content->f_base,st.st_size);
+ #endif
  	close(fd);
  	content->f_len = st.st_size+1;
  	content->f_p = content->f_base;
***************
*** 481,487 ****
  	return(p);
  }
  
! match(str, list)
  	register char	*str, **list;
  {
  	register int	i;
--- 533,539 ----
  	return(p);
  }
  
! int match(str, list)
  	register char	*str, **list;
  {
  	register int	i;
***************
*** 524,530 ****
  			}
  			continue;
  		}
! #ifdef WIN32
  		else if (*p == '/' && *(p+1) == '/') { /* consume comments */
  			*p++ = ' ', *p++ = ' ';
  			while (*p && *p != '\n')
--- 576,582 ----
  			}
  			continue;
  		}
! #if defined(WIN32) || defined(__EMX__)
  		else if (*p == '/' && *(p+1) == '/') { /* consume comments */
  			*p++ = ' ', *p++ = ' ';
  			while (*p && *p != '\n')
***************
*** 579,585 ****
  	return(file);
  }
  
! #if defined(USG) && !defined(CRAY) && !defined(SVR4)
  int rename (from, to)
      char *from, *to;
  {
--- 631,637 ----
  	return(file);
  }
  
! #if defined(USG) && !defined(CRAY) && !defined(SVR4) && !defined(__EMX__) && !defined(clipper) && !defined(__clipper__)
  int rename (from, to)
      char *from, *to;
  {
***************
*** 630,641 ****
  		fatalerr("cannot open \"%s\"\n", makefile);
  	sprintf(backup, "%s.bak", makefile);
  	unlink(backup);
! #ifdef WIN32
  	fclose(fdin);
  #endif
  	if (rename(makefile, backup) < 0)
  		fatalerr("cannot rename %s to %s\n", makefile, backup);
! #ifdef WIN32
  	if ((fdin = fopen(backup, "r")) == NULL)
  		fatalerr("cannot open \"%s\"\n", backup);
  #endif
--- 682,693 ----
  		fatalerr("cannot open \"%s\"\n", makefile);
  	sprintf(backup, "%s.bak", makefile);
  	unlink(backup);
! #if defined(WIN32) || defined(__EMX__)
  	fclose(fdin);
  #endif
  	if (rename(makefile, backup) < 0)
  		fatalerr("cannot rename %s to %s\n", makefile, backup);
! #if defined(WIN32) || defined(__EMX__)
  	if ((fdin = fopen(backup, "r")) == NULL)
  		fatalerr("cannot open \"%s\"\n", backup);
  #endif
***************
*** 658,664 ****
  	    }
  	}
  	fflush(fdout);
! #if defined(USGISH) || defined(_SEQUENT_)
  	chmod(makefile, st.st_mode);
  #else
          fchmod(fileno(fdout), st.st_mode);
--- 710,716 ----
  	    }
  	}
  	fflush(fdout);
! #if defined(USGISH) || defined(_SEQUENT_) || defined(USE_CHMOD)
  	chmod(makefile, st.st_mode);
  #else
          fchmod(fileno(fdout), st.st_mode);
*** motif.orig/config/makedepend/mkdepend.man	Wed May  3 04:33:06 2000
--- motif/config/makedepend/mkdepend.man	Sat Jun  3 18:35:28 2000
***************
*** 1,41 ****
! .\" $TOG: mkdepend.man /main/20 1998/02/06 11:10:18 kaleb $
! .\" @OPENGROUP_COPYRIGHT@
! .\" COPYRIGHT NOTICE
! .\" Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! .\" Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! .\" ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! .\" the full copyright text.
! .\"  
! .\" The above copyright notice and this permission notice shall be included in
! .\" all copies or substantial portions of the Software.
  .\" 
! .\" This software is subject to an open license. It may only be
! .\" used on, with or for operating systems which are themselves open
! .\" source systems. You must contact The Open Group for a license
! .\" allowing distribution and sublicensing of this software on, with,
! .\" or for operating systems which are not Open Source programs.
  .\" 
! .\" See http://www.opengroup.org/openmotif/license for full
! .\" details of the license agreement. Any use, reproduction, or
! .\" distribution of the program constitutes recipient's acceptance of
! .\" this agreement.
  .\" 
! .\" EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! .\" PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! .\" KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! .\" WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! .\" OR FITNESS FOR A PARTICULAR PURPOSE
  .\" 
! .\" EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! .\" NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! .\" INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! .\" DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! .\" AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! .\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! .\" ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! .\" EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! .\" POSSIBILITY OF SUCH DAMAGES.
! .TH MAKEDEPEND 1 "Release 6.4" "X Version 11"
  .UC 4
  .SH NAME
  makedepend \- create dependencies in makefiles
--- 1,29 ----
! .\" $XConsortium: mkdepend.man /main/19 1996/09/28 16:15:44 rws $
! .\" Copyright (c) 1993, 1994  X Consortium
  .\" 
! .\" Permission is hereby granted, free of charge, to any person obtaining a
! .\" copy of this software and associated documentation files (the "Software"), 
! .\" to deal in the Software without restriction, including without limitation 
! .\" the rights to use, copy, modify, merge, publish, distribute, sublicense, 
! .\" and/or sell copies of the Software, and to permit persons to whom the 
! .\" Software furnished to do so, subject to the following conditions:
  .\" 
! .\" The above copyright notice and this permission notice shall be included in
! .\" all copies or substantial portions of the Software.
  .\" 
! .\" THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! .\" IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! .\" FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL 
! .\" THE X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
! .\" WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF 
! .\" OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
! .\" SOFTWARE.
  .\" 
! .\" Except as contained in this notice, the name of the X Consortium shall not 
! .\" be used in advertising or otherwise to promote the sale, use or other 
! .\" dealing in this Software without prior written authorization from the 
! .\" X Consortium.
! .TH MAKEDEPEND 1 "Release 6.1" "X Version 11"
  .UC 4
  .SH NAME
  makedepend \- create dependencies in makefiles
*** motif.orig/config/makedepend/parse.c	Wed May  3 04:36:43 2000
--- motif/config/makedepend/parse.c	Sat Jun  3 18:35:28 2000
***************
*** 1,44 ****
! /* $TOG: parse.c /main/35 1998/03/25 08:17:55 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
! 
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
! 
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
  #include "def.h"
  
--- 1,31 ----
! /* $XConsortium: parse.c /main/33 1996/12/04 10:11:28 swick $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
! 
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
! 
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
! 
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
+ /* $XFree86: xc/config/makedepend/parse.c,v 1.3 1997/01/12 10:39:45 dawes Exp $ */
  
  #include "def.h"
  
***************
*** 234,239 ****
--- 221,227 ----
  	case IDENT:
  	case SCCS:
  	case EJECT:
+ 	case WARNING:
  		debug(0,("%s, line %d: #%s\n",
  			file->i_file, filep->f_line, directives[ret]));
  		/*
***************
*** 628,633 ****
--- 616,622 ----
  			add_include(filep, file, file_red, line, TRUE, failOK);
  			break;
  		case ERROR:
+ 		case WARNING:
  		    	warning("%s: %d: %s\n", file_red->i_file,
  				 filep->f_line, line);
  		    	break;
*** motif.orig/config/makedepend/pr.c	Wed May  3 04:37:09 2000
--- motif/config/makedepend/pr.c	Sat Jun  3 18:35:28 2000
***************
*** 1,42 ****
! /* $TOG: pr.c /main/21 1998/02/06 11:10:30 kaleb $ */
  /*
  
! @OPENGROUP_COPYRIGHT@
! COPYRIGHT NOTICE
! Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
! Copyright (c) 1996, 1997, 1998, 1999, 2000 The Open Group
! ALL RIGHTS RESERVED (MOTIF). See the file named COPYRIGHT.MOTIF for
! the full copyright text.
!  
! The above copyright notice and this permission notice shall be included in
! all copies or substantial portions of the Software.
  
! This software is subject to an open license. It may only be
! used on, with or for operating systems which are themselves open
! source systems. You must contact The Open Group for a license
! allowing distribution and sublicensing of this software on, with,
! or for operating systems which are not Open Source programs.
  
! See http://www.opengroup.org/openmotif/license for full
! details of the license agreement. Any use, reproduction, or
! distribution of the program constitutes recipient's acceptance of
! this agreement.
  
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, THE PROGRAM IS
! PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
! KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT LIMITATION, ANY
! WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY
! OR FITNESS FOR A PARTICULAR PURPOSE
  
! EXCEPT AS EXPRESSLY SET FORTH IN THIS AGREEMENT, NEITHER RECIPIENT
! NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY DIRECT,
! INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
! DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED
! AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
! LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
! ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE PROGRAM OR THE
! EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF THE
! POSSIBILITY OF SUCH DAMAGES.
  
  */
  
--- 1,28 ----
! /* $XConsortium: pr.c /main/20 1996/12/04 10:11:41 swick $ */
  /*
  
! Copyright (c) 1993, 1994  X Consortium
  
! Permission is hereby granted, free of charge, to any person obtaining a copy
! of this software and associated documentation files (the "Software"), to deal
! in the Software without restriction, including without limitation the rights
! to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
! copies of the Software, and to permit persons to whom the Software is
! furnished to do so, subject to the following conditions:
  
! The above copyright notice and this permission notice shall be included in
! all copies or substantial portions of the Software.
  
! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
! X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
! AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
! CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  
! Except as contained in this notice, the name of the X Consortium shall not be
! used in advertising or otherwise to promote the sale, use or other dealings
! in this Software without prior written authorization from the X Consortium.
  
  */
  
*** motif.orig/config/util/makestrs.c	Wed May  3 04:48:29 2000
--- motif/config/util/makestrs.c	Sun Jun  4 15:50:22 2000
***************
*** 400,407 ****
  		    done_atom = 1;
  		}
  		(void) printf ("%s %sConst char %s%s[] = \"%s\";\n",
! 			       externdefstr, conststr ? conststr : prefixstr, 
! 			       te->left, te->right);
  	    }
      }
  }
--- 400,407 ----
  		    done_atom = 1;
  		}
  		(void) printf ("%s %sConst char %s%s[] = \"%s\";\n",
! 			       externdefstr, conststr ? conststr : "", 
! 			       prefixstr, te->left, te->right);
  	    }
      }
  }
