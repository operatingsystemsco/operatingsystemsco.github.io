<HTML>

<HEAD>

<TITLE>Corrigenda U015</TITLE>
</HEAD>
<BODY>
<BODY BGCOLOR="#FFFFFF">

<BODY>

<H2>X/Open Corrigenda: U015</H2>

<H1>Document: Structured Query Language (SQL)</H1>
X/Open CAE Specification, 08/92<BR>
X/Open reference C201, ISBN 1-872630-58-8
<P>
<H3>Description</H3>

This document corrects errors in the SQL CAE Specification which X/Open and readers have located.
<P>
In addition, ISO is preparing to publish a number of Technical Corrigenda with respect to the underlying International Standard, and may publish additional Technical Corrigenda. This X/Open document
does not necessarily address all the subjects from these
Technical Corrigenda. However, X/Open intends to align
the SQL CAE Specification with the material in all such ISO
documents, either in future X/Open Corrigenda documents,
or in future editions of the SQL CAE Specification.

<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:
<DD>Correction 1
<P>
<DT>Title:          
<DD>Alignment of SQLSTATE with the International Standard
<P>
<DT>Rationale:
</B>      
<DD>The X/Open specification defined certain error conditions
and assigned to these SQLSTATE values in the ``implementation-specific'' range (using the class S0) because the values were not then defined in a standard. When the International Standard was published, it codified
the same error conditions and assigned SQLSTATE values in the class 42, which is in the range reserved for definition by standards.
<P>
When X/Open documents an error condition also documented in the International Standard, X/Open specifies the standardised value of SQLSTATE. X/Open aligned with the International Standard in Version
2 of the specification (in the March 1995 Preliminary Specification
and in the April 1996 CAE Specification).
<P>
However, a clarification is necessary that the SQLSTATE values in the International Standard should be used in precedence over those published in X/Open Version 1; otherwise an implementation could not simultaneously comply with both specifications.
<P>
The following SQLSTATE values published in Version 1 are changed:
<P>
<PRE>
                    Original   Corrected
<P>
                    --------------------
<P>
                    'S0001'    '42S01'
<P>
                    'S0002'    '42S02'
<P>
                    'S0011'    '42S11'
<P>
                    'S0021'    '42S21'
</PRE>
<P>
Current X/Open Data Management specifications explicitly defer to referenced standards in the case of such discrepancies.<BR>
<P>
<DT><B>Change:</B>
<DD>         (1) On page 64 (ALTER TABLE, DIAGNOSTICS), change 'S0021' to '42S21'.
<P>
             (2) On page 65 (CREATE INDEX, DIAGNOSTICS), change 'S0002' to '42S02' and change 'S0011' to '42S11'.
<P>
             (3) On page 67 (CREATE TABLE, DIAGNOSTICS), change 'S0001'
to '42S01'.
<P>
             (4) On page 68 (CREATE VIEW, DIAGNOSTICS), change 'S0002'
to '42S02'.<BR>
<P>
             (5) On page 136, change the final section of the lower
table to read as follows:
<P>
<PRE>
	---------------------------------------------------
	Class Subclass Meaning                     Section
	---------------------------------------------------
	               Invalid name
	42    S01      - Base table or viewed 
	                 table already exists      5.3.4,5
	42    S02      - Base table not found      5.3.3
	42    S11      - Index already exists      5.3.3
	42    S21      - Column already exists     5.3.2
</PRE>
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>
Change number:  
<DD>Correction 2
<P>
<DT>Title:          
<DD>Missing SQLSTATE '42S22'
<P>
<DT>Rationale:      
</B>
<DD>An SQLSTATE value and a set of DIAGNOSTICS is missing from the SQL CAE Specification. SQLSTATE values in class '42' are symmetrically allocated for the cases of a duplicate or missing table, index or column. However, the specific case of a missing column is not defined.
<P>
<DT>
<B>Change:</B>
<DD>
         (1) Add the following DIAGNOSTIC to the descriptions of CREATE INDEX (Section 5.3.3 on page 65) and GRANT (Section 5.3.9 on page 71):
<P>
         Any specified column-identifier must already xist('42S22').
<P>
         (2) A slightly different wording is warranted for CREATE TABLE (Section 5.3.4 on page 67):
<P>
         Any column-identifier specified in a constraint (referencing a table other than the one being created) must already exist ('42S22').
<P>
         (The column-identifiers in ALTER TABLE need not already exist, as the ALTER TABLE statement brings them into existence. The various DROP statements and the REVOKE statements do not let the applications
specify individual columns.)<BR>
<P>
         (3) Moreover, add an entry for '42S22' to Appendix B on page 136:
<P>
<PRE>
	42 S22 - Column not found. 5.3.3,4,5,9
</PRE>
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:  
<DD>Correction 3<BR>
<P>
<DT>Title:          
<DD>Other Missing Diagnostics
<P>
<DT>Rationale:      
</B>
<DD>In three additional cases to those described in the previous section, diagnostics were omitted from the SQL CAE Specification.
<P>
<DT><B>Change: </B>
<DD>        (1) In Section 5.3.6 on page 69 (DROPINDEX), add the                 following paragraph at the end of DIAGNOSTICS:
<P>
            The index-name must identify an index that already
exists ('42S12').
<P>
            (2) In Section 5.3.7 on page 69 (DROP TABLE), add a
DIAGNOSTICS section with a single paragraph:
<P>
            The base-table-name must identify a table that already exists ('42S02').
<P>
            (3) In Section 5.3.8 on page 69 (DROP VIEW), add a
DIAGNOSTICS section (on page 70)with a single paragraph:
<P>
The viewed-table-name must identify a table that already exists ('42S02').
<P>
            (4) In Appendix B, revise the second
table on page 136, changing the section references for
'42S02' and adding an entry for '42S12':
<P>
<PRE>
	42 S02 - Base table not found. 5.3.3,7,8
	42 S12 - Index not found. 5.3.6
</PRE>
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:  
<DD>Correction 4<BR>
<P>
<DT>Title:          
<DD>Reversed Syntax in DECLARE CURSOR
<P>
<DT>Rationale:</B>
<DD>In the description of the DECLARE CURSOR statement in Section 4.3.1 on page 49, under query-expression, the optional FOR clause (which may be
FOR READ ONLY or FOR UPDATE) and ORDER BY appear in an order that is reversed compared to the International Standard.
<P>
This deviation from the International Standard is inadvertent. If an ORDER BY clause appears in a DECLARE CURSOR statement, it must precede
any FOR READ ONLY or FOR UPDATE clause.
<P>
<DT><B>Change:</B>
<DD>Reverse the appearance of the two clauses in Section 4.3.1 
on page 49, and again in Section A.2 on page 127.
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:  
<DD>Correction 5
<P>
<DT>Title:          
<DD>Keyword Alignment with the International Standard
<P>
<DT>Rationale:</B>
<DD>The keywords list in Section 3.1.3 on page 22 must be
aligned with that found in the published International
Standard.
<P>
The SQL CAE Specification lists five keywords as reserved
(unavailable for use as user-defined names), but follows
them by an asterisk to indicate that &quot;X/Open SQL does not
use these keywords, but they are defined in the International Standard.&quot; As they do not appear in the International Standard, they should be removed from the table. This applies to the following
keywords: DICTIONARY, DISPLACEMENT, IGNORE, OFF, SYSTEM.
<P>
The International Standard lists additional keywords not
contained in the table in the SQL CAE Specification. These
keywords should be added to the table in the SQL CAE
Specification (each with an asterisk, as they are not yet
used in X/Open SQL): ACTION, BOTH, CROSS, CURRENT_USER, LEADING, NATURAL, NO, PAD, RELATIVE, SESSION, SESSION_USER,SPACE, SYSTEM_USER, TRAILING, and TRIM.
<P>
<DT><B>Change:</B>
<DD>Modify the keywords list in Section 3.1.3 on page 22 as described above.
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:  
<DD>Correction 6
<P>
<DT>Title:          
<DD>Correction in Comparison to the International
Standard
<P>
<DT>Rationale:  </B>
<DD>Appendix C compares the SQL CAE Specification
to the International Standard. The introduction
to the Appendix defines X/Open-compliance of an implementation
as the implementation of both of the following:
<P>
- All Entry level features from the International
Standard, except as described in Section C.1
<P>
- Features enumerated in Section C.2 and Section C.3.
<P>
In general, X/Open-compliant implementations must implement
deprecated features even though X/Open intends to remove
them from a future edition of the specification. However,
all the deprecated features described in the SQL CAE                Specification are also marked optional.
<P>
Appendix C lists only one of the deprecated features, the
INCLUDE SQLCA directive. Since this feature is optional, it
should not be listed in Section C.3 as an extension to the
International Standard, giving the impression that it is
mandatory.
<P>
Readers should note that SQLCODE is deprecated and optional
in the SQL CAE Specification. However, in the International
Standard, SQLCODE is deprecated mandatory.<BR>
<P>
<DT><B>Change:</B>
<DD>On page 141, delete the first bulleted paragraph on the
page.
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:  
<DD>Correction 7
<P>
<DT>Title:          
<DD>COLUMNS System View
<P>
<DT>Rationale:
</B>
<DD>In Section 6.2 on page 105 (COLUMNS System View), the
description of the NULLABLE column is inconsistent with text
in the published International Standard.
<P>
In addition, the SQL CAE Specification does not specify the
value of the NUMERIC_PREC_RADIX column for exact numeric
data. (This contradicts the statement that an application
could combine precision and radix to calculate the maximum
number that a column can hold.)
<P>
<DT><B>Change:</B>
<DD>
(1) In Section 6.2 on page 105, change one line in the VIEW
DEFINITION from:
<P>
NULLABLE CHAR(3),
<P>
to:
<P>
IS_NULLABLE VARCHAR(254),
<P>
(2) On page 105, in the paragraph describing NUMERIC_PRECISION, replace the text with the following:
<P>
<BLOCKQUOTE>If DATA_TYPE is an approximate numeric data type,
this column contains the number of bits of mantissa precision of the column. For exact numeric data types, this column contains the total
number of decimal digits allowed. Otherwise, this column is null.
<P>
NUMERIC_PREC_RADIX (see below) indicates the units of measurement.
</BLOCKQUOTE>
<P>
This new paragraph does not represent a substantive
change to the prior text.
<P>
(3) On page 105, in the paragraph describing NUMERIC_PREC_RADIX, replace the text with the following:
<P>
<BLOCKQUOTE>
If DATA_TYPE is an approximate numeric data type, this column contains the value 2 because NUMERIC_PRECISION specifies a number of bits. For
exact numeric data types, this column contains the value 10 because NUMERIC_PRECISION specifies a number of decimal digits. Otherwise,
this column is null. By combining the precision with the radix, an application can calculate the maximum number that the column can hold.
<P>
Only the second sentence of this new paragraph represents a substantive change to the prior text.
<P>
(4) On page 106, in the paragraph describing NULLABLE, change the heading NULLABLE to IS_NULLABLE and change &quot;Contains a 3-character value:&quot; to &quot;Contains the value&quot;.
</DL>
<P>
<HR>
<P>
<DL>
<B>
<DT>Change number:  
<DD>Correction 8
<P>
<DT>Title:          
<DD>Typographical Errors<BR>
<P>
<DT>Change:
</B>
<DD>The following typographical errors
should be corrected:
<P>
(1) In Section 3.2.2 (&quot;Data Types of Expressions&quot;), the word expression near the top of page 26 should be followed by a reference to Section 3.3 on page 31, where the term is defined.
<P>
(2) In the last paragraph of Section 3.2.2, also on page 26, change &quot;a set functions&quot; to &quot;a set function&quot;.
<P>
(3) In Appendix A.1 on page 123, under character-string-type, CHAR should be shown as a synonymous alternative for CHARACTER (as VARCHAR is shown). On page 124, under exact-numeric-type, INT should be shown as a
synonymous alternative for INTEGER. DEC should be shown as a synonymous alternative for DECIMAL, with the same optional precision and scale.
<P>
(4) In Appendix A.1 on page 125, under like-predicate, the four lines directly following pattern-value should be indented.<BR>
</DL>
<P>
<HR>
<P>
</BODY>

</HTML>
